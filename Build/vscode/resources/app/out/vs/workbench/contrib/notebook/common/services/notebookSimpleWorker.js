/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/errors","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/contextkey/common/scanner","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ne=function(ee){for(var t=[],M=0,q=ee.length;M<q;M++)t[M]=te[ee[M]];return t};define(te[13],ne([0,1]),function(ee,t){"use strict";var M,q,D;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.setToString=t.mapToString=t.getOrSet=void 0;function w(f,r,s){let l=f.get(r);return l===void 0&&(l=s,f.set(r,l)),l}t.getOrSet=w;function v(f){const r=[];return f.forEach((s,l)=>{r.push(`${l} => ${s}`)}),`Map(${f.size}) {${r.join(", ")}}`}t.mapToString=v;function F(f){const r=[];return f.forEach(s=>{r.push(s)}),`Set(${f.size}) {${r.join(", ")}}`}t.setToString=F;class U{constructor(r,s){this.uri=r,this.value=s}}class m{constructor(r,s){this[M]="ResourceMap",r instanceof m?(this.map=new Map(r.map),this.toKey=s??m.defaultToKey):(this.map=new Map,this.toKey=r??m.defaultToKey)}set(r,s){return this.map.set(this.toKey(r),new U(r,s)),this}get(r){return this.map.get(this.toKey(r))?.value}has(r){return this.map.has(this.toKey(r))}get size(){return this.map.size}clear(){this.map.clear()}delete(r){return this.map.delete(this.toKey(r))}forEach(r,s){typeof s<"u"&&(r=r.bind(s));for(const[l,n]of this.map)r(n.value,n.uri,this)}*values(){for(const r of this.map.values())yield r.value}*keys(){for(const r of this.map.values())yield r.uri}*entries(){for(const r of this.map.values())yield[r.uri,r.value]}*[(M=Symbol.toStringTag,Symbol.iterator)](){for(const[,r]of this.map)yield[r.uri,r.value]}}m.defaultToKey=f=>f.toString(),t.ResourceMap=m;class L{constructor(r,s){this[q]="ResourceSet",!r||typeof r=="function"?this._map=new m(r):(this._map=new m(s),r.forEach(this.add,this))}get size(){return this._map.size}add(r){return this._map.set(r,r),this}clear(){this._map.clear()}delete(r){return this._map.delete(r)}forEach(r,s){this._map.forEach((l,n)=>r.call(s,n,n,this))}has(r){return this._map.has(r)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(q=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=L;var B;(function(f){f[f.None=0]="None",f[f.AsOld=1]="AsOld",f[f.AsNew=2]="AsNew"})(B=t.Touch||(t.Touch={}));class b{constructor(){this[D]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(r){return this._map.has(r)}get(r,s=0){const l=this._map.get(r);if(!!l)return s!==0&&this.touch(l,s),l.value}set(r,s,l=0){let n=this._map.get(r);if(n)n.value=s,l!==0&&this.touch(n,l);else{switch(n={key:r,value:s,next:void 0,previous:void 0},l){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(r,n),this._size++}return this}delete(r){return!!this.remove(r)}remove(r){const s=this._map.get(r);if(!!s)return this._map.delete(r),this.removeItem(s),this._size--,s.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const r=this._head;return this._map.delete(r.key),this.removeItem(r),this._size--,r.value}forEach(r,s){const l=this._state;let n=this._head;for(;n;){if(s?r.bind(s)(n.value,n.key,this):r(n.value,n.key,this),this._state!==l)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const r=this,s=this._state;let l=this._head;const n={[Symbol.iterator](){return n},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:l.key,done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return n}values(){const r=this,s=this._state;let l=this._head;const n={[Symbol.iterator](){return n},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:l.value,done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return n}entries(){const r=this,s=this._state;let l=this._head;const n={[Symbol.iterator](){return n},next(){if(r._state!==s)throw new Error("LinkedMap got modified during iteration.");if(l){const a={value:[l.key,l.value],done:!1};return l=l.next,a}else return{value:void 0,done:!0}}};return n}[(D=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(r){if(r>=this.size)return;if(r===0){this.clear();return}let s=this._head,l=this.size;for(;s&&l>r;)this._map.delete(s.key),s=s.next,l--;this._head=s,this._size=l,s&&(s.previous=void 0),this._state++}addItemFirst(r){if(!this._head&&!this._tail)this._tail=r;else if(this._head)r.next=this._head,this._head.previous=r;else throw new Error("Invalid list");this._head=r,this._state++}addItemLast(r){if(!this._head&&!this._tail)this._head=r;else if(this._tail)r.previous=this._tail,this._tail.next=r;else throw new Error("Invalid list");this._tail=r,this._state++}removeItem(r){if(r===this._head&&r===this._tail)this._head=void 0,this._tail=void 0;else if(r===this._head){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this._head=r.next}else if(r===this._tail){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this._tail=r.previous}else{const s=r.next,l=r.previous;if(!s||!l)throw new Error("Invalid list");s.previous=l,l.next=s}r.next=void 0,r.previous=void 0,this._state++}touch(r,s){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(s!==1&&s!==2)){if(s===1){if(r===this._head)return;const l=r.next,n=r.previous;r===this._tail?(n.next=void 0,this._tail=n):(l.previous=n,n.next=l),r.previous=void 0,r.next=this._head,this._head.previous=r,this._head=r,this._state++}else if(s===2){if(r===this._tail)return;const l=r.next,n=r.previous;r===this._head?(l.previous=void 0,this._head=l):(l.previous=n,n.next=l),r.next=void 0,r.previous=this._tail,this._tail.next=r,this._tail=r,this._state++}}}toJSON(){const r=[];return this.forEach((s,l)=>{r.push([l,s])}),r}fromJSON(r){this.clear();for(const[s,l]of r)this.set(s,l)}}t.LinkedMap=b;class R extends b{constructor(r,s=1){super(),this._limit=r,this._ratio=Math.min(Math.max(0,s),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,s=2){return super.get(r,s)}peek(r){return super.get(r,0)}set(r,s){return super.set(r,s,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=R}),define(te[14],ne([0,1,5,7]),function(ee,t,M,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=t.isReadable=void 0;function D(i){const o=i;return o?typeof o.read=="function":!1}t.isReadable=D;function w(i){const o=i;return o?[o.on,o.pause,o.resume,o.destroy].every(c=>typeof c=="function"):!1}t.isReadableStream=w;function v(i){const o=i;return o?w(o.stream)&&Array.isArray(o.buffer)&&typeof o.ended=="boolean":!1}t.isReadableBufferedStream=v;function F(i,o){return new U(i,o)}t.newWriteableStream=F;class U{constructor(o,c){this.reducer=o,this.options=c,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(o){if(!this.state.destroyed){if(this.state.flowing)this.emitData(o);else if(this.buffer.data.push(o),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(c=>this.pendingWritePromises.push(c))}}error(o){this.state.destroyed||(this.state.flowing?this.emitError(o):this.buffer.error.push(o))}end(o){this.state.destroyed||(typeof o<"u"&&this.write(o),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(o){this.listeners.data.slice(0).forEach(c=>c(o))}emitError(o){this.listeners.error.length===0?(0,M.onUnexpectedError)(o):this.listeners.error.slice(0).forEach(c=>c(o))}emitEnd(){this.listeners.end.slice(0).forEach(o=>o())}on(o,c){if(!this.state.destroyed)switch(o){case"data":this.listeners.data.push(c),this.resume();break;case"end":this.listeners.end.push(c),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(c),this.state.flowing&&this.flowErrors();break}}removeListener(o,c){if(this.state.destroyed)return;let p;switch(o){case"data":p=this.listeners.data;break;case"end":p=this.listeners.end;break;case"error":p=this.listeners.error;break}if(p){const N=p.indexOf(c);N>=0&&p.splice(N,1)}}flowData(){if(this.buffer.data.length>0){const o=this.reducer(this.buffer.data);this.emitData(o),this.buffer.data.length=0;const c=[...this.pendingWritePromises];this.pendingWritePromises.length=0,c.forEach(p=>p())}}flowErrors(){if(this.listeners.error.length>0){for(const o of this.buffer.error)this.emitError(o);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function m(i,o){const c=[];let p;for(;(p=i.read())!==null;)c.push(p);return o(c)}t.consumeReadable=m;function L(i,o,c){const p=[];let N;for(;(N=i.read())!==null&&p.length<c;)p.push(N);return N===null&&p.length>0?o(p):{read:()=>{if(p.length>0)return p.shift();if(typeof N<"u"){const k=N;return N=void 0,k}return i.read()}}}t.peekReadable=L;function B(i,o){return new Promise((c,p)=>{const N=[];b(i,{onData:k=>{o&&N.push(k)},onError:k=>{o?p(k):c(void 0)},onEnd:()=>{c(o?o(N):void 0)}})})}t.consumeStream=B;function b(i,o){let c=!1;return i.on("error",p=>{c||o.onError(p)}),i.on("end",()=>{c||o.onEnd()}),i.on("data",p=>{c||o.onData(p)}),(0,q.toDisposable)(()=>c=!0)}t.listenStream=b;function R(i,o){return new Promise((c,p)=>{const N=new q.DisposableStore,k=[],g=d=>{if(k.push(d),k.length>o)return N.dispose(),i.pause(),c({stream:i,buffer:k,ended:!1})},C=d=>p(d),E=()=>c({stream:i,buffer:k,ended:!0});N.add((0,q.toDisposable)(()=>i.removeListener("error",C))),i.on("error",C),N.add((0,q.toDisposable)(()=>i.removeListener("end",E))),i.on("end",E),N.add((0,q.toDisposable)(()=>i.removeListener("data",g))),i.on("data",g)})}t.peekStream=R;function f(i,o){const c=F(o);return c.end(i),c}t.toStream=f;function r(){const i=F(()=>{throw new Error("not supported")});return i.end(),i}t.emptyStream=r;function s(i){let o=!1;return{read:()=>o?null:(o=!0,i)}}t.toReadable=s;function l(i,o,c){const p=F(c);return b(i,{onData:N=>p.write(o.data(N)),onError:N=>p.error(o.error?o.error(N):N),onEnd:()=>p.end()}),p}t.transform=l;function n(i,o,c){let p=!1;return{read:()=>{const N=o.read();return p?N:(p=!0,N!==null?c([i,N]):i)}}}t.prefixedReadable=n;function a(i,o,c){let p=!1;const N=F(c);return b(o,{onData:k=>p?N.write(k):(p=!0,N.write(c([i,k]))),onError:k=>N.error(k),onEnd:()=>{p||(p=!0,N.write(i)),N.end()}}),N}t.prefixedStream=a}),define(te[6],ne([0,1,14]),function(ee,t,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const q=typeof Buffer<"u";let D,w;class v{static alloc(d){return q?new v(Buffer.allocUnsafe(d)):new v(new Uint8Array(d))}static wrap(d){return q&&!Buffer.isBuffer(d)&&(d=Buffer.from(d.buffer,d.byteOffset,d.byteLength)),new v(d)}static fromString(d,P){return!(P?.dontUseNodeBuffer||!1)&&q?new v(Buffer.from(d)):(D||(D=new TextEncoder),new v(D.encode(d)))}static fromByteArray(d){const P=v.alloc(d.length);for(let z=0,j=d.length;z<j;z++)P.buffer[z]=d[z];return P}static concat(d,P){if(typeof P>"u"){P=0;for(let H=0,Q=d.length;H<Q;H++)P+=d[H].byteLength}const z=v.alloc(P);let j=0;for(let H=0,Q=d.length;H<Q;H++){const Y=d[H];z.set(Y,j),j+=Y.byteLength}return z}constructor(d){this.buffer=d,this.byteLength=this.buffer.byteLength}clone(){const d=v.alloc(this.byteLength);return d.set(this),d}toString(){return q?this.buffer.toString():(w||(w=new TextDecoder),w.decode(this.buffer))}slice(d,P){return new v(this.buffer.subarray(d,P))}set(d,P){if(d instanceof v)this.buffer.set(d.buffer,P);else if(d instanceof Uint8Array)this.buffer.set(d,P);else if(d instanceof ArrayBuffer)this.buffer.set(new Uint8Array(d),P);else if(ArrayBuffer.isView(d))this.buffer.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength),P);else throw new Error("Unknown argument 'array'")}readUInt32BE(d){return m(this.buffer,d)}writeUInt32BE(d,P){L(this.buffer,d,P)}readUInt32LE(d){return B(this.buffer,d)}writeUInt32LE(d,P){b(this.buffer,d,P)}readUInt8(d){return R(this.buffer,d)}writeUInt8(d,P){f(this.buffer,d,P)}}t.VSBuffer=v;function F(E,d){return E[d+0]<<0>>>0|E[d+1]<<8>>>0}t.readUInt16LE=F;function U(E,d,P){E[P+0]=d&255,d=d>>>8,E[P+1]=d&255}t.writeUInt16LE=U;function m(E,d){return E[d]*2**24+E[d+1]*2**16+E[d+2]*2**8+E[d+3]}t.readUInt32BE=m;function L(E,d,P){E[P+3]=d,d=d>>>8,E[P+2]=d,d=d>>>8,E[P+1]=d,d=d>>>8,E[P]=d}t.writeUInt32BE=L;function B(E,d){return E[d+0]<<0>>>0|E[d+1]<<8>>>0|E[d+2]<<16>>>0|E[d+3]<<24>>>0}t.readUInt32LE=B;function b(E,d,P){E[P+0]=d&255,d=d>>>8,E[P+1]=d&255,d=d>>>8,E[P+2]=d&255,d=d>>>8,E[P+3]=d&255}t.writeUInt32LE=b;function R(E,d){return E[d]}t.readUInt8=R;function f(E,d,P){E[P]=d}t.writeUInt8=f;function r(E){return M.consumeReadable(E,d=>v.concat(d))}t.readableToBuffer=r;function s(E){return M.toReadable(E)}t.bufferToReadable=s;function l(E){return M.consumeStream(E,d=>v.concat(d))}t.streamToBuffer=l;async function n(E){return E.ended?v.concat(E.buffer):v.concat([...E.buffer,await l(E.stream)])}t.bufferedStreamToBuffer=n;function a(E){return M.toStream(E,d=>v.concat(d))}t.bufferToStream=a;function i(E){return M.transform(E,{data:d=>typeof d=="string"?v.fromString(d):v.wrap(d)},d=>v.concat(d))}t.streamToBufferReadableStream=i;function o(E){return M.newWriteableStream(d=>v.concat(d),E)}t.newWriteableBufferStream=o;function c(E,d){return M.prefixedReadable(E,d,P=>v.concat(P))}t.prefixedBufferReadable=c;function p(E,d){return M.prefixedStream(E,d,P=>v.concat(P))}t.prefixedBufferStream=p;function N(E){let d=0,P=0,z=0;const j=new Uint8Array(Math.floor(E.length/4*3)),H=Y=>{switch(P){case 3:j[z++]=d|Y,P=0;break;case 2:j[z++]=d|Y>>>2,d=Y<<6,P=3;break;case 1:j[z++]=d|Y>>>4,d=Y<<4,P=2;break;default:d=Y<<2,P=1}};for(let Y=0;Y<E.length;Y++){const Z=E.charCodeAt(Y);if(Z>=65&&Z<=90)H(Z-65);else if(Z>=97&&Z<=122)H(Z-97+26);else if(Z>=48&&Z<=57)H(Z-48+52);else if(Z===43||Z===45)H(62);else if(Z===47||Z===95)H(63);else{if(Z===61)break;throw new SyntaxError(`Unexpected base64 character ${E[Y]}`)}}const Q=z;for(;P>0;)H(0);return v.wrap(j).slice(0,Q)}t.decodeBase64=N;const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function C({buffer:E},d=!0,P=!1){const z=P?g:k;let j="";const H=E.byteLength%3;let Q=0;for(;Q<E.byteLength-H;Q+=3){const Y=E[Q+0],Z=E[Q+1],re=E[Q+2];j+=z[Y>>>2],j+=z[(Y<<4|Z>>>4)&63],j+=z[(Z<<2|re>>>6)&63],j+=z[re&63]}if(H===1){const Y=E[Q+0];j+=z[Y>>>2],j+=z[Y<<4&63],d&&(j+="==")}else if(H===2){const Y=E[Q+0],Z=E[Q+1];j+=z[Y>>>2],j+=z[(Y<<4|Z>>>4)&63],j+=z[Z<<2&63],d&&(j+="=")}return j}t.encodeBase64=C}),define(te[15],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicrotaskDelay=void 0,t.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(te[16],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countEOL=t.StringEOL=void 0;var M;(function(D){D[D.Unknown=0]="Unknown",D[D.Invalid=3]="Invalid",D[D.LF=1]="LF",D[D.CRLF=2]="CRLF"})(M=t.StringEOL||(t.StringEOL={}));function q(D){let w=0,v=0,F=0,U=0;for(let m=0,L=D.length;m<L;m++){const B=D.charCodeAt(m);B===13?(w===0&&(v=m),w++,m+1<L&&D.charCodeAt(m+1)===10?(U|=2,m++):U|=3,F=m+1):B===10&&(U|=1,w===0&&(v=m),w++,F=m+1)}return w===0&&(v=D.length),[w,v,D.length-F,U]}t.countEOL=q}),define(te[17],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recomputeTreeMetadata=t.updateTreeMetadata=t.fixInsert=t.rbDelete=t.rightRotate=t.leftRotate=t.righttest=t.leftest=t.SENTINEL=t.NodeColor=t.TreeNode=void 0;class M{constructor(s,l){this.piece=s,this.color=l,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return D(this.right);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}prev(){if(this.left!==t.SENTINEL)return w(this.left);let s=this;for(;s.parent!==t.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===t.SENTINEL?t.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}t.TreeNode=M;var q;(function(r){r[r.Black=0]="Black",r[r.Red=1]="Red"})(q=t.NodeColor||(t.NodeColor={})),t.SENTINEL=new M(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0;function D(r){for(;r.left!==t.SENTINEL;)r=r.left;return r}t.leftest=D;function w(r){for(;r.right!==t.SENTINEL;)r=r.right;return r}t.righttest=w;function v(r){return r===t.SENTINEL?0:r.size_left+r.piece.length+v(r.right)}function F(r){return r===t.SENTINEL?0:r.lf_left+r.piece.lineFeedCnt+F(r.right)}function U(){t.SENTINEL.parent=t.SENTINEL}function m(r,s){const l=s.right;l.size_left+=s.size_left+(s.piece?s.piece.length:0),l.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=l.left,l.left!==t.SENTINEL&&(l.left.parent=s),l.parent=s.parent,s.parent===t.SENTINEL?r.root=l:s.parent.left===s?s.parent.left=l:s.parent.right=l,l.left=s,s.parent=l}t.leftRotate=m;function L(r,s){const l=s.left;s.left=l.right,l.right!==t.SENTINEL&&(l.right.parent=s),l.parent=s.parent,s.size_left-=l.size_left+(l.piece?l.piece.length:0),s.lf_left-=l.lf_left+(l.piece?l.piece.lineFeedCnt:0),s.parent===t.SENTINEL?r.root=l:s===s.parent.right?s.parent.right=l:s.parent.left=l,l.right=s,s.parent=l}t.rightRotate=L;function B(r,s){let l,n;if(s.left===t.SENTINEL?(n=s,l=n.right):s.right===t.SENTINEL?(n=s,l=n.left):(n=D(s.right),l=n.right),n===r.root){r.root=l,l.color=0,s.detach(),U(),r.root.parent=t.SENTINEL;return}const a=n.color===1;if(n===n.parent.left?n.parent.left=l:n.parent.right=l,n===s?(l.parent=n.parent,f(r,l)):(n.parent===s?l.parent=n:l.parent=n.parent,f(r,l),n.left=s.left,n.right=s.right,n.parent=s.parent,n.color=s.color,s===r.root?r.root=n:s===s.parent.left?s.parent.left=n:s.parent.right=n,n.left!==t.SENTINEL&&(n.left.parent=n),n.right!==t.SENTINEL&&(n.right.parent=n),n.size_left=s.size_left,n.lf_left=s.lf_left,f(r,n)),s.detach(),l.parent.left===l){const o=v(l),c=F(l);if(o!==l.parent.size_left||c!==l.parent.lf_left){const p=o-l.parent.size_left,N=c-l.parent.lf_left;l.parent.size_left=o,l.parent.lf_left=c,R(r,l.parent,p,N)}}if(f(r,l.parent),a){U();return}let i;for(;l!==r.root&&l.color===0;)l===l.parent.left?(i=l.parent.right,i.color===1&&(i.color=0,l.parent.color=1,m(r,l.parent),i=l.parent.right),i.left.color===0&&i.right.color===0?(i.color=1,l=l.parent):(i.right.color===0&&(i.left.color=0,i.color=1,L(r,i),i=l.parent.right),i.color=l.parent.color,l.parent.color=0,i.right.color=0,m(r,l.parent),l=r.root)):(i=l.parent.left,i.color===1&&(i.color=0,l.parent.color=1,L(r,l.parent),i=l.parent.left),i.left.color===0&&i.right.color===0?(i.color=1,l=l.parent):(i.left.color===0&&(i.right.color=0,i.color=1,m(r,i),i=l.parent.left),i.color=l.parent.color,l.parent.color=0,i.left.color=0,L(r,l.parent),l=r.root));l.color=0,U()}t.rbDelete=B;function b(r,s){for(f(r,s);s!==r.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const l=s.parent.parent.right;l.color===1?(s.parent.color=0,l.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,m(r,s)),s.parent.color=0,s.parent.parent.color=1,L(r,s.parent.parent))}else{const l=s.parent.parent.left;l.color===1?(s.parent.color=0,l.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,L(r,s)),s.parent.color=0,s.parent.parent.color=1,m(r,s.parent.parent))}r.root.color=0}t.fixInsert=b;function R(r,s,l,n){for(;s!==r.root&&s!==t.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=l,s.parent.lf_left+=n),s=s.parent}t.updateTreeMetadata=R;function f(r,s){let l=0,n=0;if(s!==r.root){for(;s!==r.root&&s===s.parent.right;)s=s.parent;if(s!==r.root)for(s=s.parent,l=v(s.left)-s.size_left,n=F(s.left)-s.lf_left,s.size_left+=l,s.lf_left+=n;s!==r.root&&(l!==0||n!==0);)s.parent.left===s&&(s.parent.size_left+=l,s.parent.lf_left+=n),s=s.parent}}t.recomputeTreeMetadata=f}),define(te[18],ne([0,1,4]),function(ee,t,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMimeType=t.getExtensionForMimeType=t.getMediaMime=t.getMediaOrTextMime=t.Mimes=void 0,t.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const q={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},D={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function w(L){const B=(0,M.extname)(L),b=q[B.toLowerCase()];return b!==void 0?b:v(L)}t.getMediaOrTextMime=w;function v(L){const B=(0,M.extname)(L);return D[B.toLowerCase()]}t.getMediaMime=v;function F(L){for(const B in D)if(D[B]===L)return B}t.getExtensionForMimeType=F;const U=/^(.+)\/(.+?)(;.+)?$/;function m(L,B){const b=U.exec(L);return b?`${b[1].toLowerCase()}/${b[2].toLowerCase()}${b[3]??""}`:B?void 0:L}t.normalizeMimeType=m}),define(te[8],ne([0,1,4,2,3,32]),function(ee,t,M,q,D,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function v(g){return g===47||g===92}t.isPathSeparator=v;function F(g){return g.replace(/[\\/]/g,M.posix.sep)}t.toSlashes=F;function U(g){return g.indexOf("/")===-1&&(g=F(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}t.toPosixPath=U;function m(g,C=M.posix.sep){if(!g)return"";const E=g.length,d=g.charCodeAt(0);if(v(d)){if(v(g.charCodeAt(1))&&!v(g.charCodeAt(2))){let z=3;const j=z;for(;z<E&&!v(g.charCodeAt(z));z++);if(j!==z&&!v(g.charCodeAt(z+1))){for(z+=1;z<E;z++)if(v(g.charCodeAt(z)))return g.slice(0,z+1).replace(/[\\/]/g,C)}}return C}else if(l(d)&&g.charCodeAt(1)===58)return v(g.charCodeAt(2))?g.slice(0,2)+C:g.slice(0,2);let P=g.indexOf("://");if(P!==-1){for(P+=3;P<E;P++)if(v(g.charCodeAt(P)))return g.slice(0,P+1)}return""}t.getRoot=m;function L(g){if(!q.isWindows||!g||g.length<5)return!1;let C=g.charCodeAt(0);if(C!==92||(C=g.charCodeAt(1),C!==92))return!1;let E=2;const d=E;for(;E<g.length&&(C=g.charCodeAt(E),C!==92);E++);return!(d===E||(C=g.charCodeAt(E+1),isNaN(C)||C===92))}t.isUNC=L;const B=/[\\/:\*\?"<>\|]/g,b=/[\\/]/g,R=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function f(g,C=q.isWindows){const E=C?B:b;return!(!g||g.length===0||/^\s+$/.test(g)||(E.lastIndex=0,E.test(g))||C&&R.test(g)||g==="."||g===".."||C&&g[g.length-1]==="."||C&&g.length!==g.trim().length||g.length>255)}t.isValidBasename=f;function r(g,C,E){const d=g===C;return!E||d?d:!g||!C?!1:(0,D.equalsIgnoreCase)(g,C)}t.isEqual=r;function s(g,C,E,d=M.sep){if(g===C)return!0;if(!g||!C||C.length>g.length)return!1;if(E){if(!(0,D.startsWithIgnoreCase)(g,C))return!1;if(C.length===g.length)return!0;let z=C.length;return C.charAt(C.length-1)===d&&z--,g.charAt(z)===d}return C.charAt(C.length-1)!==d&&(C+=d),g.indexOf(C)===0}t.isEqualOrParent=s;function l(g){return g>=65&&g<=90||g>=97&&g<=122}t.isWindowsDriveLetter=l;function n(g,C){return q.isWindows&&g.endsWith(":")&&(g+=M.sep),(0,M.isAbsolute)(g)||(g=(0,M.join)(C,g)),g=(0,M.normalize)(g),q.isWindows?(g=(0,D.rtrim)(g,M.sep),g.endsWith(":")&&(g+=M.sep)):(g=(0,D.rtrim)(g,M.sep),g||(g=M.sep)),g}t.sanitizeFilePath=n;function a(g){const C=(0,M.normalize)(g);return q.isWindows?g.length>3?!1:i(C)&&(g.length===2||C.charCodeAt(2)===92):C===M.posix.sep}t.isRootOrDriveLetter=a;function i(g,C=q.isWindows){return C?l(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}t.hasDriveLetter=i;function o(g){return i(g)?g[0]:void 0}t.getDriveLetter=o;function c(g,C,E){return C.length>g.length?-1:g===C?0:(E&&(g=g.toLowerCase(),C=C.toLowerCase()),g.indexOf(C))}t.indexOfPath=c;function p(g){const C=g.split(":");let E,d,P;for(const z of C){const j=Number(z);(0,w.isNumber)(j)?d===void 0?d=j:P===void 0&&(P=j):E=E?[E,z].join(":"):z}if(!E)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:E,line:d!==void 0?d:void 0,column:P!==void 0?P:d!==void 0?1:void 0}}t.parseLineAndColumnAware=p;const N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function k(g,C,E=8){let d="";for(let z=0;z<E;z++)d+=N.charAt(Math.floor(Math.random()*N.length));let P;return C?P=`${C}-${d}`:P=d,g?(0,M.join)(g,P):P}t.randomPath=k}),define(te[9],ne([0,1,5,2,10]),function(ee,t,M,q,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COI=t.FileAccess=t.nodeModulesAsarUnpackedPath=t.nodeModulesAsarPath=t.nodeModulesPath=t.builtinExtensionsPath=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var w;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(w=t.Schemas||(t.Schemas={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class v{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${w.vscodeRemoteResource}`}setPreferredWebSchema(L){this._preferredWebSchema=L}setDelegate(L){this._delegate=L}setServerRootPath(L){this._remoteResourcesPath=`${L}/${w.vscodeRemoteResource}`}set(L,B,b){this._hosts[L]=B,this._ports[L]=b}setConnectionToken(L,B){this._connectionTokens[L]=B}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(L){if(this._delegate)try{return this._delegate(L)}catch(s){return M.onUnexpectedError(s),L}const B=L.authority;let b=this._hosts[B];b&&b.indexOf(":")!==-1&&b.indexOf("[")===-1&&(b=`[${b}]`);const R=this._ports[B],f=this._connectionTokens[B];let r=`path=${encodeURIComponent(L.path)}`;return typeof f=="string"&&(r+=`&${t.connectionTokenQueryName}=${encodeURIComponent(f)}`),D.URI.from({scheme:q.isWeb?this._preferredWebSchema:w.vscodeRemoteResource,authority:`${b}:${R}`,path:this._remoteResourcesPath,query:r})}}t.RemoteAuthorities=new v,t.builtinExtensionsPath="vs/../../extensions",t.nodeModulesPath="vs/../../node_modules",t.nodeModulesAsarPath="vs/../../node_modules.asar",t.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class F{asBrowserUri(L){const B=this.toUri(L,ee);return this.uriToBrowserUri(B)}uriToBrowserUri(L){return L.scheme===w.vscodeRemote?t.RemoteAuthorities.rewrite(L):L.scheme===w.file&&(q.isNative||q.isWebWorker&&q.globals.origin===`${w.vscodeFileResource}://${F.FALLBACK_AUTHORITY}`)?L.with({scheme:w.vscodeFileResource,authority:L.authority||F.FALLBACK_AUTHORITY,query:null,fragment:null}):L}asFileUri(L){const B=this.toUri(L,ee);return this.uriToFileUri(B)}uriToFileUri(L){return L.scheme===w.vscodeFileResource?L.with({scheme:w.file,authority:L.authority!==F.FALLBACK_AUTHORITY?L.authority:null,query:null,fragment:null}):L}toUri(L,B){return D.URI.isUri(L)?L:D.URI.parse(B.toUrl(L))}}F.FALLBACK_AUTHORITY="vscode-app",t.FileAccess=new F;var U;(function(m){const L=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(L.get("3"));const B="vscode-coi";function b(f){let r;typeof f=="string"?r=new URL(f).searchParams:f instanceof URL?r=f.searchParams:D.URI.isUri(f)&&(r=new URL(f.toString(!0)).searchParams);const s=r?.get(B);if(!!s)return L.get(s)}m.getHeadersFromQuery=b;function R(f,r,s){if(!globalThis.crossOriginIsolated)return;const l=r&&s?"3":s?"2":"1";f instanceof URLSearchParams?f.set(B,l):f[B]=l}m.addSearchParam=R})(U=t.COI||(t.COI={}))}),define(te[19],ne([0,1,8,9,4,2,3,10]),function(ee,t,M,q,D,w,v,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function U(R){return(0,F.uriToFsPath)(R,!0)}t.originalFSPath=U;class m{constructor(f){this._ignorePathCasing=f}compare(f,r,s=!1){return f===r?0:(0,v.compare)(this.getComparisonKey(f,s),this.getComparisonKey(r,s))}isEqual(f,r,s=!1){return f===r?!0:!f||!r?!1:this.getComparisonKey(f,s)===this.getComparisonKey(r,s)}getComparisonKey(f,r=!1){return f.with({path:this._ignorePathCasing(f)?f.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(f){return this._ignorePathCasing(f)}isEqualOrParent(f,r,s=!1){if(f.scheme===r.scheme){if(f.scheme===q.Schemas.file)return M.isEqualOrParent(U(f),U(r),this._ignorePathCasing(f))&&f.query===r.query&&(s||f.fragment===r.fragment);if((0,t.isEqualAuthority)(f.authority,r.authority))return M.isEqualOrParent(f.path,r.path,this._ignorePathCasing(f),"/")&&f.query===r.query&&(s||f.fragment===r.fragment)}return!1}joinPath(f,...r){return F.URI.joinPath(f,...r)}basenameOrAuthority(f){return(0,t.basename)(f)||f.authority}basename(f){return D.posix.basename(f.path)}extname(f){return D.posix.extname(f.path)}dirname(f){if(f.path.length===0)return f;let r;return f.scheme===q.Schemas.file?r=F.URI.file(D.dirname(U(f))).path:(r=D.posix.dirname(f.path),f.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${f.toString})) resulted in a relative path`),r="/")),f.with({path:r})}normalizePath(f){if(!f.path.length)return f;let r;return f.scheme===q.Schemas.file?r=F.URI.file(D.normalize(U(f))).path:r=D.posix.normalize(f.path),f.with({path:r})}relativePath(f,r){if(f.scheme!==r.scheme||!(0,t.isEqualAuthority)(f.authority,r.authority))return;if(f.scheme===q.Schemas.file){const n=D.relative(U(f),U(r));return w.isWindows?M.toSlashes(n):n}let s=f.path||"/";const l=r.path||"/";if(this._ignorePathCasing(f)){let n=0;for(const a=Math.min(s.length,l.length);n<a&&!(s.charCodeAt(n)!==l.charCodeAt(n)&&s.charAt(n).toLowerCase()!==l.charAt(n).toLowerCase());n++);s=l.substr(0,n)+s.substr(n)}return D.posix.relative(s,l)}resolvePath(f,r){if(f.scheme===q.Schemas.file){const s=F.URI.file(D.resolve(U(f),r));return f.with({authority:s.authority,path:s.path})}return r=M.toPosixPath(r),f.with({path:D.posix.resolve(f.path,r)})}isAbsolutePath(f){return!!f.path&&f.path[0]==="/"}isEqualAuthority(f,r){return f===r||f!==void 0&&r!==void 0&&(0,v.equalsIgnoreCase)(f,r)}hasTrailingPathSeparator(f,r=D.sep){if(f.scheme===q.Schemas.file){const s=U(f);return s.length>M.getRoot(s).length&&s[s.length-1]===r}else{const s=f.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(f.fsPath)}}removeTrailingPathSeparator(f,r=D.sep){return(0,t.hasTrailingPathSeparator)(f,r)?f.with({path:f.path.substr(0,f.path.length-1)}):f}addTrailingPathSeparator(f,r=D.sep){let s=!1;if(f.scheme===q.Schemas.file){const l=U(f);s=l!==void 0&&l.length===M.getRoot(l).length&&l[l.length-1]===r}else{r="/";const l=f.path;s=l.length===1&&l.charCodeAt(l.length-1)===47}return!s&&!(0,t.hasTrailingPathSeparator)(f,r)?f.with({path:f.path+"/"}):f}}t.ExtUri=m,t.extUri=new m(()=>!1),t.extUriBiasedIgnorePathCase=new m(R=>R.scheme===q.Schemas.file?!w.isLinux:!0),t.extUriIgnorePathCase=new m(R=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function L(R,f){const r=[];for(let s=0;s<R.length;s++){const l=f(R[s]);R.some((n,a)=>a===s?!1:(0,t.isEqualOrParent)(l,f(n)))||r.push(R[s])}return r}t.distinctParents=L;var B;(function(R){R.META_DATA_LABEL="label",R.META_DATA_DESCRIPTION="description",R.META_DATA_SIZE="size",R.META_DATA_MIME="mime";function f(r){const s=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(a=>{const[i,o]=a.split(":");i&&o&&s.set(i,o)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&s.set(R.META_DATA_MIME,n),s}R.parseMetaData=f})(B=t.DataUri||(t.DataUri={}));function b(R,f,r){if(f){let s=R.path;return s&&s[0]!==D.posix.sep&&(s=D.posix.sep+s),R.with({scheme:r,authority:f,path:s})}return R.with({scheme:r})}t.toLocalResource=b}),define(te[20],ne([0,1,33,5,21,7,19,2,15]),function(ee,t,M,q,D,w,v,F,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function m(I){return!!I&&typeof I.then=="function"}t.isThenable=m;function L(I){const h=new M.CancellationTokenSource,y=I(h.token),T=new Promise(($,G)=>{const J=h.token.onCancellationRequested(()=>{J.dispose(),h.dispose(),G(new q.CancellationError)});Promise.resolve(y).then(ie=>{J.dispose(),h.dispose(),$(ie)},ie=>{J.dispose(),h.dispose(),G(ie)})});return new class{cancel(){h.cancel()}then($,G){return T.then($,G)}catch($){return this.then(void 0,$)}finally($){return T.finally($)}}}t.createCancelablePromise=L;function B(I,h,y){return new Promise((T,$)=>{const G=h.onCancellationRequested(()=>{G.dispose(),T(y)});I.then(T,$).finally(()=>G.dispose())})}t.raceCancellation=B;function b(I,h){return new Promise((y,T)=>{const $=h.onCancellationRequested(()=>{$.dispose(),T(new q.CancellationError)});I.then(y,T).finally(()=>$.dispose())})}t.raceCancellationError=b;async function R(I){let h=-1;const y=I.map(($,G)=>$.then(J=>(h=G,J))),T=await Promise.race(y);return I.forEach(($,G)=>{G!==h&&$.cancel()}),T}t.raceCancellablePromises=R;function f(I,h,y){let T;const $=setTimeout(()=>{T?.(void 0),y?.()},h);return Promise.race([I.finally(()=>clearTimeout($)),new Promise(G=>T=G)])}t.raceTimeout=f;function r(I){return new Promise((h,y)=>{const T=I();m(T)?T.then(h,y):h(T)})}t.asPromise=r;class s{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(h){if(this.activePromise){if(this.queuedPromiseFactory=h,!this.queuedPromise){const y=()=>{this.queuedPromise=null;const T=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,T};this.queuedPromise=new Promise(T=>{this.activePromise.then(y,y).then(T)})}return new Promise((y,T)=>{this.queuedPromise.then(y,T)})}return this.activePromise=h(),new Promise((y,T)=>{this.activePromise.then($=>{this.activePromise=null,y($)},$=>{this.activePromise=null,T($)})})}}t.Throttler=s;class l{constructor(){this.current=Promise.resolve(null)}queue(h){return this.current=this.current.then(()=>h(),()=>h())}}t.Sequencer=l;class n{constructor(){this.promiseMap=new Map}queue(h,y){const $=(this.promiseMap.get(h)??Promise.resolve()).catch(()=>{}).then(y).finally(()=>{this.promiseMap.get(h)===$&&this.promiseMap.delete(h)});return this.promiseMap.set(h,$),$}}t.SequencerByKey=n;const a=(I,h)=>{let y=!0;const T=setTimeout(()=>{y=!1,h()},I);return{isTriggered:()=>y,dispose:()=>{clearTimeout(T),y=!1}}},i=I=>{let h=!0;return queueMicrotask(()=>{h&&(h=!1,I())}),{isTriggered:()=>h,dispose:()=>{h=!1}}};class o{constructor(h){this.defaultDelay=h,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(h,y=this.defaultDelay){this.task=h,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(($,G)=>{this.doResolve=$,this.doReject=G}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const $=this.task;return this.task=null,$()}}));const T=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=y===U.MicrotaskDelay?i(T):a(y,T),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new q.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}t.Delayer=o;class c{constructor(h){this.delayer=new o(h),this.throttler=new s}trigger(h,y){return this.delayer.trigger(()=>this.throttler.queue(h),y)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=c;class p{constructor(){this._isOpen=!1,this._promise=new Promise((h,y)=>{this._completePromise=h})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=p;class N extends p{constructor(h){super(),this._timeout=setTimeout(()=>this.open(),h)}open(){clearTimeout(this._timeout),super.open()}}t.AutoOpenBarrier=N;function k(I,h){return h?new Promise((y,T)=>{const $=setTimeout(()=>{G.dispose(),y()},I),G=h.onCancellationRequested(()=>{clearTimeout($),G.dispose(),T(new q.CancellationError)})}):L(y=>k(I,y))}t.timeout=k;function g(I,h=0){const y=setTimeout(I,h);return(0,w.toDisposable)(()=>clearTimeout(y))}t.disposableTimeout=g;function C(I){const h=[];let y=0;const T=I.length;function $(){return y<T?I[y++]():null}function G(J){J!=null&&h.push(J);const ie=$();return ie?ie.then(G):Promise.resolve(h)}return Promise.resolve(null).then(G)}t.sequence=C;function E(I,h=T=>!!T,y=null){let T=0;const $=I.length,G=()=>{if(T>=$)return Promise.resolve(y);const J=I[T++];return Promise.resolve(J()).then(se=>h(se)?Promise.resolve(se):G())};return G()}t.first=E;function d(I,h=T=>!!T,y=null){if(I.length===0)return Promise.resolve(y);let T=I.length;const $=()=>{T=-1;for(const G of I)G.cancel?.()};return new Promise((G,J)=>{for(const ie of I)ie.then(se=>{--T>=0&&h(se)?($(),G(se)):T===0&&G(y)}).catch(se=>{--T>=0&&($(),J(se))})})}t.firstParallel=d;class P{constructor(h){this._size=0,this.maxDegreeOfParalellism=h,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new D.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(h){return this._size++,new Promise((y,T)=>{this.outstandingPromises.push({factory:h,c:y,e:T}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const h=this.outstandingPromises.shift();this.runningPromises++;const y=h.factory();y.then(h.c,h.e),y.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}t.Limiter=P;class z extends P{constructor(){super(1)}}t.Queue=z;class j{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const h=new A;return this.drainers.add(h),h.p}isDrained(){for(const[,h]of this.queues)if(h.size>0)return!1;return!0}queueFor(h,y=v.extUri){const T=y.getComparisonKey(h);let $=this.queues.get(T);return $||($=new z,D.Event.once($.onDrained)(()=>{$?.dispose(),this.queues.delete(T),this.onDidQueueDrain()}),this.queues.set(T,$)),$}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const h of this.drainers)h.complete();this.drainers.clear()}dispose(){for(const[,h]of this.queues)h.dispose();this.queues.clear(),this.releaseDrainers()}}t.ResourceQueue=j;class H{constructor(h,y){this._token=-1,typeof h=="function"&&typeof y=="number"&&this.setIfNotSet(h,y)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(h,y){this.cancel(),this._token=setTimeout(()=>{this._token=-1,h()},y)}setIfNotSet(h,y){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,h()},y))}}t.TimeoutTimer=H;class Q{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(h,y){this.cancel(),this._token=setInterval(()=>{h()},y)}}t.IntervalTimer=Q;class Y{constructor(h,y){this.timeoutToken=-1,this.runner=h,this.timeout=y,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(h=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,h)}get delay(){return this.timeout}set delay(h){this.timeout=h}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}t.RunOnceScheduler=Y;class Z{constructor(h,y){y%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${y}ms is not a multiple of 1000ms.`),this.runner=h,this.timeout=y,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(h=this.timeout){h%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${h}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(h/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}t.ProcessTimeRunOnceScheduler=Z;class re extends Y{constructor(h,y){super(h,y),this.units=[]}work(h){this.units.push(h),this.isScheduled()||this.schedule()}doRun(){const h=this.units;this.units=[],this.runner?.(h)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=re;class V extends w.Disposable{constructor(h,y){super(),this.options=h,this.handler=y,this.pendingWork=[],this.throttler=this._register(new w.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(h){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+h.length>this.options.maxBufferedWork)return!1}else if(this.pending+h.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}for(const y of h)this.pendingWork.push(y);return this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new Y(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}t.ThrottledWorker=V,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=I=>{(0,F.setTimeout0)(()=>{if(h)return;const y=Date.now()+15;I(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,y-Date.now())}}))});let h=!1;return{dispose(){h||(h=!0)}}}:t.runWhenIdle=(I,h)=>{const y=requestIdleCallback(I,typeof h=="number"?{timeout:h}:void 0);let T=!1;return{dispose(){T||(T=!0,cancelIdleCallback(y))}}}}();class e{constructor(h){this._didRun=!1,this._executor=()=>{try{this._value=h()}catch(y){this._error=y}finally{this._didRun=!0}},this._handle=(0,t.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}t.IdleValue=e;async function u(I,h,y){let T;for(let $=0;$<y;$++)try{return await I()}catch(G){T=G,await k(h)}throw T}t.retry=u;class O{hasPending(h){return this._pending?typeof h=="number"?this._pending.taskId===h:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(h,y,T){return this._pending={taskId:h,cancel:()=>T?.(),promise:y},y.then(()=>this.donePending(h),()=>this.donePending(h)),y}donePending(h){this._pending&&h===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const h=this._next;this._next=void 0,h.run().then(h.promiseResolve,h.promiseReject)}}setNext(h){if(this._next)this._next.run=h;else{let y,T;const $=new Promise((G,J)=>{y=G,T=J});this._next={run:h,promise:$,promiseResolve:y,promiseReject:T}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}t.TaskSequentializer=O;class _{constructor(h,y=()=>Date.now()){this.interval=h,this.nowFn=y,this.lastIncrementTime=0,this.value=0}increment(){const h=this.nowFn();return h-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=h,this.value=0),this.value++,this.value}}t.IntervalCounter=_;class A{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((h,y)=>{this.completeCallback=h,this.errorCallback=y})}complete(h){return new Promise(y=>{this.completeCallback(h),this.resolved=!0,y()})}error(h){return new Promise(y=>{this.errorCallback(h),this.rejected=!0,y()})}cancel(){new Promise(h=>{this.errorCallback(new q.CancellationError),this.rejected=!0,h()})}}t.DeferredPromise=A;var S;(function(I){async function h(T){let $;const G=await Promise.all(T.map(J=>J.then(ie=>ie,ie=>{$||($=ie)})));if(typeof $<"u")throw $;return G}I.settled=h;function y(T){return new Promise(async($,G)=>{try{await T($,G)}catch(J){G(J)}})}I.withAsyncBody=y})(S=t.Promises||(t.Promises={}));var W;(function(I){I[I.Initial=0]="Initial",I[I.DoneOK=1]="DoneOK",I[I.DoneError=2]="DoneError"})(W||(W={}));class x{static fromArray(h){return new x(y=>{y.emitMany(h)})}static fromPromise(h){return new x(async y=>{y.emitMany(await h)})}static fromPromises(h){return new x(async y=>{await Promise.all(h.map(async T=>y.emitOne(await T)))})}static merge(h){return new x(async y=>{await Promise.all(h.map(async T=>{for await(const $ of T)y.emitOne($)}))})}constructor(h){this._state=0,this._results=[],this._error=null,this._onStateChanged=new D.Emitter,queueMicrotask(async()=>{const y={emitOne:T=>this.emitOne(T),emitMany:T=>this.emitMany(T),reject:T=>this.reject(T)};try{await Promise.resolve(h(y)),this.resolve()}catch(T){this.reject(T)}finally{y.emitOne=void 0,y.emitMany=void 0,y.reject=void 0}})}[Symbol.asyncIterator](){let h=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(h<this._results.length)return{done:!1,value:this._results[h++]};if(this._state===1)return{done:!0,value:void 0};await D.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(h,y){return new x(async T=>{for await(const $ of h)T.emitOne(y($))})}map(h){return x.map(this,h)}static filter(h,y){return new x(async T=>{for await(const $ of h)y($)&&T.emitOne($)})}filter(h){return x.filter(this,h)}static coalesce(h){return x.filter(h,y=>!!y)}coalesce(){return x.coalesce(this)}static async toPromise(h){const y=[];for await(const T of h)y.push(T);return y}toPromise(){return x.toPromise(this)}emitOne(h){this._state===0&&(this._results.push(h),this._onStateChanged.fire())}emitMany(h){this._state===0&&(this._results=this._results.concat(h),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(h){this._state===0&&(this._state=2,this._error=h,this._onStateChanged.fire())}}x.EMPTY=x.fromArray([]),t.AsyncIterableObject=x;class K extends x{constructor(h,y){super(y),this._source=h}cancel(){this._source.cancel()}}t.CancelableAsyncIterableObject=K;function X(I){const h=new M.CancellationTokenSource,y=I(h.token);return new K(h,async T=>{const $=h.token.onCancellationRequested(()=>{$.dispose(),h.dispose(),T.reject(new q.CancellationError)});try{for await(const G of y){if(h.token.isCancellationRequested)return;T.emitOne(G)}$.dispose(),h.dispose()}catch(G){$.dispose(),h.dispose(),T.reject(G)}})}t.createCancelableAsyncIterable=X}),define(te[22],ne([0,1,34,20,8,13,4,2,3]),function(ee,t,M,q,D,w,v,F,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function m(){return Object.create(null)}t.getEmptyExpression=m,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const L="[/\\\\]",B="[^/\\\\]",b=/\//g;function R(_,A){switch(_){case 0:return"";case 1:return`${B}*?`;default:return`(?:${L}|${B}+${L}${A?`|${L}${B}+`:""})*?`}}function f(_,A){if(!_)return[];const S=[];let W=!1,x=!1,K="";for(const X of _){switch(X){case A:if(!W&&!x){S.push(K),K="";continue}break;case"{":W=!0;break;case"}":W=!1;break;case"[":x=!0;break;case"]":x=!1;break}K+=X}return K&&S.push(K),S}t.splitGlobAware=f;function r(_){if(!_)return"";let A="";const S=f(_,t.GLOB_SPLIT);if(S.every(W=>W===t.GLOBSTAR))A=".*";else{let W=!1;S.forEach((x,K)=>{if(x===t.GLOBSTAR){if(W)return;A+=R(2,K===S.length-1)}else{let X=!1,I="",h=!1,y="";for(const T of x){if(T!=="}"&&X){I+=T;continue}if(h&&(T!=="]"||!y)){let $;T==="-"?$=T:(T==="^"||T==="!")&&!y?$="^":T===t.GLOB_SPLIT?$="":$=(0,U.escapeRegExpCharacters)(T),y+=$;continue}switch(T){case"{":X=!0;continue;case"[":h=!0;continue;case"}":{A+=`(?:${f(I,",").map(J=>r(J)).join("|")})`,X=!1,I="";break}case"]":{A+="["+y+"]",h=!1,y="";break}case"?":A+=B;continue;case"*":A+=R(1);continue;default:A+=(0,U.escapeRegExpCharacters)(T)}}K<S.length-1&&(S[K+1]!==t.GLOBSTAR||K+2<S.length)&&(A+=L)}W=x===t.GLOBSTAR})}return A}const s=/^\*\*\/\*\.[\w\.-]+$/,l=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,o=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c=new w.LRUCache(1e4),p=function(){return!1},N=function(){return null};function k(_,A){if(!_)return N;let S;typeof _!="string"?S=_.pattern:S=_,S=S.trim();const W=`${S}_${!!A.trimForExclusions}`;let x=c.get(W);if(x)return g(x,_);let K;return s.test(S)?x=E(S.substr(4),S):(K=l.exec(C(S,A)))?x=d(K[1],S):(A.trimForExclusions?a:n).test(S)?x=P(S,A):(K=i.exec(C(S,A)))?x=z(K[1].substr(1),S,!0):(K=o.exec(C(S,A)))?x=z(K[1],S,!1):x=j(S),c.set(W,x),g(x,_)}function g(_,A){if(typeof A=="string")return _;const S=function(W,x){return(0,D.isEqualOrParent)(W,A.base,!F.isLinux)?_((0,U.ltrim)(W.substr(A.base.length),v.sep),x):null};return S.allBasenames=_.allBasenames,S.allPaths=_.allPaths,S.basenames=_.basenames,S.patterns=_.patterns,S}function C(_,A){return A.trimForExclusions&&_.endsWith("/**")?_.substr(0,_.length-2):_}function E(_,A){return function(S,W){return typeof S=="string"&&S.endsWith(_)?A:null}}function d(_,A){const S=`/${_}`,W=`\\${_}`,x=function(X,I){return typeof X!="string"?null:I?I===_?A:null:X===_||X.endsWith(S)||X.endsWith(W)?A:null},K=[_];return x.basenames=K,x.patterns=[A],x.allBasenames=K,x}function P(_,A){const S=u(_.slice(1,-1).split(",").map(I=>k(I,A)).filter(I=>I!==N),_),W=S.length;if(!W)return N;if(W===1)return S[0];const x=function(I,h){for(let y=0,T=S.length;y<T;y++)if(S[y](I,h))return _;return null},K=S.find(I=>!!I.allBasenames);K&&(x.allBasenames=K.allBasenames);const X=S.reduce((I,h)=>h.allPaths?I.concat(h.allPaths):I,[]);return X.length&&(x.allPaths=X),x}function z(_,A,S){const W=v.sep===v.posix.sep,x=W?_:_.replace(b,v.sep),K=v.sep+x,X=v.posix.sep+_;let I;return S?I=function(h,y){return typeof h=="string"&&(h===x||h.endsWith(K)||!W&&(h===_||h.endsWith(X)))?A:null}:I=function(h,y){return typeof h=="string"&&(h===x||!W&&h===_)?A:null},I.allPaths=[(S?"*/":"./")+_],I}function j(_){try{const A=new RegExp(`^${r(_)}$`);return function(S){return A.lastIndex=0,typeof S=="string"&&A.test(S)?_:null}}catch{return N}}function H(_,A,S){return!_||typeof A!="string"?!1:Q(_)(A,void 0,S)}t.match=H;function Q(_,A={}){if(!_)return p;if(typeof _=="string"||Y(_)){const S=k(_,A);if(S===N)return p;const W=function(x,K){return!!S(x,K)};return S.allBasenames&&(W.allBasenames=S.allBasenames),S.allPaths&&(W.allPaths=S.allPaths),W}return V(_,A)}t.parse=Q;function Y(_){const A=_;return A?typeof A.base=="string"&&typeof A.pattern=="string":!1}t.isRelativePattern=Y;function Z(_){return _.allBasenames||[]}t.getBasenameTerms=Z;function re(_){return _.allPaths||[]}t.getPathTerms=re;function V(_,A){const S=u(Object.getOwnPropertyNames(_).map(I=>e(I,_[I],A)).filter(I=>I!==N)),W=S.length;if(!W)return N;if(!S.some(I=>!!I.requiresSiblings)){if(W===1)return S[0];const I=function(T,$){let G;for(let J=0,ie=S.length;J<ie;J++){const se=S[J](T,$);if(typeof se=="string")return se;(0,q.isThenable)(se)&&(G||(G=[]),G.push(se))}return G?(async()=>{for(const J of G){const ie=await J;if(typeof ie=="string")return ie}return null})():null},h=S.find(T=>!!T.allBasenames);h&&(I.allBasenames=h.allBasenames);const y=S.reduce((T,$)=>$.allPaths?T.concat($.allPaths):T,[]);return y.length&&(I.allPaths=y),I}const x=function(I,h,y){let T,$;for(let G=0,J=S.length;G<J;G++){const ie=S[G];ie.requiresSiblings&&y&&(h||(h=(0,v.basename)(I)),T||(T=h.substr(0,h.length-(0,v.extname)(I).length)));const se=ie(I,h,T,y);if(typeof se=="string")return se;(0,q.isThenable)(se)&&($||($=[]),$.push(se))}return $?(async()=>{for(const G of $){const J=await G;if(typeof J=="string")return J}return null})():null},K=S.find(I=>!!I.allBasenames);K&&(x.allBasenames=K.allBasenames);const X=S.reduce((I,h)=>h.allPaths?I.concat(h.allPaths):I,[]);return X.length&&(x.allPaths=X),x}function e(_,A,S){if(A===!1)return N;const W=k(_,S);if(W===N)return N;if(typeof A=="boolean")return W;if(A){const x=A.when;if(typeof x=="string"){const K=(X,I,h,y)=>{if(!y||!W(X,I))return null;const T=x.replace("$(basename)",()=>h),$=y(T);return(0,q.isThenable)($)?$.then(G=>G?_:null):$?_:null};return K.requiresSiblings=!0,K}}return W}function u(_,A){const S=_.filter(I=>!!I.basenames);if(S.length<2)return _;const W=S.reduce((I,h)=>{const y=h.basenames;return y?I.concat(y):I},[]);let x;if(A){x=[];for(let I=0,h=W.length;I<h;I++)x.push(A)}else x=S.reduce((I,h)=>{const y=h.patterns;return y?I.concat(y):I},[]);const K=function(I,h){if(typeof I!="string")return null;if(!h){let T;for(T=I.length;T>0;T--){const $=I.charCodeAt(T-1);if($===47||$===92)break}h=I.substr(T)}const y=W.indexOf(h);return y!==-1?x[y]:null};K.basenames=W,K.patterns=x,K.allBasenames=W;const X=_.filter(I=>!I.basenames);return X.push(K),X}function O(_,A){return(0,M.equals)(_,A,(S,W)=>typeof S=="string"&&typeof W=="string"?S===W:typeof S!="string"&&typeof W!="string"?S.base===W.base&&S.pattern===W.pattern:!1)}t.patternsEquals=O}),define(te[23],ne([0,1,3,2,6]),function(ee,t,M,q,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringBuilder=t.decodeUTF16LE=t.getPlatformTextDecoder=void 0;let w;function v(){return w||(w=new TextDecoder("UTF-16LE")),w}let F;function U(){return F||(F=new TextDecoder("UTF-16BE")),F}let m;function L(){return m||(m=q.isLittleEndian()?v():U()),m}t.getPlatformTextDecoder=L;function B(f,r,s){const l=new Uint16Array(f.buffer,r,s);return s>0&&(l[0]===65279||l[0]===65534)?b(f,r,s):v().decode(l)}t.decodeUTF16LE=B;function b(f,r,s){const l=[];let n=0;for(let a=0;a<s;a++){const i=D.readUInt16LE(f,r);r+=2,l[n++]=String.fromCharCode(i)}return l.join("")}class R{constructor(r){this._capacity=r|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const r=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return L().decode(r)}_flushBuffer(){const r=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[r]:this._completedStrings[this._completedStrings.length]=r}appendCharCode(r){const s=this._capacity-this._bufferLength;s<=1&&(s===0||M.isHighSurrogate(r))&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendASCIICharCode(r){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendString(r){const s=r.length;if(this._bufferLength+s>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=r;return}for(let l=0;l<s;l++)this._buffer[this._bufferLength++]=r.charCodeAt(l)}}t.StringBuilder=R}),define(te[24],ne([0,1,6,23]),function(ee,t,M,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressConsecutiveTextChanges=t.TextChange=void 0;function D(U){return U.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class w{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(m,L,B,b){this.oldPosition=m,this.oldText=L,this.newPosition=B,this.newText=b}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${D(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${D(this.oldText)}")`:`(replace@${this.oldPosition} "${D(this.oldText)}" with "${D(this.newText)}")`}static _writeStringSize(m){return 4+2*m.length}static _writeString(m,L,B){const b=L.length;M.writeUInt32BE(m,b,B),B+=4;for(let R=0;R<b;R++)M.writeUInt16LE(m,L.charCodeAt(R),B),B+=2;return B}static _readString(m,L){const B=M.readUInt32BE(m,L);return L+=4,(0,q.decodeUTF16LE)(m,L,B)}writeSize(){return 4+4+w._writeStringSize(this.oldText)+w._writeStringSize(this.newText)}write(m,L){return M.writeUInt32BE(m,this.oldPosition,L),L+=4,M.writeUInt32BE(m,this.newPosition,L),L+=4,L=w._writeString(m,this.oldText,L),L=w._writeString(m,this.newText,L),L}static read(m,L,B){const b=M.readUInt32BE(m,L);L+=4;const R=M.readUInt32BE(m,L);L+=4;const f=w._readString(m,L);L+=w._writeStringSize(f);const r=w._readString(m,L);return L+=w._writeStringSize(r),B.push(new w(b,f,R,r)),L}}t.TextChange=w;function v(U,m){return U===null||U.length===0?m:new F(U,m).compress()}t.compressConsecutiveTextChanges=v;class F{constructor(m,L){this._prevEdits=m,this._currEdits=L,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let m=0,L=0,B=this._getPrev(m),b=this._getCurr(L);for(;m<this._prevLen||L<this._currLen;){if(B===null){this._acceptCurr(b),b=this._getCurr(++L);continue}if(b===null){this._acceptPrev(B),B=this._getPrev(++m);continue}if(b.oldEnd<=B.newPosition){this._acceptCurr(b),b=this._getCurr(++L);continue}if(B.newEnd<=b.oldPosition){this._acceptPrev(B),B=this._getPrev(++m);continue}if(b.oldPosition<B.newPosition){const[l,n]=F._splitCurr(b,B.newPosition-b.oldPosition);this._acceptCurr(l),b=n;continue}if(B.newPosition<b.oldPosition){const[l,n]=F._splitPrev(B,b.oldPosition-B.newPosition);this._acceptPrev(l),B=n;continue}let r,s;if(b.oldEnd===B.newEnd)r=B,s=b,B=this._getPrev(++m),b=this._getCurr(++L);else if(b.oldEnd<B.newEnd){const[l,n]=F._splitPrev(B,b.oldLength);r=l,s=b,B=n,b=this._getCurr(++L)}else{const[l,n]=F._splitCurr(b,B.newLength);r=B,s=l,B=this._getPrev(++m),b=n}this._result[this._resultLen++]=new w(r.oldPosition,r.oldText,s.newPosition,s.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=s.newLength-s.oldLength}const R=F._merge(this._result);return F._removeNoOps(R)}_acceptCurr(m){this._result[this._resultLen++]=F._rebaseCurr(this._prevDeltaOffset,m),this._currDeltaOffset+=m.newLength-m.oldLength}_getCurr(m){return m<this._currLen?this._currEdits[m]:null}_acceptPrev(m){this._result[this._resultLen++]=F._rebasePrev(this._currDeltaOffset,m),this._prevDeltaOffset+=m.newLength-m.oldLength}_getPrev(m){return m<this._prevLen?this._prevEdits[m]:null}static _rebaseCurr(m,L){return new w(L.oldPosition-m,L.oldText,L.newPosition,L.newText)}static _rebasePrev(m,L){return new w(L.oldPosition,L.oldText,L.newPosition+m,L.newText)}static _splitPrev(m,L){const B=m.newText.substr(0,L),b=m.newText.substr(L);return[new w(m.oldPosition,m.oldText,m.newPosition,B),new w(m.oldEnd,"",m.newPosition+L,b)]}static _splitCurr(m,L){const B=m.oldText.substr(0,L),b=m.oldText.substr(L);return[new w(m.oldPosition,B,m.newPosition,m.newText),new w(m.oldPosition+L,b,m.newEnd,"")]}static _merge(m){if(m.length===0)return m;const L=[];let B=0,b=m[0];for(let R=1;R<m.length;R++){const f=m[R];b.oldEnd===f.oldPosition?b=new w(b.oldPosition,b.oldText+f.oldText,b.newPosition,b.newText+f.newText):(L[B++]=b,b=f)}return L[B++]=b,L}static _removeNoOps(m){if(m.length===0)return m;const L=[];let B=0;for(let b=0;b<m.length;b++){const R=m[b];R.oldText!==R.newText&&(L[B++]=R)}return L}}}),define(te[11],ne([0,1,35,12,25,17,36]),function(ee,t,M,q,D,w,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeBase=t.StringBuffer=t.Piece=t.createLineStarts=t.createLineStartsFast=void 0;const F=65535;function U(l){let n;return l[l.length-1]<65536?n=new Uint16Array(l.length):n=new Uint32Array(l.length),n.set(l,0),n}class m{constructor(n,a,i,o,c){this.lineStarts=n,this.cr=a,this.lf=i,this.crlf=o,this.isBasicASCII=c}}function L(l,n=!0){const a=[0];let i=1;for(let o=0,c=l.length;o<c;o++){const p=l.charCodeAt(o);p===13?o+1<c&&l.charCodeAt(o+1)===10?(a[i++]=o+2,o++):a[i++]=o+1:p===10&&(a[i++]=o+1)}return n?U(a):a}t.createLineStartsFast=L;function B(l,n){l.length=0,l[0]=0;let a=1,i=0,o=0,c=0,p=!0;for(let k=0,g=n.length;k<g;k++){const C=n.charCodeAt(k);C===13?k+1<g&&n.charCodeAt(k+1)===10?(c++,l[a++]=k+2,k++):(i++,l[a++]=k+1):C===10?(o++,l[a++]=k+1):p&&C!==9&&(C<32||C>126)&&(p=!1)}const N=new m(U(l),i,o,c,p);return l.length=0,N}t.createLineStarts=B;class b{constructor(n,a,i,o,c){this.bufferIndex=n,this.start=a,this.end=i,this.lineFeedCnt=o,this.length=c}}t.Piece=b;class R{constructor(n,a){this.buffer=n,this.lineStarts=a}}t.StringBuffer=R;class f{constructor(n,a){this._pieces=[],this._tree=n,this._BOM=a,this._index=0,n.root!==w.SENTINEL&&n.iterate(n.root,i=>(i!==w.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class r{constructor(n){this._limit=n,this._cache=[]}get(n){for(let a=this._cache.length-1;a>=0;a--){const i=this._cache[a];if(i.nodeStartOffset<=n&&i.nodeStartOffset+i.node.piece.length>=n)return i}return null}get2(n){for(let a=this._cache.length-1;a>=0;a--){const i=this._cache[a];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<n&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=n)return i}return null}set(n){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(n)}validate(n){let a=!1;const i=this._cache;for(let o=0;o<i.length;o++){const c=i[o];if(c.node.parent===null||c.nodeStartOffset>=n){i[o]=null,a=!0;continue}}if(a){const o=[];for(const c of i)c!==null&&o.push(c);this._cache=o}}}class s{constructor(n,a,i){this.create(n,a,i)}create(n,a,i){this._buffers=[new R("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=w.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=a,this._EOLLength=a.length,this._EOLNormalized=i;let o=null;for(let c=0,p=n.length;c<p;c++)if(n[c].buffer.length>0){n[c].lineStarts||(n[c].lineStarts=L(n[c].buffer));const N=new b(c+1,{line:0,column:0},{line:n[c].lineStarts.length-1,column:n[c].buffer.length-n[c].lineStarts[n[c].lineStarts.length-1]},n[c].lineStarts.length-1,n[c].buffer.length);this._buffers.push(n[c]),o=this.rbInsertRight(o,N)}this._searchCache=new r(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(n){const a=F,i=a-Math.floor(a/3),o=i*2;let c="",p=0;const N=[];if(this.iterate(this.root,k=>{const g=this.getNodeContent(k),C=g.length;if(p<=i||p+C<o)return c+=g,p+=C,!0;const E=c.replace(/\r\n|\r|\n/g,n);return N.push(new R(E,L(E))),c=g,p=C,!0}),p>0){const k=c.replace(/\r\n|\r|\n/g,n);N.push(new R(k,L(k)))}this.create(N,n,!0)}getEOL(){return this._EOL}setEOL(n){this._EOL=n,this._EOLLength=this._EOL.length,this.normalizeEOL(n)}createSnapshot(n){return new f(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;const a=0;return this.iterate(this.root,o=>{if(o===w.SENTINEL)return!0;const c=this.getNodeContent(o),p=c.length,N=n.nodeAt(a),k=n.nodeAt(a+p),g=n.getValueInRange2(N,k);return c===g})}getOffsetAt(n,a){let i=0,o=this.root;for(;o!==w.SENTINEL;)if(o.left!==w.SENTINEL&&o.lf_left+1>=n)o=o.left;else{if(o.lf_left+o.piece.lineFeedCnt+1>=n)return i+=o.size_left,i+=this.getAccumulatedValue(o,n-o.lf_left-2)+a-1;n-=o.lf_left+o.piece.lineFeedCnt,i+=o.size_left+o.piece.length,o=o.right}return i}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let a=this.root,i=0;const o=n;for(;a!==w.SENTINEL;)if(a.size_left!==0&&a.size_left>=n)a=a.left;else if(a.size_left+a.piece.length>=n){const c=this.getIndexOf(a,n-a.size_left);if(i+=a.lf_left+c.index,c.index===0){const p=this.getOffsetAt(i+1,1),N=o-p;return new M.Position(i+1,N+1)}return new M.Position(i+1,c.remainder+1)}else if(n-=a.size_left+a.piece.length,i+=a.lf_left+a.piece.lineFeedCnt,a.right===w.SENTINEL){const c=this.getOffsetAt(i+1,1),p=o-n-c;return new M.Position(i+1,p+1)}else a=a.right;return new M.Position(1,1)}getValueInRange(n,a){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const i=this.nodeAt2(n.startLineNumber,n.startColumn),o=this.nodeAt2(n.endLineNumber,n.endColumn),c=this.getValueInRange2(i,o);return a?a!==this._EOL||!this._EOLNormalized?c.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this._EOLNormalized?c:c.replace(/\r\n|\r|\n/g,a):c}getValueInRange2(n,a){if(n.node===a.node){const N=n.node,k=this._buffers[N.piece.bufferIndex].buffer,g=this.offsetInBuffer(N.piece.bufferIndex,N.piece.start);return k.substring(g+n.remainder,g+a.remainder)}let i=n.node;const o=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let p=o.substring(c+n.remainder,c+i.piece.length);for(i=i.next();i!==w.SENTINEL;){const N=this._buffers[i.piece.bufferIndex].buffer,k=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===a.node){p+=N.substring(k,k+a.remainder);break}else p+=N.substr(k,i.piece.length);i=i.next()}return p}getLinesContent(){const n=[];let a=0,i="",o=!1;return this.iterate(this.root,c=>{if(c===w.SENTINEL)return!0;const p=c.piece;let N=p.length;if(N===0)return!0;const k=this._buffers[p.bufferIndex].buffer,g=this._buffers[p.bufferIndex].lineStarts,C=p.start.line,E=p.end.line;let d=g[C]+p.start.column;if(o&&(k.charCodeAt(d)===10&&(d++,N--),n[a++]=i,i="",o=!1,N===0))return!0;if(C===E)return!this._EOLNormalized&&k.charCodeAt(d+N-1)===13?(o=!0,i+=k.substr(d,N-1)):i+=k.substr(d,N),!0;i+=this._EOLNormalized?k.substring(d,Math.max(d,g[C+1]-this._EOLLength)):k.substring(d,g[C+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;for(let P=C+1;P<E;P++)i=this._EOLNormalized?k.substring(g[P],g[P+1]-this._EOLLength):k.substring(g[P],g[P+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;return!this._EOLNormalized&&k.charCodeAt(g[E]+p.end.column-1)===13?(o=!0,p.end.column===0?a--:i=k.substr(g[E],p.end.column-1)):i=k.substr(g[E],p.end.column),!0}),o&&(n[a++]=i,i=""),n[a++]=i,n}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(n){return this._lastVisitedLine.lineNumber===n?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=n,n===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(n):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(n,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(n){if(n.remainder===n.node.piece.length){const a=n.node.next();if(!a)return 0;const i=this._buffers[a.piece.bufferIndex],o=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return i.buffer.charCodeAt(o)}else{const a=this._buffers[n.node.piece.bufferIndex],o=this.offsetInBuffer(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return a.buffer.charCodeAt(o)}}getLineCharCode(n,a){const i=this.nodeAt2(n,a+1);return this._getCharCode(i)}getLineLength(n){if(n===this.getLineCount()){const a=this.getOffsetAt(n,1);return this.getLength()-a}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this._EOLLength}getCharCode(n){const a=this.nodeAt(n);return this._getCharCode(a)}findMatchesInNode(n,a,i,o,c,p,N,k,g,C,E){const d=this._buffers[n.piece.bufferIndex],P=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),z=this.offsetInBuffer(n.piece.bufferIndex,c),j=this.offsetInBuffer(n.piece.bufferIndex,p);let H;const Q={line:0,column:0};let Y,Z;a._wordSeparators?(Y=d.buffer.substring(z,j),Z=re=>re+z,a.reset(0)):(Y=d.buffer,Z=re=>re,a.reset(z));do if(H=a.next(Y),H){if(Z(H.index)>=j)return C;this.positionInBuffer(n,Z(H.index)-P,Q);const re=this.getLineFeedCnt(n.piece.bufferIndex,c,Q),V=Q.line===c.line?Q.column-c.column+o:Q.column+1,e=V+H[0].length;if(E[C++]=(0,v.createFindMatch)(new q.Range(i+re,V,i+re,e),H,k),Z(H.index)+H[0].length>=j||C>=g)return C}while(H);return C}findMatchesLineByLine(n,a,i,o){const c=[];let p=0;const N=new v.Searcher(a.wordSeparators,a.regex);let k=this.nodeAt2(n.startLineNumber,n.startColumn);if(k===null)return[];const g=this.nodeAt2(n.endLineNumber,n.endColumn);if(g===null)return[];let C=this.positionInBuffer(k.node,k.remainder);const E=this.positionInBuffer(g.node,g.remainder);if(k.node===g.node)return this.findMatchesInNode(k.node,N,n.startLineNumber,n.startColumn,C,E,a,i,o,p,c),c;let d=n.startLineNumber,P=k.node;for(;P!==g.node;){const j=this.getLineFeedCnt(P.piece.bufferIndex,C,P.piece.end);if(j>=1){const Q=this._buffers[P.piece.bufferIndex].lineStarts,Y=this.offsetInBuffer(P.piece.bufferIndex,P.piece.start),Z=Q[C.line+j],re=d===n.startLineNumber?n.startColumn:1;if(p=this.findMatchesInNode(P,N,d,re,C,this.positionInBuffer(P,Z-Y),a,i,o,p,c),p>=o)return c;d+=j}const H=d===n.startLineNumber?n.startColumn-1:0;if(d===n.endLineNumber){const Q=this.getLineContent(d).substring(H,n.endColumn-1);return p=this._findMatchesInLine(a,N,Q,n.endLineNumber,H,p,c,i,o),c}if(p=this._findMatchesInLine(a,N,this.getLineContent(d).substr(H),d,H,p,c,i,o),p>=o)return c;d++,k=this.nodeAt2(d,1),P=k.node,C=this.positionInBuffer(k.node,k.remainder)}if(d===n.endLineNumber){const j=d===n.startLineNumber?n.startColumn-1:0,H=this.getLineContent(d).substring(j,n.endColumn-1);return p=this._findMatchesInLine(a,N,H,n.endLineNumber,j,p,c,i,o),c}const z=d===n.startLineNumber?n.startColumn:1;return p=this.findMatchesInNode(g.node,N,d,z,C,E,a,i,o,p,c),c}_findMatchesInLine(n,a,i,o,c,p,N,k,g){const C=n.wordSeparators;if(!k&&n.simpleSearch){const d=n.simpleSearch,P=d.length,z=i.length;let j=-P;for(;(j=i.indexOf(d,j+P))!==-1;)if((!C||(0,v.isValidMatch)(C,i,z,j,P))&&(N[p++]=new D.FindMatch(new q.Range(o,j+1+c,o,j+1+P+c),null),p>=g))return p;return p}let E;a.reset(0);do if(E=a.next(i),E&&(N[p++]=(0,v.createFindMatch)(new q.Range(o,E.index+1+c,o,E.index+1+E[0].length+c),E,k),p>=g))return p;while(E);return p}insert(n,a,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==w.SENTINEL){const{node:o,remainder:c,nodeStartOffset:p}=this.nodeAt(n),N=o.piece,k=N.bufferIndex,g=this.positionInBuffer(o,c);if(o.piece.bufferIndex===0&&N.end.line===this._lastChangeBufferPos.line&&N.end.column===this._lastChangeBufferPos.column&&p+N.length===n&&a.length<F){this.appendToNode(o,a),this.computeBufferMetadata();return}if(p===n)this.insertContentToNodeLeft(a,o),this._searchCache.validate(n);else if(p+o.piece.length>n){const C=[];let E=new b(N.bufferIndex,g,N.end,this.getLineFeedCnt(N.bufferIndex,g,N.end),this.offsetInBuffer(k,N.end)-this.offsetInBuffer(k,g));if(this.shouldCheckCRLF()&&this.endWithCR(a)&&this.nodeCharCodeAt(o,c)===10){const j={line:E.start.line+1,column:0};E=new b(E.bufferIndex,j,E.end,this.getLineFeedCnt(E.bufferIndex,j,E.end),E.length-1),a+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(a))if(this.nodeCharCodeAt(o,c-1)===13){const j=this.positionInBuffer(o,c-1);this.deleteNodeTail(o,j),a="\r"+a,o.piece.length===0&&C.push(o)}else this.deleteNodeTail(o,g);else this.deleteNodeTail(o,g);const d=this.createNewPieces(a);E.length>0&&this.rbInsertRight(o,E);let P=o;for(let z=0;z<d.length;z++)P=this.rbInsertRight(P,d[z]);this.deleteNodes(C)}else this.insertContentToNodeRight(a,o)}else{const o=this.createNewPieces(a);let c=this.rbInsertLeft(null,o[0]);for(let p=1;p<o.length;p++)c=this.rbInsertRight(c,o[p])}this.computeBufferMetadata()}delete(n,a){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",a<=0||this.root===w.SENTINEL)return;const i=this.nodeAt(n),o=this.nodeAt(n+a),c=i.node,p=o.node;if(c===p){const d=this.positionInBuffer(c,i.remainder),P=this.positionInBuffer(c,o.remainder);if(i.nodeStartOffset===n){if(a===c.piece.length){const z=c.next();(0,w.rbDelete)(this,c),this.validateCRLFWithPrevNode(z),this.computeBufferMetadata();return}this.deleteNodeHead(c,P),this._searchCache.validate(n),this.validateCRLFWithPrevNode(c),this.computeBufferMetadata();return}if(i.nodeStartOffset+c.piece.length===n+a){this.deleteNodeTail(c,d),this.validateCRLFWithNextNode(c),this.computeBufferMetadata();return}this.shrinkNode(c,d,P),this.computeBufferMetadata();return}const N=[],k=this.positionInBuffer(c,i.remainder);this.deleteNodeTail(c,k),this._searchCache.validate(n),c.piece.length===0&&N.push(c);const g=this.positionInBuffer(p,o.remainder);this.deleteNodeHead(p,g),p.piece.length===0&&N.push(p);const C=c.next();for(let d=C;d!==w.SENTINEL&&d!==p;d=d.next())N.push(d);const E=c.piece.length===0?c.prev():c;this.deleteNodes(N),this.validateCRLFWithNextNode(E),this.computeBufferMetadata()}insertContentToNodeLeft(n,a){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(n)&&this.startWithLF(a)){const p=a.piece,N={line:p.start.line+1,column:0},k=new b(p.bufferIndex,N,p.end,this.getLineFeedCnt(p.bufferIndex,N,p.end),p.length-1);a.piece=k,n+=`
`,(0,w.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a)}const o=this.createNewPieces(n);let c=this.rbInsertLeft(a,o[o.length-1]);for(let p=o.length-2;p>=0;p--)c=this.rbInsertLeft(c,o[p]);this.validateCRLFWithPrevNode(c),this.deleteNodes(i)}insertContentToNodeRight(n,a){this.adjustCarriageReturnFromNext(n,a)&&(n+=`
`);const i=this.createNewPieces(n),o=this.rbInsertRight(a,i[0]);let c=o;for(let p=1;p<i.length;p++)c=this.rbInsertRight(c,i[p]);this.validateCRLFWithPrevNode(o)}positionInBuffer(n,a,i){const o=n.piece,c=n.piece.bufferIndex,p=this._buffers[c].lineStarts,k=p[o.start.line]+o.start.column+a;let g=o.start.line,C=o.end.line,E=0,d=0,P=0;for(;g<=C&&(E=g+(C-g)/2|0,P=p[E],E!==C);)if(d=p[E+1],k<P)C=E-1;else if(k>=d)g=E+1;else break;return i?(i.line=E,i.column=k-P,null):{line:E,column:k-P}}getLineFeedCnt(n,a,i){if(i.column===0)return i.line-a.line;const o=this._buffers[n].lineStarts;if(i.line===o.length-1)return i.line-a.line;const c=o[i.line+1],p=o[i.line]+i.column;if(c>p+1)return i.line-a.line;const N=p-1;return this._buffers[n].buffer.charCodeAt(N)===13?i.line-a.line+1:i.line-a.line}offsetInBuffer(n,a){return this._buffers[n].lineStarts[a.line]+a.column}deleteNodes(n){for(let a=0;a<n.length;a++)(0,w.rbDelete)(this,n[a])}createNewPieces(n){if(n.length>F){const C=[];for(;n.length>F;){const d=n.charCodeAt(F-1);let P;d===13||d>=55296&&d<=56319?(P=n.substring(0,F-1),n=n.substring(F-1)):(P=n.substring(0,F),n=n.substring(F));const z=L(P);C.push(new b(this._buffers.length,{line:0,column:0},{line:z.length-1,column:P.length-z[z.length-1]},z.length-1,P.length)),this._buffers.push(new R(P,z))}const E=L(n);return C.push(new b(this._buffers.length,{line:0,column:0},{line:E.length-1,column:n.length-E[E.length-1]},E.length-1,n.length)),this._buffers.push(new R(n,E)),C}let a=this._buffers[0].buffer.length;const i=L(n,!1);let o=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===a&&a!==0&&this.startWithLF(n)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},o=this._lastChangeBufferPos;for(let C=0;C<i.length;C++)i[C]+=a+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+n,a+=1}else{if(a!==0)for(let C=0;C<i.length;C++)i[C]+=a;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=n}const c=this._buffers[0].buffer.length,p=this._buffers[0].lineStarts.length-1,N=c-this._buffers[0].lineStarts[p],k={line:p,column:N},g=new b(0,o,k,this.getLineFeedCnt(0,o,k),c-a);return this._lastChangeBufferPos=k,[g]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(n,a=0){let i=this.root,o="";const c=this._searchCache.get2(n);if(c){i=c.node;const p=this.getAccumulatedValue(i,n-c.nodeStartLineNumber-1),N=this._buffers[i.piece.bufferIndex].buffer,k=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(c.nodeStartLineNumber+i.piece.lineFeedCnt===n)o=N.substring(k+p,k+i.piece.length);else{const g=this.getAccumulatedValue(i,n-c.nodeStartLineNumber);return N.substring(k+p,k+g-a)}}else{let p=0;const N=n;for(;i!==w.SENTINEL;)if(i.left!==w.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const k=this.getAccumulatedValue(i,n-i.lf_left-2),g=this.getAccumulatedValue(i,n-i.lf_left-1),C=this._buffers[i.piece.bufferIndex].buffer,E=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return p+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:p,nodeStartLineNumber:N-(n-1-i.lf_left)}),C.substring(E+k,E+g-a)}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const k=this.getAccumulatedValue(i,n-i.lf_left-2),g=this._buffers[i.piece.bufferIndex].buffer,C=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);o=g.substring(C+k,C+i.piece.length);break}else n-=i.lf_left+i.piece.lineFeedCnt,p+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==w.SENTINEL;){const p=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const N=this.getAccumulatedValue(i,0),k=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=p.substring(k,k+N-a),o}else{const N=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);o+=p.substr(N,i.piece.length)}i=i.next()}return o}computeBufferMetadata(){let n=this.root,a=1,i=0;for(;n!==w.SENTINEL;)a+=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;this._lineCnt=a,this._length=i,this._searchCache.validate(this._length)}getIndexOf(n,a){const i=n.piece,o=this.positionInBuffer(n,a),c=o.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===a){const p=this.getLineFeedCnt(n.piece.bufferIndex,i.start,o);if(p!==c)return{index:p,remainder:0}}return{index:c,remainder:o.column}}getAccumulatedValue(n,a){if(a<0)return 0;const i=n.piece,o=this._buffers[i.bufferIndex].lineStarts,c=i.start.line+a+1;return c>i.end.line?o[i.end.line]+i.end.column-o[i.start.line]-i.start.column:o[c]-o[i.start.line]-i.start.column}deleteNodeTail(n,a){const i=n.piece,o=i.lineFeedCnt,c=this.offsetInBuffer(i.bufferIndex,i.end),p=a,N=this.offsetInBuffer(i.bufferIndex,p),k=this.getLineFeedCnt(i.bufferIndex,i.start,p),g=k-o,C=N-c,E=i.length+C;n.piece=new b(i.bufferIndex,i.start,p,k,E),(0,w.updateTreeMetadata)(this,n,C,g)}deleteNodeHead(n,a){const i=n.piece,o=i.lineFeedCnt,c=this.offsetInBuffer(i.bufferIndex,i.start),p=a,N=this.getLineFeedCnt(i.bufferIndex,p,i.end),k=this.offsetInBuffer(i.bufferIndex,p),g=N-o,C=c-k,E=i.length+C;n.piece=new b(i.bufferIndex,p,i.end,N,E),(0,w.updateTreeMetadata)(this,n,C,g)}shrinkNode(n,a,i){const o=n.piece,c=o.start,p=o.end,N=o.length,k=o.lineFeedCnt,g=a,C=this.getLineFeedCnt(o.bufferIndex,o.start,g),E=this.offsetInBuffer(o.bufferIndex,a)-this.offsetInBuffer(o.bufferIndex,c);n.piece=new b(o.bufferIndex,o.start,g,C,E),(0,w.updateTreeMetadata)(this,n,E-N,C-k);const d=new b(o.bufferIndex,i,p,this.getLineFeedCnt(o.bufferIndex,i,p),this.offsetInBuffer(o.bufferIndex,p)-this.offsetInBuffer(o.bufferIndex,i)),P=this.rbInsertRight(n,d);this.validateCRLFWithPrevNode(P)}appendToNode(n,a){this.adjustCarriageReturnFromNext(a,n)&&(a+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(a)&&this.endWithCR(n),o=this._buffers[0].buffer.length;this._buffers[0].buffer+=a;const c=L(a,!1);for(let P=0;P<c.length;P++)c[P]+=o;if(i){const P=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:o-P}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(c.slice(1));const p=this._buffers[0].lineStarts.length-1,N=this._buffers[0].buffer.length-this._buffers[0].lineStarts[p],k={line:p,column:N},g=n.piece.length+a.length,C=n.piece.lineFeedCnt,E=this.getLineFeedCnt(0,n.piece.start,k),d=E-C;n.piece=new b(n.piece.bufferIndex,n.piece.start,k,E,g),this._lastChangeBufferPos=k,(0,w.updateTreeMetadata)(this,n,a.length,d)}nodeAt(n){let a=this.root;const i=this._searchCache.get(n);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:n-i.nodeStartOffset};let o=0;for(;a!==w.SENTINEL;)if(a.size_left>n)a=a.left;else if(a.size_left+a.piece.length>=n){o+=a.size_left;const c={node:a,remainder:n-a.size_left,nodeStartOffset:o};return this._searchCache.set(c),c}else n-=a.size_left+a.piece.length,o+=a.size_left+a.piece.length,a=a.right;return null}nodeAt2(n,a){let i=this.root,o=0;for(;i!==w.SENTINEL;)if(i.left!==w.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const c=this.getAccumulatedValue(i,n-i.lf_left-2),p=this.getAccumulatedValue(i,n-i.lf_left-1);return o+=i.size_left,{node:i,remainder:Math.min(c+a-1,p),nodeStartOffset:o}}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const c=this.getAccumulatedValue(i,n-i.lf_left-2);if(c+a-1<=i.piece.length)return{node:i,remainder:c+a-1,nodeStartOffset:o};a-=i.piece.length-c;break}else n-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==w.SENTINEL;){if(i.piece.lineFeedCnt>0){const c=this.getAccumulatedValue(i,0),p=this.offsetOfNode(i);return{node:i,remainder:Math.min(a-1,c),nodeStartOffset:p}}else if(i.piece.length>=a-1){const c=this.offsetOfNode(i);return{node:i,remainder:a-1,nodeStartOffset:c}}else a-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(n,a){if(n.piece.lineFeedCnt<1)return-1;const i=this._buffers[n.piece.bufferIndex],o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start)+a;return i.buffer.charCodeAt(o)}offsetOfNode(n){if(!n)return 0;let a=n.size_left;for(;n!==this.root;)n.parent.right===n&&(a+=n.parent.size_left+n.parent.piece.length),n=n.parent;return a}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===w.SENTINEL||n.piece.lineFeedCnt===0)return!1;const a=n.piece,i=this._buffers[a.bufferIndex].lineStarts,o=a.start.line,c=i[o]+a.start.column;return o===i.length-1||i[o+1]>c+1?!1:this._buffers[a.bufferIndex].buffer.charCodeAt(c)===10}endWithCR(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===w.SENTINEL||n.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(n,n.piece.length-1)===13}validateCRLFWithPrevNode(n){if(this.shouldCheckCRLF()&&this.startWithLF(n)){const a=n.prev();this.endWithCR(a)&&this.fixCRLF(a,n)}}validateCRLFWithNextNode(n){if(this.shouldCheckCRLF()&&this.endWithCR(n)){const a=n.next();this.startWithLF(a)&&this.fixCRLF(n,a)}}fixCRLF(n,a){const i=[],o=this._buffers[n.piece.bufferIndex].lineStarts;let c;n.piece.end.column===0?c={line:n.piece.end.line-1,column:o[n.piece.end.line]-o[n.piece.end.line-1]-1}:c={line:n.piece.end.line,column:n.piece.end.column-1};const p=n.piece.length-1,N=n.piece.lineFeedCnt-1;n.piece=new b(n.piece.bufferIndex,n.piece.start,c,N,p),(0,w.updateTreeMetadata)(this,n,-1,-1),n.piece.length===0&&i.push(n);const k={line:a.piece.start.line+1,column:0},g=a.piece.length-1,C=this.getLineFeedCnt(a.piece.bufferIndex,k,a.piece.end);a.piece=new b(a.piece.bufferIndex,k,a.piece.end,C,g),(0,w.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a);const E=this.createNewPieces(`\r
`);this.rbInsertRight(n,E[0]);for(let d=0;d<i.length;d++)(0,w.rbDelete)(this,i[d])}adjustCarriageReturnFromNext(n,a){if(this.shouldCheckCRLF()&&this.endWithCR(n)){const i=a.next();if(this.startWithLF(i)){if(n+=`
`,i.piece.length===1)(0,w.rbDelete)(this,i);else{const o=i.piece,c={line:o.start.line+1,column:0},p=o.length-1,N=this.getLineFeedCnt(o.bufferIndex,c,o.end);i.piece=new b(o.bufferIndex,c,o.end,N,p),(0,w.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(n,a){if(n===w.SENTINEL)return a(w.SENTINEL);const i=this.iterate(n.left,a);return i&&a(n)&&this.iterate(n.right,a)}getNodeContent(n){if(n===w.SENTINEL)return"";const a=this._buffers[n.piece.bufferIndex],i=n.piece,o=this.offsetInBuffer(i.bufferIndex,i.start),c=this.offsetInBuffer(i.bufferIndex,i.end);return a.buffer.substring(o,c)}getPieceContent(n){const a=this._buffers[n.bufferIndex],i=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return a.buffer.substring(i,o)}rbInsertRight(n,a){const i=new w.TreeNode(a,1);if(i.left=w.SENTINEL,i.right=w.SENTINEL,i.parent=w.SENTINEL,i.size_left=0,i.lf_left=0,this.root===w.SENTINEL)this.root=i,i.color=0;else if(n.right===w.SENTINEL)n.right=i,i.parent=n;else{const c=(0,w.leftest)(n.right);c.left=i,i.parent=c}return(0,w.fixInsert)(this,i),i}rbInsertLeft(n,a){const i=new w.TreeNode(a,1);if(i.left=w.SENTINEL,i.right=w.SENTINEL,i.parent=w.SENTINEL,i.size_left=0,i.lf_left=0,this.root===w.SENTINEL)this.root=i,i.color=0;else if(n.left===w.SENTINEL)n.left=i,i.parent=n;else{const o=(0,w.righttest)(n.left);o.right=i,i.parent=o}return(0,w.fixInsert)(this,i),i}getContentOfSubTree(n){let a="";return this.iterate(n,i=>(a+=this.getNodeContent(i),!0)),a}}t.PieceTreeBase=s}),define(te[26],ne([0,1,21,3,12,25,11,16,24,7]),function(ee,t,M,q,D,w,v,F,U,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBuffer=void 0;class L extends m.Disposable{constructor(b,R,f,r,s,l,n){super(),this._onDidChangeContent=this._register(new M.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=R,this._mightContainNonBasicASCII=!l,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new v.PieceTreeBase(b,f,n)}equals(b){return!(b instanceof L)||this._BOM!==b._BOM||this.getEOL()!==b.getEOL()?!1:this._pieceTree.equal(b._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(b){return this._pieceTree.createSnapshot(b?this._BOM:"")}getOffsetAt(b,R){return this._pieceTree.getOffsetAt(b,R)}getPositionAt(b){return this._pieceTree.getPositionAt(b)}getRangeAt(b,R){const f=b+R,r=this.getPositionAt(b),s=this.getPositionAt(f);return new D.Range(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(b,R=0){if(b.isEmpty())return"";const f=this._getEndOfLine(R);return this._pieceTree.getValueInRange(b,f)}getValueLengthInRange(b,R=0){if(b.isEmpty())return 0;if(b.startLineNumber===b.endLineNumber)return b.endColumn-b.startColumn;const f=this.getOffsetAt(b.startLineNumber,b.startColumn),r=this.getOffsetAt(b.endLineNumber,b.endColumn);let s=0;const l=this._getEndOfLine(R),n=this.getEOL();if(l.length!==n.length){const a=l.length-n.length,i=b.endLineNumber-b.startLineNumber;s=a*i}return r-f+s}getCharacterCountInRange(b,R=0){if(this._mightContainNonBasicASCII){let f=0;const r=b.startLineNumber,s=b.endLineNumber;for(let l=r;l<=s;l++){const n=this.getLineContent(l),a=l===r?b.startColumn-1:0,i=l===s?b.endColumn-1:n.length;for(let o=a;o<i;o++)q.isHighSurrogate(n.charCodeAt(o))?(f=f+1,o=o+1):f=f+1}return f+=this._getEndOfLine(R).length*(s-r),f}return this.getValueLengthInRange(b,R)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(b){return this._pieceTree.getLineContent(b)}getLineCharCode(b,R){return this._pieceTree.getLineCharCode(b,R)}getCharCode(b){return this._pieceTree.getCharCode(b)}getLineLength(b){return this._pieceTree.getLineLength(b)}getLineMinColumn(b){return 1}getLineMaxColumn(b){return this.getLineLength(b)+1}getLineFirstNonWhitespaceColumn(b){const R=q.firstNonWhitespaceIndex(this.getLineContent(b));return R===-1?0:R+1}getLineLastNonWhitespaceColumn(b){const R=q.lastNonWhitespaceIndex(this.getLineContent(b));return R===-1?0:R+2}_getEndOfLine(b){switch(b){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(b){this._pieceTree.setEOL(b)}applyEdits(b,R,f){let r=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,l=this._mightContainNonBasicASCII,n=!0,a=[];for(let g=0;g<b.length;g++){const C=b[g];n&&C._isTracked&&(n=!1);const E=C.range;if(C.text){let H=!0;l||(H=!q.isBasicASCII(C.text),l=H),!r&&H&&(r=q.containsRTL(C.text)),!s&&H&&(s=q.containsUnusualLineTerminators(C.text))}let d="",P=0,z=0,j=0;if(C.text){let H;[P,z,j,H]=(0,F.countEOL)(C.text);const Q=this.getEOL();H===0||H===(Q===`\r
`?2:1)?d=C.text:d=C.text.replace(/\r\n|\r|\n/g,Q)}a[g]={sortIndex:g,identifier:C.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:d,eolCount:P,firstLineLength:z,lastLineLength:j,forceMoveMarkers:Boolean(C.forceMoveMarkers),isAutoWhitespaceEdit:C.isAutoWhitespaceEdit||!1}}a.sort(L._sortOpsAscending);let i=!1;for(let g=0,C=a.length-1;g<C;g++){const E=a[g].range.getEndPosition(),d=a[g+1].range.getStartPosition();if(d.isBeforeOrEqual(E)){if(d.isBefore(E))throw new Error("Overlapping ranges are not allowed!");i=!0}}n&&(a=this._reduceOperations(a));const o=f||R?L._getInverseEditRanges(a):[],c=[];if(R)for(let g=0;g<a.length;g++){const C=a[g],E=o[g];if(C.isAutoWhitespaceEdit&&C.range.isEmpty())for(let d=E.startLineNumber;d<=E.endLineNumber;d++){let P="";d===E.startLineNumber&&(P=this.getLineContent(C.range.startLineNumber),q.firstNonWhitespaceIndex(P)!==-1)||c.push({lineNumber:d,oldContent:P})}}let p=null;if(f){let g=0;p=[];for(let C=0;C<a.length;C++){const E=a[C],d=o[C],P=this.getValueInRange(E.range),z=E.rangeOffset+g;g+=E.text.length-P.length,p[C]={sortIndex:E.sortIndex,identifier:E.identifier,range:d,text:P,textChange:new U.TextChange(E.rangeOffset,P,z,E.text)}}i||p.sort((C,E)=>C.sortIndex-E.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=l;const N=this._doApplyEdits(a);let k=null;if(R&&c.length>0){c.sort((g,C)=>C.lineNumber-g.lineNumber),k=[];for(let g=0,C=c.length;g<C;g++){const E=c[g].lineNumber;if(g>0&&c[g-1].lineNumber===E)continue;const d=c[g].oldContent,P=this.getLineContent(E);P.length===0||P===d||q.firstNonWhitespaceIndex(P)!==-1||k.push(E)}}return this._onDidChangeContent.fire(),new w.ApplyEditsResult(p,N,k)}_reduceOperations(b){return b.length<1e3?b:[this._toSingleEditOperation(b)]}_toSingleEditOperation(b){let R=!1;const f=b[0].range,r=b[b.length-1].range,s=new D.Range(f.startLineNumber,f.startColumn,r.endLineNumber,r.endColumn);let l=f.startLineNumber,n=f.startColumn;const a=[];for(let N=0,k=b.length;N<k;N++){const g=b[N],C=g.range;R=R||g.forceMoveMarkers,a.push(this.getValueInRange(new D.Range(l,n,C.startLineNumber,C.startColumn))),g.text.length>0&&a.push(g.text),l=C.endLineNumber,n=C.endColumn}const i=a.join(""),[o,c,p]=(0,F.countEOL)(i);return{sortIndex:0,identifier:b[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:i,eolCount:o,firstLineLength:c,lastLineLength:p,forceMoveMarkers:R,isAutoWhitespaceEdit:!1}}_doApplyEdits(b){b.sort(L._sortOpsDescending);const R=[];for(let f=0;f<b.length;f++){const r=b[f],s=r.range.startLineNumber,l=r.range.startColumn,n=r.range.endLineNumber,a=r.range.endColumn;if(s===n&&l===a&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const i=new D.Range(s,l,n,a);R.push({range:i,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return R}findMatchesLineByLine(b,R,f,r){return this._pieceTree.findMatchesLineByLine(b,R,f,r)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(b,R){const f=b.startLineNumber,r=b.startColumn,[s,l,n]=(0,F.countEOL)(R);let a;if(R.length>0){const i=s+1;i===1?a=new D.Range(f,r,f,r+l):a=new D.Range(f,r,f+i-1,n+1)}else a=new D.Range(f,r,f,r);return a}static _getInverseEditRanges(b){const R=[];let f=0,r=0,s=null;for(let l=0,n=b.length;l<n;l++){const a=b[l];let i,o;s?s.range.endLineNumber===a.range.startLineNumber?(i=f,o=r+(a.range.startColumn-s.range.endColumn)):(i=f+(a.range.startLineNumber-s.range.endLineNumber),o=a.range.startColumn):(i=a.range.startLineNumber,o=a.range.startColumn);let c;if(a.text.length>0){const p=a.eolCount+1;p===1?c=new D.Range(i,o,i,o+a.firstLineLength):c=new D.Range(i,o,i+p-1,a.lastLineLength+1)}else c=new D.Range(i,o,i,o);f=c.endLineNumber,r=c.endColumn,R.push(c),s=a}return R}static _sortOpsAscending(b,R){const f=D.Range.compareRangesUsingEnds(b.range,R.range);return f===0?b.sortIndex-R.sortIndex:f}static _sortOpsDescending(b,R){const f=D.Range.compareRangesUsingEnds(b.range,R.range);return f===0?R.sortIndex-b.sortIndex:-f}}t.PieceTreeTextBuffer=L}),define(te[27],ne([0,1,3,11,26]),function(ee,t,M,q,D){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBufferBuilder=void 0;class w{constructor(U,m,L,B,b,R,f,r,s){this._chunks=U,this._bom=m,this._cr=L,this._lf=B,this._crlf=b,this._containsRTL=R,this._containsUnusualLineTerminators=f,this._isBasicASCII=r,this._normalizeEOL=s}_getEOL(U){const m=this._cr+this._lf+this._crlf,L=this._cr+this._crlf;return m===0?U===1?`
`:`\r
`:L>m/2?`\r
`:`
`}create(U){const m=this._getEOL(U),L=this._chunks;if(this._normalizeEOL&&(m===`\r
`&&(this._cr>0||this._lf>0)||m===`
`&&(this._cr>0||this._crlf>0)))for(let b=0,R=L.length;b<R;b++){const f=L[b].buffer.replace(/\r\n|\r|\n/g,m),r=(0,q.createLineStartsFast)(f);L[b]=new q.StringBuffer(f,r)}const B=new D.PieceTreeTextBuffer(L,this._bom,m,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:B,disposable:B}}getFirstLineText(U){return this._chunks[0].buffer.substr(0,U).split(/\r\n|\r|\n/)[0]}}class v{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(U){if(U.length===0)return;this.chunks.length===0&&M.startsWithUTF8BOM(U)&&(this.BOM=M.UTF8_BOM_CHARACTER,U=U.substr(1));const m=U.charCodeAt(U.length-1);m===13||m>=55296&&m<=56319?(this._acceptChunk1(U.substr(0,U.length-1),!1),this._hasPreviousChar=!0,this._previousChar=m):(this._acceptChunk1(U,!1),this._hasPreviousChar=!1,this._previousChar=m)}_acceptChunk1(U,m){!m&&U.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+U):this._acceptChunk2(U))}_acceptChunk2(U){const m=(0,q.createLineStarts)(this._tmpLineStarts,U);this.chunks.push(new q.StringBuffer(U,m.lineStarts)),this.cr+=m.cr,this.lf+=m.lf,this.crlf+=m.crlf,m.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=M.containsRTL(U)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=M.containsUnusualLineTerminators(U)))}finish(U=!0){return this._finish(),new w(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,U)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const U=this.chunks[this.chunks.length-1];U.buffer+=String.fromCharCode(this._previousChar);const m=(0,q.createLineStartsFast)(U.buffer);U.lineStarts=m,this._previousChar===13&&this.cr++}}}t.PieceTreeTextBufferBuilder=v}),define(te[28],ne([0,1,5]),function(ee,t,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scanner=t.TokenType=void 0;var q;(function(w){w[w.LParen=0]="LParen",w[w.RParen=1]="RParen",w[w.Neg=2]="Neg",w[w.Eq=3]="Eq",w[w.NotEq=4]="NotEq",w[w.Lt=5]="Lt",w[w.LtEq=6]="LtEq",w[w.Gt=7]="Gt",w[w.GtEq=8]="GtEq",w[w.RegexOp=9]="RegexOp",w[w.RegexStr=10]="RegexStr",w[w.True=11]="True",w[w.False=12]="False",w[w.In=13]="In",w[w.Not=14]="Not",w[w.And=15]="And",w[w.Or=16]="Or",w[w.Str=17]="Str",w[w.QuotedStr=18]="QuotedStr",w[w.Error=19]="Error",w[w.EOF=20]="EOF"})(q=t.TokenType||(t.TokenType={}));class D{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errorTokens=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static reportError(v){if(v.type!==19)throw(0,M.illegalArgument)(`expected an error token but got ${JSON.stringify(v)}`);switch(v.lexeme){case"=":return`Unexpected token '${v.lexeme}' at offset ${v.offset}. Did you mean '==' or '=~'?`;case"&":return`Unexpected token '${v.lexeme}' at offset ${v.offset}. Did you mean '&&'?`;case"|":return`Unexpected token '${v.lexeme}' at offset ${v.offset}. Did you mean '||'?`;default:{const F=v.lexeme;return F&&F.length>1&&F.startsWith("'")?`Unexpected token '${v.lexeme}' at offset ${v.offset}. Did you forget to close the string?`:F&&F.length>1&&F.endsWith("'")?`Unexpected token '${v.lexeme}' at offset ${v.offset}. Did you forget to open the string?`:`Unexpected token '${v.lexeme}' at offset ${v.offset}`}}}static getLexeme(v){switch(v.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return"==";case 4:return"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return v.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return v.lexeme;case 18:return v.lexeme;case 19:return v.lexeme;case 20:return"EOF";default:throw(0,M.illegalState)(`unhandled token type: ${JSON.stringify(v)}; have you forgotten to add a case?`)}}get errorTokens(){return this._errorTokens}reset(v){return this._input=v,this._start=0,this._current=0,this._tokens=[],this._errorTokens=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:this._addToken(this._match(61)?4:2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:this._match(61)?this._addToken(3):this._match(126)?this._addToken(9):this._error();break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error();break;case 124:this._match(124)?this._addToken(16):this._error();break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(v){return this._isAtEnd()||this._input.charCodeAt(this._current)!==v?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(v){this._tokens.push({type:v,offset:this._start})}_error(){const v={type:19,offset:this._start,lexeme:this._input.substring(this._start,this._current)};this._errorTokens.push(v),this._tokens.push(v)}_string(){this.stringRe.lastIndex=this._start;const v=this.stringRe.exec(this._input);if(v){this._current=this._start+v[0].length;const F=this._input.substring(this._start,this._current),U=D._keywords.get(F);U?this._addToken(U):this._tokens.push({type:17,lexeme:F,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error();return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let v=this._current,F=!1,U=!1;for(;;){if(v>=this._input.length){this._current=v,this._error();return}const L=this._input.charCodeAt(v);if(F)F=!1;else if(L===47&&!U){v++;break}else L===91?U=!0:L===92?F=!0:L===93&&(U=!1);v++}for(;v<this._input.length&&D._regexFlags.has(this._input.charCodeAt(v));)v++;this._current=v;const m=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:m,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}D._regexFlags=new Set(["i","g","s","m","y","u"].map(w=>w.charCodeAt(0))),D._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),t.Scanner=D}),define(te[29],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var M;(function(v){v.serviceIds=new Map,v.DI_TARGET="$di$target",v.DI_DEPENDENCIES="$di$dependencies";function F(U){return U[v.DI_DEPENDENCIES]||[]}v.getServiceDependencies=F})(M=t._util||(t._util={})),t.IInstantiationService=D("instantiationService");function q(v,F,U){F[M.DI_TARGET]===F?F[M.DI_DEPENDENCIES].push({id:v,index:U}):(F[M.DI_DEPENDENCIES]=[{id:v,index:U}],F[M.DI_TARGET]=F)}function D(v){if(M.serviceIds.has(v))return M.serviceIds.get(v);const F=function(U,m,L){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");q(F,U,L)};return F.toString=()=>v,M.serviceIds.set(v,F),F}t.createDecorator=D;function w(v){return v}t.refineServiceDecorator=w}),define(te[30],ne([0,1,2,3,28,29]),function(ee,t,M,q,D,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implies=t.IContextKeyService=t.RawContextKey=t.ContextKeyNotRegexExpr=t.ContextKeyRegexExpr=t.ContextKeySmallerEqualsExpr=t.ContextKeySmallerExpr=t.ContextKeyGreaterEqualsExpr=t.ContextKeyGreaterExpr=t.ContextKeyNotExpr=t.ContextKeyNotEqualsExpr=t.ContextKeyNotInExpr=t.ContextKeyInExpr=t.ContextKeyEqualsExpr=t.ContextKeyDefinedExpr=t.ContextKeyTrueExpr=t.ContextKeyFalseExpr=t.expressionsAreEqualWithConstantSubstitution=t.Parser=t.ContextKeyExpr=t.ContextKeyExprType=void 0;const v=new Map;v.set("false",!1),v.set("true",!0),v.set("isMac",M.isMacintosh),v.set("isLinux",M.isLinux),v.set("isWindows",M.isWindows),v.set("isWeb",M.isWeb),v.set("isMacNative",M.isMacintosh&&!M.isWeb),v.set("isEdge",M.isEdge),v.set("isFirefox",M.isFirefox),v.set("isChrome",M.isChrome),v.set("isSafari",M.isSafari);const F=Object.prototype.hasOwnProperty;var U;(function(V){V[V.False=0]="False",V[V.True=1]="True",V[V.Defined=2]="Defined",V[V.Not=3]="Not",V[V.Equals=4]="Equals",V[V.NotEquals=5]="NotEquals",V[V.And=6]="And",V[V.Regex=7]="Regex",V[V.NotRegex=8]="NotRegex",V[V.Or=9]="Or",V[V.In=10]="In",V[V.NotIn=11]="NotIn",V[V.Greater=12]="Greater",V[V.GreaterEquals=13]="GreaterEquals",V[V.Smaller=14]="Smaller",V[V.SmallerEquals=15]="SmallerEquals"})(U=t.ContextKeyExprType||(t.ContextKeyExprType={}));class m{static false(){return f.INSTANCE}static true(){return r.INSTANCE}static has(e){return s.create(e)}static equals(e,u){return l.create(e,u)}static notEquals(e,u){return i.create(e,u)}static regex(e,u){return C.create(e,u)}static in(e,u){return n.create(e,u)}static notIn(e,u){return a.create(e,u)}static not(e){return o.create(e)}static and(...e){return P.create(e,null,!0)}static or(...e){return z.create(e,null,!0)}static greater(e,u){return p.create(e,u)}static greaterEquals(e,u){return N.create(e,u)}static smaller(e,u){return k.create(e,u)}static smallerEquals(e,u){return g.create(e,u)}static deserializeOrErrorNew(e){if(!e)return{type:"error",lexingErrors:[],parsingErrors:[]};const u=new B,O=u.parse(e);return O===void 0?{type:"error",lexingErrors:u.lexingErrors.map(_=>D.Scanner.reportError(_)),parsingErrors:u.parsingErrors}:{type:"ok",expr:O}}static deserialize(e){if(!!e)return this._deserializeOrExpression(e)}static _deserializeOrExpression(e){const u=e.split("||");return z.create(u.map(O=>this._deserializeAndExpression(O)),null,!0)}static _deserializeAndExpression(e){const u=e.split("&&");return P.create(u.map(O=>this._deserializeOne(O)),null,!0)}static _deserializeOne(e){if(e=e.trim(),e.indexOf("!=")>=0){const u=e.split("!=");return i.create(u[0].trim(),this._deserializeValue(u[1]))}if(e.indexOf("==")>=0){const u=e.split("==");return l.create(u[0].trim(),this._deserializeValue(u[1]))}if(e.indexOf("=~")>=0){const u=e.split("=~");return C.create(u[0].trim(),this._deserializeRegexValue(u[1]))}if(e.indexOf(" not in ")>=0){const u=e.split(" not in ");return a.create(u[0].trim(),this._deserializeValue(u[1]))}if(e.indexOf(" in ")>=0){const u=e.split(" in ");return n.create(u[0].trim(),this._deserializeValue(u[1]))}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const u=e.split(">=");return N.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const u=e.split(">");return p.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const u=e.split("<=");return g.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const u=e.split("<");return k.create(u[0].trim(),u[1].trim())}return/^\!\s*/.test(e)?o.create(e.substr(1).trim()):s.create(e)}static _deserializeValue(e){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const u=/^'([^']*)'$/.exec(e);return u?u[1].trim():e}static _deserializeRegexValue(e){if((0,q.isFalsyOrWhitespace)(e))return null;const u=e.indexOf("/"),O=e.lastIndexOf("/");if(u===O||u<0)return null;const _=e.slice(u+1,O),A=e[O+1]==="i"?"i":"";try{return new RegExp(_,A)}catch{return null}}}t.ContextKeyExpr=m;class L extends Error{}class B{constructor(){this._scanner=new D.Scanner,this._tokens=[],this._current=0,this._parsingErrors=[]}get lexingErrors(){return this._scanner.errorTokens}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push("Expected an expression but got an empty string");return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const u=this._expr();if(!this._isAtEnd())throw this._errUnexpected(this._peek());return u}catch(u){if(!(u instanceof L)){const O=this._peek();this._parsingErrors.push(`Unexpected error: ${u} for token ${D.Scanner.getLexeme(O)} at offset ${O.offset}.`)}return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const u=this._and();e.push(u)}return e.length===1?e[0]:m.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const u=this._term();e.push(u)}return e.length===1?e[0]:m.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 17:return this._advance(),m.not(e.lexeme);case 11:return this._advance(),m.false();case 12:return this._advance(),m.true();default:throw this._errExpectedButGot("KEY, 'true', or 'false'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),m.true();case 12:return this._advance(),m.false();case 0:{this._advance();const u=this._expr();return this._consume(1,"')'"),u}case 17:{const u=e.lexeme;if(this._advance(),this._matchOne(9)){const _=this._peek();switch(_.type){case 10:case 19:{const A=[_.lexeme];this._advance();let S=this._peek(),W=0;for(let h=0;h<_.lexeme.length;h++)_.lexeme.charCodeAt(h)===40?W++:_.lexeme.charCodeAt(h)===41&&W--;for(;!this._isAtEnd()&&S.type!==15&&S.type!==16;){switch(S.type){case 0:W++;break;case 1:W--;break;case 10:case 18:for(let h=0;h<S.lexeme.length;h++)S.lexeme.charCodeAt(h)===40?W++:_.lexeme.charCodeAt(h)===41&&W--}if(W<0)break;A.push(D.Scanner.getLexeme(S)),this._advance(),S=this._peek()}const x=A.join(""),K=x.lastIndexOf("/"),X=K===x.length-1?void 0:x.substring(K+1),I=new RegExp(x.substring(1,K),X);return m.regex(u,I)}case 18:{const A=_.lexeme;this._advance();let S=null;if(!(0,q.isFalsyOrWhitespace)(A)){const W=A.indexOf("/"),x=A.lastIndexOf("/");if(W!==x&&W>=0){const K=A.slice(W+1,x),X=A[x+1]==="i"?"i":"";try{S=new RegExp(K,X)}catch{}}}if(S===null)throw this._errExpectedButGot("REGEX",_);return C.create(u,S)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,"'in' after 'not'");const _=this._value();return m.notIn(u,_)}switch(this._peek().type){case 3:{this._advance();const _=this._value();switch(_){case"true":return m.has(u);case"false":return m.not(u);default:return m.equals(u,_)}}case 4:{this._advance();const _=this._value();switch(_){case"true":return m.not(u);case"false":return m.has(u);default:return m.notEquals(u,_)}}case 5:return this._advance(),k.create(u,this._value());case 6:return this._advance(),g.create(u,this._value());case 7:return this._advance(),p.create(u,this._value());case 8:return this._advance(),N.create(u,this._value());case 13:return this._advance(),m.in(u,this._value());default:return m.has(u)}}default:throw this._errExpectedButGot("'true', 'false', '(', KEY, KEY '=~' regex, KEY [ ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value ]",this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,u){if(this._check(e))return this._advance();throw this._errExpectedButGot(u,this._peek())}_errExpectedButGot(e,u){return this._error(`Expected ${e} but got '${D.Scanner.getLexeme(u)}' at offset ${u.offset}.`)}_errUnexpected(e){return this._error(`Unexpected '${D.Scanner.getLexeme(e)}' at offset ${e.offset}.`)}_error(e){return this._parsingErrors.push(e),new L}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}}t.Parser=B;function b(V,e){const u=V?V.substituteConstants():void 0,O=e?e.substituteConstants():void 0;return!u&&!O?!0:!u||!O?!1:u.equals(O)}t.expressionsAreEqualWithConstantSubstitution=b;function R(V,e){return V.cmp(e)}class f{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return r.INSTANCE}}f.INSTANCE=new f,t.ContextKeyFalseExpr=f;class r{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return f.INSTANCE}}r.INSTANCE=new r,t.ContextKeyTrueExpr=r;class s{static create(e,u=null){const O=v.get(e);return typeof O=="boolean"?O?r.INSTANCE:f.INSTANCE:new s(e,u)}constructor(e,u){this.key=e,this.negated=u,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:H(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=v.get(this.key);return typeof e=="boolean"?e?r.INSTANCE:f.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=o.create(this.key,this)),this.negated}}t.ContextKeyDefinedExpr=s;class l{static create(e,u,O=null){if(typeof u=="boolean")return u?s.create(e,O):o.create(e,O);const _=v.get(e);return typeof _=="boolean"?u===(_?"true":"false")?r.INSTANCE:f.INSTANCE:new l(e,u,O)}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=v.get(this.key);if(typeof e=="boolean"){const u=e?"true":"false";return this.value===u?r.INSTANCE:f.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=i.create(this.key,this.value,this)),this.negated}}t.ContextKeyEqualsExpr=l;class n{static create(e,u){return new n(e,u)}constructor(e,u){this.key=e,this.valueKey=u,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const u=e.getValue(this.valueKey),O=e.getValue(this.key);return Array.isArray(u)?u.includes(O):typeof O=="string"&&typeof u=="object"&&u!==null?F.call(u,O):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=a.create(this.key,this.valueKey)),this.negated}}t.ContextKeyInExpr=n;class a{static create(e,u){return new a(e,u)}constructor(e,u){this.key=e,this.valueKey=u,this.type=11,this._negated=n.create(e,u)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}t.ContextKeyNotInExpr=a;class i{static create(e,u,O=null){if(typeof u=="boolean")return u?o.create(e,O):s.create(e,O);const _=v.get(e);return typeof _=="boolean"?u===(_?"true":"false")?f.INSTANCE:r.INSTANCE:new i(e,u,O)}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=v.get(this.key);if(typeof e=="boolean"){const u=e?"true":"false";return this.value===u?f.INSTANCE:r.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=l.create(this.key,this.value,this)),this.negated}}t.ContextKeyNotEqualsExpr=i;class o{static create(e,u=null){const O=v.get(e);return typeof O=="boolean"?O?f.INSTANCE:r.INSTANCE:new o(e,u)}constructor(e,u){this.key=e,this.negated=u,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:H(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=v.get(this.key);return typeof e=="boolean"?e?f.INSTANCE:r.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}t.ContextKeyNotExpr=o;function c(V,e){if(typeof V=="string"){const u=parseFloat(V);isNaN(u)||(V=u)}return typeof V=="string"||typeof V=="number"?e(V):f.INSTANCE}class p{static create(e,u,O=null){return c(u,_=>new p(e,_,O))}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=g.create(this.key,this.value,this)),this.negated}}t.ContextKeyGreaterExpr=p;class N{static create(e,u,O=null){return c(u,_=>new N(e,_,O))}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=k.create(this.key,this.value,this)),this.negated}}t.ContextKeyGreaterEqualsExpr=N;class k{static create(e,u,O=null){return c(u,_=>new k(e,_,O))}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=N.create(this.key,this.value,this)),this.negated}}t.ContextKeySmallerExpr=k;class g{static create(e,u,O=null){return c(u,_=>new g(e,_,O))}constructor(e,u,O){this.key=e,this.value=u,this.negated=O,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=p.create(this.key,this.value,this)),this.negated}}t.ContextKeySmallerEqualsExpr=g;class C{static create(e,u){return new C(e,u)}constructor(e,u){this.key=e,this.regexp=u,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const u=this.regexp?this.regexp.source:"",O=e.regexp?e.regexp.source:"";return u<O?-1:u>O?1:0}equals(e){if(e.type===this.type){const u=this.regexp?this.regexp.source:"",O=e.regexp?e.regexp.source:"";return this.key===e.key&&u===O}return!1}substituteConstants(){return this}evaluate(e){const u=e.getValue(this.key);return this.regexp?this.regexp.test(u):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=E.create(this)),this.negated}}t.ContextKeyRegexExpr=C;class E{static create(e){return new E(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(e){return new E(this._actual.map(e))}negate(){return this._actual}}t.ContextKeyNotRegexExpr=E;function d(V){let e=null;for(let u=0,O=V.length;u<O;u++){const _=V[u].substituteConstants();if(V[u]!==_&&e===null){e=[];for(let A=0;A<u;A++)e[A]=V[A]}e!==null&&(e[u]=_)}return e===null?V:e}class P{static create(e,u,O){return P._normalizeArr(e,u,O)}constructor(e,u){this.expr=e,this.negated=u,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let u=0,O=this.expr.length;u<O;u++){const _=R(this.expr[u],e.expr[u]);if(_!==0)return _}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let u=0,O=this.expr.length;u<O;u++)if(!this.expr[u].equals(e.expr[u]))return!1;return!0}return!1}substituteConstants(){const e=d(this.expr);return e===this.expr?this:P.create(e,this.negated,!1)}evaluate(e){for(let u=0,O=this.expr.length;u<O;u++)if(!this.expr[u].evaluate(e))return!1;return!0}static _normalizeArr(e,u,O){const _=[];let A=!1;for(const S of e)if(!!S){if(S.type===1){A=!0;continue}if(S.type===0)return f.INSTANCE;if(S.type===6){_.push(...S.expr);continue}_.push(S)}if(_.length===0&&A)return r.INSTANCE;if(_.length!==0){if(_.length===1)return _[0];_.sort(R);for(let S=1;S<_.length;S++)_[S-1].equals(_[S])&&(_.splice(S,1),S--);if(_.length===1)return _[0];for(;_.length>1;){const S=_[_.length-1];if(S.type!==9)break;_.pop();const W=_.pop(),x=_.length===0,K=z.create(S.expr.map(X=>P.create([X,W],null,O)),null,x);K&&(_.push(K),_.sort(R))}if(_.length===1)return _[0];if(O){for(let S=0;S<_.length;S++)for(let W=S+1;W<_.length;W++)if(_[S].negate().equals(_[W]))return f.INSTANCE;if(_.length===1)return _[0]}return new P(_,u)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const u of this.expr)e.push(...u.keys());return e}map(e){return new P(this.expr.map(u=>u.map(e)),null)}negate(){if(!this.negated){const e=[];for(const u of this.expr)e.push(u.negate());this.negated=z.create(e,this,!0)}return this.negated}}class z{static create(e,u,O){return z._normalizeArr(e,u,O)}constructor(e,u){this.expr=e,this.negated=u,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let u=0,O=this.expr.length;u<O;u++){const _=R(this.expr[u],e.expr[u]);if(_!==0)return _}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let u=0,O=this.expr.length;u<O;u++)if(!this.expr[u].equals(e.expr[u]))return!1;return!0}return!1}substituteConstants(){const e=d(this.expr);return e===this.expr?this:z.create(e,this.negated,!1)}evaluate(e){for(let u=0,O=this.expr.length;u<O;u++)if(this.expr[u].evaluate(e))return!0;return!1}static _normalizeArr(e,u,O){let _=[],A=!1;if(e){for(let S=0,W=e.length;S<W;S++){const x=e[S];if(!!x){if(x.type===0){A=!0;continue}if(x.type===1)return r.INSTANCE;if(x.type===9){_=_.concat(x.expr);continue}_.push(x)}}if(_.length===0&&A)return f.INSTANCE;_.sort(R)}if(_.length!==0){if(_.length===1)return _[0];for(let S=1;S<_.length;S++)_[S-1].equals(_[S])&&(_.splice(S,1),S--);if(_.length===1)return _[0];if(O){for(let S=0;S<_.length;S++)for(let W=S+1;W<_.length;W++)if(_[S].negate().equals(_[W]))return r.INSTANCE;if(_.length===1)return _[0]}return new z(_,u)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const u of this.expr)e.push(...u.keys());return e}map(e){return new z(this.expr.map(u=>u.map(e)),null)}negate(){if(!this.negated){const e=[];for(const u of this.expr)e.push(u.negate());for(;e.length>1;){const u=e.shift(),O=e.shift(),_=[];for(const A of re(u))for(const S of re(O))_.push(P.create([A,S],null,!1));e.unshift(z.create(_,null,!1))}this.negated=z.create(e,this,!0)}return this.negated}}class j extends s{static all(){return j._info.values()}constructor(e,u,O){super(e,null),this._defaultValue=u,typeof O=="object"?j._info.push({...O,key:e}):O!==!0&&j._info.push({key:e,description:O,type:u!=null?typeof u:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return l.create(this.key,e)}notEqualsTo(e){return i.create(this.key,e)}}j._info=[],t.RawContextKey=j,t.IContextKeyService=(0,w.createDecorator)("contextKeyService");function H(V,e){return V<e?-1:V>e?1:0}function Q(V,e,u,O){return V<u?-1:V>u?1:e<O?-1:e>O?1:0}function Y(V,e){if(V.type===0||e.type===1)return!0;if(V.type===9)return e.type===9?Z(V.expr,e.expr):!1;if(e.type===9){for(const u of e.expr)if(Y(V,u))return!0;return!1}if(V.type===6){if(e.type===6)return Z(e.expr,V.expr);for(const u of V.expr)if(Y(u,e))return!0;return!1}return V.equals(e)}t.implies=Y;function Z(V,e){let u=0,O=0;for(;u<V.length&&O<e.length;){const _=V[u].cmp(e[O]);if(_<0)return!1;_===0&&u++,O++}return u===V.length}function re(V){return V.type===9?V.expr:[V]}}),define(te[31],ne([0,1,6,22,37,18,9,4,2,30]),function(ee,t,M,q,D,w,v,F,U,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressOutputItemStreams=t.isTextStreamMime=t.NotebookWorkingCopyTypeIdentifier=t.CellStatusbarAlignment=t.NotebookSetting=t.notebookDocumentFilterMatch=t.isDocumentExcludePattern=t.NotebookEditorPriority=t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=t.diff=t.MimeTypeDisplayOrder=t.CellUri=t.CellEditType=t.SelectionStateType=t.NotebookCellsChangeType=t.RendererMessagingSpec=t.NotebookRendererMatch=t.NotebookCellExecutionState=t.NotebookRunState=t.RENDERER_NOT_AVAILABLE=t.RENDERER_EQUIVALENT_EXTENSIONS=t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=t.NOTEBOOK_DISPLAY_ORDER=t.CellKind=t.INTERACTIVE_WINDOW_EDITOR_ID=t.NOTEBOOK_DIFF_EDITOR_ID=t.NOTEBOOK_EDITOR_ID=void 0,t.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",t.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",t.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var L;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(L=t.CellKind||(t.CellKind={})),t.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",w.Mimes.latex,w.Mimes.markdown,"image/png","image/jpeg",w.Mimes.text],t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[w.Mimes.latex,w.Mimes.markdown,"application/json",w.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],t.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),t.RENDERER_NOT_AVAILABLE="_notAvailable";var B;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(B=t.NotebookRunState||(t.NotebookRunState={}));var b;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(b=t.NotebookCellExecutionState||(t.NotebookCellExecutionState={}));var R;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(R=t.NotebookRendererMatch||(t.NotebookRendererMatch={}));var f;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(f=t.RendererMessagingSpec||(t.RendererMessagingSpec={}));var r;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(r=t.NotebookCellsChangeType||(t.NotebookCellsChangeType={}));var s;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(s=t.SelectionStateType||(t.SelectionStateType={}));var l;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(l=t.CellEditType||(t.CellEditType={}));var n;(function(e){e.scheme=v.Schemas.vscodeNotebookCell;const u=["W","X","Y","Z","a","b","c","d","e","f"],O=new RegExp(`^[${u.join("")}]+`),_=7;function A(I,h){const y=h.toString(_),$=`${y.length<u.length?u[y.length-1]:"z"}${y}s${(0,M.encodeBase64)(M.VSBuffer.fromString(I.scheme),!0,!0)}`;return I.with({scheme:e.scheme,fragment:$})}e.generate=A;function S(I){if(I.scheme!==e.scheme)return;const h=I.fragment.indexOf("s");if(h<0)return;const y=parseInt(I.fragment.substring(0,h).replace(O,""),_),T=(0,M.decodeBase64)(I.fragment.substring(h+1)).toString();if(!isNaN(y))return{handle:y,notebook:I.with({scheme:T,fragment:null})}}e.parse=S;function W(I,h){return I.with({scheme:v.Schemas.vscodeNotebookCellOutput,fragment:`op${h??""},${I.scheme!==v.Schemas.file?I.scheme:""}`})}e.generateCellOutputUri=W;function x(I){if(I.scheme!==v.Schemas.vscodeNotebookCellOutput)return;const h=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(I.fragment);if(!h)return;const y=h[1]&&h[1]!==""?h[1]:void 0,T=h[2];return{outputId:y,notebook:I.with({scheme:T||v.Schemas.file,fragment:null})}}e.parseCellOutputUri=x;function K(I,h,y){return e.generate(I,h).with({scheme:y})}e.generateCellPropertyUri=K;function X(I,h){if(I.scheme===h)return e.parse(I.with({scheme:e.scheme}))}e.parseCellPropertyUri=X})(n=t.CellUri||(t.CellUri={}));const a=e=>U.isWindows?e.replace(/\//g,"\\"):e;class i{constructor(u=[],O=t.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=O,this.order=[...new Set(u)].map(_=>({pattern:_,matches:q.parse(a(_))}))}sort(u){const O=new Map(D.Iterable.map(u,A=>[A,a(A)]));let _=[];for(const{matches:A}of this.order)for(const[S,W]of O)if(A(W)){_.push(S),O.delete(S);break}return O.size&&(_=_.concat([...O.keys()].sort((A,S)=>this.defaultOrder.indexOf(A)-this.defaultOrder.indexOf(S)))),_}prioritize(u,O){const _=this.findIndex(u);if(_===-1){this.order.unshift({pattern:u,matches:q.parse(a(u))});return}const A=new Set(O.map(W=>this.findIndex(W,_)));A.delete(-1);const S=Array.from(A).sort();this.order.splice(_+1,0,...S.map(W=>this.order[W]));for(let W=S.length-1;W>=0;W--)this.order.splice(S[W],1)}toArray(){return this.order.map(u=>u.pattern)}findIndex(u,O=this.order.length){const _=a(u);for(let A=0;A<O;A++)if(this.order[A].matches(_))return A;return-1}}t.MimeTypeDisplayOrder=i;function o(e,u,O,_=(A,S)=>A===S){const A=[];function S(K,X,I){if(X===0&&I.length===0)return;const h=A[A.length-1];h&&h.start+h.deleteCount===K?(h.deleteCount+=X,h.toInsert.push(...I)):A.push({start:K,deleteCount:X,toInsert:I})}let W=0,x=0;for(;;){if(W===e.length){S(W,0,u.slice(x));break}if(x===u.length){S(W,e.length-W,[]);break}const K=e[W],X=u[x];if(_(K,X)){W+=1,x+=1;continue}O(X)?(S(W,1,[]),W+=1):(S(W,0,[X]),x+=1)}return A}t.diff=o,t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new m.RawContextKey("notebookEditorCursorAtBoundary","none");var c;(function(e){e.default="default",e.option="option"})(c=t.NotebookEditorPriority||(t.NotebookEditorPriority={}));function p(e){const u=e;return!!((typeof u.include=="string"||q.isRelativePattern(u.include))&&(typeof u.exclude=="string"||q.isRelativePattern(u.exclude)))}t.isDocumentExcludePattern=p;function N(e,u,O){if(Array.isArray(e.viewType)&&e.viewType.indexOf(u)>=0||e.viewType===u)return!0;if(e.filenamePattern){const _=p(e.filenamePattern)?e.filenamePattern.include:e.filenamePattern,A=p(e.filenamePattern)?e.filenamePattern.exclude:void 0;if(q.match(_,(0,F.basename)(O.fsPath).toLowerCase()))return!(A&&q.match(A,(0,F.basename)(O.fsPath).toLowerCase()))}return!1}t.notebookDocumentFilterMatch=N,t.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",kernelPickerType:"notebook.kernelPicker.type",outputScrolling:"notebook.experimental.outputScrolling",outputWordWrap:"notebook.output.wordWrap",logging:"notebook.logging"};var k;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(k=t.CellStatusbarAlignment||(t.CellStatusbarAlignment={}));class g{static create(u){return`${g._prefix}${u}`}static parse(u){if(u.startsWith(g._prefix))return u.substring(g._prefix.length)}}g._prefix="notebook/",t.NotebookWorkingCopyTypeIdentifier=g;function C(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}t.isTextStreamMime=C;const E=new TextDecoder;function d(e){const u=[];let O=!1;for(const _ of e)(u.length===0||O)&&(u.push(_),O=!0);return H(u),V(M.VSBuffer.concat(u.map(_=>M.VSBuffer.wrap(_))))}t.compressOutputItemStreams=d;const P=`${String.fromCharCode(27)}[A`,z=P.split("").map(e=>e.charCodeAt(0)),j=10;function H(e){e.forEach((u,O)=>{if(O===0||u.length<P.length)return;const _=e[O-1],A=u.subarray(0,P.length);if(A[0]===z[0]&&A[1]===z[1]&&A[2]===z[2]){const S=_.lastIndexOf(j);if(S===-1)return;e[O-1]=_.subarray(0,S),e[O]=u.subarray(P.length)}})}function Q(e){let u=e;do e=u,u=e.replace(/[^\n]\x08/gm,"");while(u.length<e.length);return e}function Y(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const u=e.match(/^(.*)\r+/m)[1];let O=e.match(/\r+(.*)$/m)[1];O=O+u.slice(O.length,u.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,O)}return e}const Z="\b".charCodeAt(0),re="\r".charCodeAt(0);function V(e){return!e.buffer.includes(Z)&&!e.buffer.includes(re)?e:M.VSBuffer.fromString(Y(Q(E.decode(e.buffer))))}}),define(te[38],ne([0,1,39,40,10,27,31,12]),function(ee,t,M,q,D,w,v,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.NotebookEditorSimpleWorker=void 0;function U(f){let r=(0,q.numberHash)(104579,0);for(let s=0;s<f.buffer.length;s++)r=(0,q.doHash)(f.buffer[s],r);return r}class m{get textBuffer(){if(this._textBuffer)return this._textBuffer;const r=new w.PieceTreeTextBufferBuilder;r.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const s=r.finish(!0);return this._textBuffer=s.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,q.hash)(this.getValue())),this._primaryKey}constructor(r,s,l,n,a,i,o){this.handle=r,this._source=s,this.language=l,this.cellKind=n,this.outputs=a,this.metadata=i,this.internalMetadata=o,this._primaryKey=null,this._hash=null}getFullModelRange(){const r=this.textBuffer.getLineCount();return new F.Range(1,1,r,this.textBuffer.getLineLength(r)+1)}getValue(){const r=this.getFullModelRange();return this.textBuffer.getValueInRange(r,1)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,q.hash)([(0,q.hash)(this.language),(0,q.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(r=>({outputs:r.outputs.map(s=>({mime:s.mime,data:U(s.data)})),metadata:r.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,q.hash)([(0,q.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class L{constructor(r,s,l){this.uri=r,this.cells=s,this.metadata=l}acceptModelChanged(r){r.rawEvents.forEach(s=>{if(s.kind===v.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===v.NotebookCellsChangeType.Move){const l=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...l)}else if(s.kind===v.NotebookCellsChangeType.Output){const l=this.cells[s.index];l.outputs=s.outputs}else if(s.kind===v.NotebookCellsChangeType.ChangeCellLanguage){this._assertIndex(s.index);const l=this.cells[s.index];l.language=s.language}else if(s.kind===v.NotebookCellsChangeType.ChangeCellMetadata){this._assertIndex(s.index);const l=this.cells[s.index];l.metadata=s.metadata}else if(s.kind===v.NotebookCellsChangeType.ChangeCellInternalMetadata){this._assertIndex(s.index);const l=this.cells[s.index];l.internalMetadata=s.internalMetadata}})}_assertIndex(r){if(r<0||r>=this.cells.length)throw new Error(`Illegal index ${r}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(r){r.reverse().forEach(s=>{const n=s[2].map(a=>new m(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(s[0],s[1],...n)})}}class B{constructor(r){this.textModel=r}getElements(){const r=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)r[s]=this.textModel.cells[s].getComparisonValue();return r}getCellHash(r){const s=Array.isArray(r.source)?r.source.join(`
`):r.source;return(0,q.hash)([(0,q.hash)(s),r.metadata])}}class b{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(r,s){this._models[r]=new L(D.URI.parse(r),s.cells.map(l=>new m(l.handle,l.source,l.language,l.cellKind,l.outputs,l.metadata)),s.metadata)}acceptModelChanged(r,s){this._models[r]?.acceptModelChanged(s)}acceptRemovedModel(r){!this._models[r]||delete this._models[r]}computeDiff(r,s){const l=this._getModel(r),n=this._getModel(s);return{cellsDiff:new M.LcsDiff(new B(l),new B(n)).ComputeDiff(!1)}}_getModel(r){return this._models[r]}}t.NotebookEditorSimpleWorker=b;function R(f){return new b}t.create=R})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/22a808587994126e19125c6a1a03c00b990223f4/core/vs\workbench\contrib\notebook\common\services\notebookSimpleWorker.js.map
