/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/errors","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var t=[],M=0,z=te.length;M<z;M++)t[M]=ne[te[M]];return t};define(ne[12],ie([0,1]),function(te,t){"use strict";var M,z,W;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.setToString=t.mapToString=t.getOrSet=void 0;function y(c,r,a){let e=c.get(r);return e===void 0&&(e=a,c.set(r,e)),e}t.getOrSet=y;function R(c){const r=[];return c.forEach((a,e)=>{r.push(`${e} => ${a}`)}),`Map(${c.size}) {${r.join(", ")}}`}t.mapToString=R;function j(c){const r=[];return c.forEach(a=>{r.push(a)}),`Set(${c.size}) {${r.join(", ")}}`}t.setToString=j;class N{constructor(r,a){this.uri=r,this.value=a}}class b{constructor(r,a){this[M]="ResourceMap",r instanceof b?(this.map=new Map(r.map),this.toKey=a??b.defaultToKey):(this.map=new Map,this.toKey=r??b.defaultToKey)}set(r,a){return this.map.set(this.toKey(r),new N(r,a)),this}get(r){return this.map.get(this.toKey(r))?.value}has(r){return this.map.has(this.toKey(r))}get size(){return this.map.size}clear(){this.map.clear()}delete(r){return this.map.delete(this.toKey(r))}forEach(r,a){typeof a<"u"&&(r=r.bind(a));for(const[e,s]of this.map)r(s.value,s.uri,this)}*values(){for(const r of this.map.values())yield r.value}*keys(){for(const r of this.map.values())yield r.uri}*entries(){for(const r of this.map.values())yield[r.uri,r.value]}*[(M=Symbol.toStringTag,Symbol.iterator)](){for(const[,r]of this.map)yield[r.uri,r.value]}}t.ResourceMap=b,b.defaultToKey=c=>c.toString();class I{constructor(r,a){this[z]="ResourceSet",!r||typeof r=="function"?this._map=new b(r):(this._map=new b(a),r.forEach(this.add,this))}get size(){return this._map.size}add(r){return this._map.set(r,r),this}clear(){this._map.clear()}delete(r){return this._map.delete(r)}forEach(r,a){this._map.forEach((e,s)=>r.call(a,s,s,this))}has(r){return this._map.has(r)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(z=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=I;var v;(function(c){c[c.None=0]="None",c[c.AsOld=1]="AsOld",c[c.AsNew=2]="AsNew"})(v=t.Touch||(t.Touch={}));class m{constructor(){this[W]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(r){return this._map.has(r)}get(r,a=0){const e=this._map.get(r);if(!!e)return a!==0&&this.touch(e,a),e.value}set(r,a,e=0){let s=this._map.get(r);if(s)s.value=a,e!==0&&this.touch(s,e);else{switch(s={key:r,value:a,next:void 0,previous:void 0},e){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(r,s),this._size++}return this}delete(r){return!!this.remove(r)}remove(r){const a=this._map.get(r);if(!!a)return this._map.delete(r),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const r=this._head;return this._map.delete(r.key),this.removeItem(r),this._size--,r.value}forEach(r,a){const e=this._state;let s=this._head;for(;s;){if(a?r.bind(a)(s.value,s.key,this):r(s.value,s.key,this),this._state!==e)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const r=this,a=this._state;let e=this._head;const s={[Symbol.iterator](){return s},next(){if(r._state!==a)throw new Error("LinkedMap got modified during iteration.");if(e){const i={value:e.key,done:!1};return e=e.next,i}else return{value:void 0,done:!0}}};return s}values(){const r=this,a=this._state;let e=this._head;const s={[Symbol.iterator](){return s},next(){if(r._state!==a)throw new Error("LinkedMap got modified during iteration.");if(e){const i={value:e.value,done:!1};return e=e.next,i}else return{value:void 0,done:!0}}};return s}entries(){const r=this,a=this._state;let e=this._head;const s={[Symbol.iterator](){return s},next(){if(r._state!==a)throw new Error("LinkedMap got modified during iteration.");if(e){const i={value:[e.key,e.value],done:!1};return e=e.next,i}else return{value:void 0,done:!0}}};return s}[(W=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(r){if(r>=this.size)return;if(r===0){this.clear();return}let a=this._head,e=this.size;for(;a&&e>r;)this._map.delete(a.key),a=a.next,e--;this._head=a,this._size=e,a&&(a.previous=void 0),this._state++}addItemFirst(r){if(!this._head&&!this._tail)this._tail=r;else if(this._head)r.next=this._head,this._head.previous=r;else throw new Error("Invalid list");this._head=r,this._state++}addItemLast(r){if(!this._head&&!this._tail)this._head=r;else if(this._tail)r.previous=this._tail,this._tail.next=r;else throw new Error("Invalid list");this._tail=r,this._state++}removeItem(r){if(r===this._head&&r===this._tail)this._head=void 0,this._tail=void 0;else if(r===this._head){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this._head=r.next}else if(r===this._tail){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this._tail=r.previous}else{const a=r.next,e=r.previous;if(!a||!e)throw new Error("Invalid list");a.previous=e,e.next=a}r.next=void 0,r.previous=void 0,this._state++}touch(r,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==1&&a!==2)){if(a===1){if(r===this._head)return;const e=r.next,s=r.previous;r===this._tail?(s.next=void 0,this._tail=s):(e.previous=s,s.next=e),r.previous=void 0,r.next=this._head,this._head.previous=r,this._head=r,this._state++}else if(a===2){if(r===this._tail)return;const e=r.next,s=r.previous;r===this._head?(e.previous=void 0,this._head=e):(e.previous=s,s.next=e),r.next=void 0,r.previous=this._tail,this._tail.next=r,this._tail=r,this._state++}}}toJSON(){const r=[];return this.forEach((a,e)=>{r.push([e,a])}),r}fromJSON(r){this.clear();for(const[a,e]of r)this.set(a,e)}}t.LinkedMap=m;class S extends m{constructor(r,a=1){super(),this._limit=r,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(r){this._limit=r,this.checkTrim()}get ratio(){return this._ratio}set ratio(r){this._ratio=Math.min(Math.max(0,r),1),this.checkTrim()}get(r,a=2){return super.get(r,a)}peek(r){return super.get(r,0)}set(r,a){return super.set(r,a,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=S}),define(ne[13],ie([0,1,14,6]),function(te,t,M,z){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=t.isReadable=void 0;function W(o){const l=o;return l?typeof l.read=="function":!1}t.isReadable=W;function y(o){const l=o;return l?[l.on,l.pause,l.resume,l.destroy].every(g=>typeof g=="function"):!1}t.isReadableStream=y;function R(o){const l=o;return l?y(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}t.isReadableBufferedStream=R;function j(o,l){return new N(o,l)}t.newWriteableStream=j;class N{constructor(l,g){this.reducer=l,this.options=g,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(l){if(!this.state.destroyed){if(this.state.flowing)this.emitData(l);else if(this.buffer.data.push(l),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(g=>this.pendingWritePromises.push(g))}}error(l){this.state.destroyed||(this.state.flowing?this.emitError(l):this.buffer.error.push(l))}end(l){this.state.destroyed||(typeof l<"u"&&this.write(l),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(l){this.listeners.data.slice(0).forEach(g=>g(l))}emitError(l){this.listeners.error.length===0?(0,M.onUnexpectedError)(l):this.listeners.error.slice(0).forEach(g=>g(l))}emitEnd(){this.listeners.end.slice(0).forEach(l=>l())}on(l,g){if(!this.state.destroyed)switch(l){case"data":this.listeners.data.push(g),this.resume();break;case"end":this.listeners.end.push(g),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(g),this.state.flowing&&this.flowErrors();break}}removeListener(l,g){if(this.state.destroyed)return;let w;switch(l){case"data":w=this.listeners.data;break;case"end":w=this.listeners.end;break;case"error":w=this.listeners.error;break}if(w){const E=w.indexOf(g);E>=0&&w.splice(E,1)}}flowData(){if(this.buffer.data.length>0){const l=this.reducer(this.buffer.data);this.emitData(l),this.buffer.data.length=0;const g=[...this.pendingWritePromises];this.pendingWritePromises.length=0,g.forEach(w=>w())}}flowErrors(){if(this.listeners.error.length>0){for(const l of this.buffer.error)this.emitError(l);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function b(o,l){const g=[];let w;for(;(w=o.read())!==null;)g.push(w);return l(g)}t.consumeReadable=b;function I(o,l,g){const w=[];let E;for(;(E=o.read())!==null&&w.length<g;)w.push(E);return E===null&&w.length>0?l(w):{read:()=>{if(w.length>0)return w.shift();if(typeof E<"u"){const U=E;return E=void 0,U}return o.read()}}}t.peekReadable=I;function v(o,l){return new Promise((g,w)=>{const E=[];m(o,{onData:U=>{l&&E.push(U)},onError:U=>{l?w(U):g(void 0)},onEnd:()=>{g(l?l(E):void 0)}})})}t.consumeStream=v;function m(o,l){let g=!1;return o.on("error",w=>{g||l.onError(w)}),o.on("end",()=>{g||l.onEnd()}),o.on("data",w=>{g||l.onData(w)}),(0,z.toDisposable)(()=>g=!0)}t.listenStream=m;function S(o,l){return new Promise((g,w)=>{const E=new z.DisposableStore,U=[],h=d=>{if(U.push(d),U.length>l)return E.dispose(),o.pause(),g({stream:o,buffer:U,ended:!1})},C=d=>w(d),_=()=>g({stream:o,buffer:U,ended:!0});E.add((0,z.toDisposable)(()=>o.removeListener("error",C))),o.on("error",C),E.add((0,z.toDisposable)(()=>o.removeListener("end",_))),o.on("end",_),E.add((0,z.toDisposable)(()=>o.removeListener("data",h))),o.on("data",h)})}t.peekStream=S;function c(o,l){const g=j(l);return g.end(o),g}t.toStream=c;function r(){const o=j(()=>{throw new Error("not supported")});return o.end(),o}t.emptyStream=r;function a(o){let l=!1;return{read:()=>l?null:(l=!0,o)}}t.toReadable=a;function e(o,l,g){const w=j(g);return m(o,{onData:E=>w.write(l.data(E)),onError:E=>w.error(l.error?l.error(E):E),onEnd:()=>w.end()}),w}t.transform=e;function s(o,l,g){let w=!1;return{read:()=>{const E=l.read();return w?E:(w=!0,E!==null?g([o,E]):o)}}}t.prefixedReadable=s;function i(o,l,g){let w=!1;const E=j(g);return m(l,{onData:U=>w?E.write(U):(w=!0,E.write(g([o,U]))),onError:U=>E.error(U),onEnd:()=>{w||(w=!0,E.write(o)),E.end()}}),E}t.prefixedStream=i}),define(ne[5],ie([0,1,13]),function(te,t,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const z=typeof Buffer<"u";let W,y;class R{static alloc(d){return z?new R(Buffer.allocUnsafe(d)):new R(new Uint8Array(d))}static wrap(d){return z&&!Buffer.isBuffer(d)&&(d=Buffer.from(d.buffer,d.byteOffset,d.byteLength)),new R(d)}static fromString(d,k){return!(k?.dontUseNodeBuffer||!1)&&z?new R(Buffer.from(d)):(W||(W=new TextEncoder),new R(W.encode(d)))}static fromByteArray(d){const k=R.alloc(d.length);for(let $=0,Y=d.length;$<Y;$++)k.buffer[$]=d[$];return k}static concat(d,k){if(typeof k>"u"){k=0;for(let X=0,Z=d.length;X<Z;X++)k+=d[X].byteLength}const $=R.alloc(k);let Y=0;for(let X=0,Z=d.length;X<Z;X++){const A=d[X];$.set(A,Y),Y+=A.byteLength}return $}constructor(d){this.buffer=d,this.byteLength=this.buffer.byteLength}clone(){const d=R.alloc(this.byteLength);return d.set(this),d}toString(){return z?this.buffer.toString():(y||(y=new TextDecoder),y.decode(this.buffer))}slice(d,k){return new R(this.buffer.subarray(d,k))}set(d,k){if(d instanceof R)this.buffer.set(d.buffer,k);else if(d instanceof Uint8Array)this.buffer.set(d,k);else if(d instanceof ArrayBuffer)this.buffer.set(new Uint8Array(d),k);else if(ArrayBuffer.isView(d))this.buffer.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength),k);else throw new Error("Unknown argument 'array'")}readUInt32BE(d){return b(this.buffer,d)}writeUInt32BE(d,k){I(this.buffer,d,k)}readUInt32LE(d){return v(this.buffer,d)}writeUInt32LE(d,k){m(this.buffer,d,k)}readUInt8(d){return S(this.buffer,d)}writeUInt8(d,k){c(this.buffer,d,k)}}t.VSBuffer=R;function j(_,d){return _[d+0]<<0>>>0|_[d+1]<<8>>>0}t.readUInt16LE=j;function N(_,d,k){_[k+0]=d&255,d=d>>>8,_[k+1]=d&255}t.writeUInt16LE=N;function b(_,d){return _[d]*2**24+_[d+1]*2**16+_[d+2]*2**8+_[d+3]}t.readUInt32BE=b;function I(_,d,k){_[k+3]=d,d=d>>>8,_[k+2]=d,d=d>>>8,_[k+1]=d,d=d>>>8,_[k]=d}t.writeUInt32BE=I;function v(_,d){return _[d+0]<<0>>>0|_[d+1]<<8>>>0|_[d+2]<<16>>>0|_[d+3]<<24>>>0}t.readUInt32LE=v;function m(_,d,k){_[k+0]=d&255,d=d>>>8,_[k+1]=d&255,d=d>>>8,_[k+2]=d&255,d=d>>>8,_[k+3]=d&255}t.writeUInt32LE=m;function S(_,d){return _[d]}t.readUInt8=S;function c(_,d,k){_[k]=d}t.writeUInt8=c;function r(_){return M.consumeReadable(_,d=>R.concat(d))}t.readableToBuffer=r;function a(_){return M.toReadable(_)}t.bufferToReadable=a;function e(_){return M.consumeStream(_,d=>R.concat(d))}t.streamToBuffer=e;async function s(_){return _.ended?R.concat(_.buffer):R.concat([..._.buffer,await e(_.stream)])}t.bufferedStreamToBuffer=s;function i(_){return M.toStream(_,d=>R.concat(d))}t.bufferToStream=i;function o(_){return M.transform(_,{data:d=>typeof d=="string"?R.fromString(d):R.wrap(d)},d=>R.concat(d))}t.streamToBufferReadableStream=o;function l(_){return M.newWriteableStream(d=>R.concat(d),_)}t.newWriteableBufferStream=l;function g(_,d){return M.prefixedReadable(_,d,k=>R.concat(k))}t.prefixedBufferReadable=g;function w(_,d){return M.prefixedStream(_,d,k=>R.concat(k))}t.prefixedBufferStream=w;function E(_){let d=0,k=0,$=0;const Y=new Uint8Array(Math.floor(_.length/4*3)),X=A=>{switch(k){case 3:Y[$++]=d|A,k=0;break;case 2:Y[$++]=d|A>>>2,d=A<<6,k=3;break;case 1:Y[$++]=d|A>>>4,d=A<<4,k=2;break;default:d=A<<2,k=1}};for(let A=0;A<_.length;A++){const n=_.charCodeAt(A);if(n>=65&&n<=90)X(n-65);else if(n>=97&&n<=122)X(n-97+26);else if(n>=48&&n<=57)X(n-48+52);else if(n===43||n===45)X(62);else if(n===47||n===95)X(63);else{if(n===61)break;throw new SyntaxError(`Unexpected base64 character ${_[A]}`)}}const Z=$;for(;k>0;)X(0);return R.wrap(Y).slice(0,Z)}t.decodeBase64=E;const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function C({buffer:_},d=!0,k=!1){const $=k?h:U;let Y="";const X=_.byteLength%3;let Z=0;for(;Z<_.byteLength-X;Z+=3){const A=_[Z+0],n=_[Z+1],p=_[Z+2];Y+=$[A>>>2],Y+=$[(A<<4|n>>>4)&63],Y+=$[(n<<2|p>>>6)&63],Y+=$[p&63]}if(X===1){const A=_[Z+0];Y+=$[A>>>2],Y+=$[A<<4&63],d&&(Y+="==")}else if(X===2){const A=_[Z+0],n=_[Z+1];Y+=$[A>>>2],Y+=$[(A<<4|n>>>4)&63],Y+=$[n<<2&63],d&&(Y+="=")}return Y}t.encodeBase64=C}),define(ne[15],ie([0,1]),function(te,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countEOL=t.StringEOL=void 0;var M;(function(W){W[W.Unknown=0]="Unknown",W[W.Invalid=3]="Invalid",W[W.LF=1]="LF",W[W.CRLF=2]="CRLF"})(M=t.StringEOL||(t.StringEOL={}));function z(W){let y=0,R=0,j=0,N=0;for(let b=0,I=W.length;b<I;b++){const v=W.charCodeAt(b);v===13?(y===0&&(R=b),y++,b+1<I&&W.charCodeAt(b+1)===10?(N|=2,b++):N|=3,j=b+1):v===10&&(N|=1,y===0&&(R=b),y++,j=b+1)}return y===0&&(R=W.length),[y,R,W.length-j,N]}t.countEOL=z}),define(ne[16],ie([0,1]),function(te,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recomputeTreeMetadata=t.updateTreeMetadata=t.fixInsert=t.rbDelete=t.rightRotate=t.leftRotate=t.resetSentinel=t.calculateLF=t.calculateSize=t.righttest=t.leftest=t.SENTINEL=t.NodeColor=t.TreeNode=void 0;class M{constructor(a,e){this.piece=a,this.color=e,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return W(this.right);let a=this;for(;a.parent!==t.SENTINEL&&a.parent.left!==a;)a=a.parent;return a.parent===t.SENTINEL?t.SENTINEL:a.parent}prev(){if(this.left!==t.SENTINEL)return y(this.left);let a=this;for(;a.parent!==t.SENTINEL&&a.parent.right!==a;)a=a.parent;return a.parent===t.SENTINEL?t.SENTINEL:a.parent}detach(){this.parent=null,this.left=null,this.right=null}}t.TreeNode=M;var z;(function(r){r[r.Black=0]="Black",r[r.Red=1]="Red"})(z=t.NodeColor||(t.NodeColor={})),t.SENTINEL=new M(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0;function W(r){for(;r.left!==t.SENTINEL;)r=r.left;return r}t.leftest=W;function y(r){for(;r.right!==t.SENTINEL;)r=r.right;return r}t.righttest=y;function R(r){return r===t.SENTINEL?0:r.size_left+r.piece.length+R(r.right)}t.calculateSize=R;function j(r){return r===t.SENTINEL?0:r.lf_left+r.piece.lineFeedCnt+j(r.right)}t.calculateLF=j;function N(){t.SENTINEL.parent=t.SENTINEL}t.resetSentinel=N;function b(r,a){const e=a.right;e.size_left+=a.size_left+(a.piece?a.piece.length:0),e.lf_left+=a.lf_left+(a.piece?a.piece.lineFeedCnt:0),a.right=e.left,e.left!==t.SENTINEL&&(e.left.parent=a),e.parent=a.parent,a.parent===t.SENTINEL?r.root=e:a.parent.left===a?a.parent.left=e:a.parent.right=e,e.left=a,a.parent=e}t.leftRotate=b;function I(r,a){const e=a.left;a.left=e.right,e.right!==t.SENTINEL&&(e.right.parent=a),e.parent=a.parent,a.size_left-=e.size_left+(e.piece?e.piece.length:0),a.lf_left-=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),a.parent===t.SENTINEL?r.root=e:a===a.parent.right?a.parent.right=e:a.parent.left=e,e.right=a,a.parent=e}t.rightRotate=I;function v(r,a){let e,s;if(a.left===t.SENTINEL?(s=a,e=s.right):a.right===t.SENTINEL?(s=a,e=s.left):(s=W(a.right),e=s.right),s===r.root){r.root=e,e.color=0,a.detach(),N(),r.root.parent=t.SENTINEL;return}const i=s.color===1;if(s===s.parent.left?s.parent.left=e:s.parent.right=e,s===a?(e.parent=s.parent,c(r,e)):(s.parent===a?e.parent=s:e.parent=s.parent,c(r,e),s.left=a.left,s.right=a.right,s.parent=a.parent,s.color=a.color,a===r.root?r.root=s:a===a.parent.left?a.parent.left=s:a.parent.right=s,s.left!==t.SENTINEL&&(s.left.parent=s),s.right!==t.SENTINEL&&(s.right.parent=s),s.size_left=a.size_left,s.lf_left=a.lf_left,c(r,s)),a.detach(),e.parent.left===e){const l=R(e),g=j(e);if(l!==e.parent.size_left||g!==e.parent.lf_left){const w=l-e.parent.size_left,E=g-e.parent.lf_left;e.parent.size_left=l,e.parent.lf_left=g,S(r,e.parent,w,E)}}if(c(r,e.parent),i){N();return}let o;for(;e!==r.root&&e.color===0;)e===e.parent.left?(o=e.parent.right,o.color===1&&(o.color=0,e.parent.color=1,b(r,e.parent),o=e.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,e=e.parent):(o.right.color===0&&(o.left.color=0,o.color=1,I(r,o),o=e.parent.right),o.color=e.parent.color,e.parent.color=0,o.right.color=0,b(r,e.parent),e=r.root)):(o=e.parent.left,o.color===1&&(o.color=0,e.parent.color=1,I(r,e.parent),o=e.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,e=e.parent):(o.left.color===0&&(o.right.color=0,o.color=1,b(r,o),o=e.parent.left),o.color=e.parent.color,e.parent.color=0,o.left.color=0,I(r,e.parent),e=r.root));e.color=0,N()}t.rbDelete=v;function m(r,a){for(c(r,a);a!==r.root&&a.parent.color===1;)if(a.parent===a.parent.parent.left){const e=a.parent.parent.right;e.color===1?(a.parent.color=0,e.color=0,a.parent.parent.color=1,a=a.parent.parent):(a===a.parent.right&&(a=a.parent,b(r,a)),a.parent.color=0,a.parent.parent.color=1,I(r,a.parent.parent))}else{const e=a.parent.parent.left;e.color===1?(a.parent.color=0,e.color=0,a.parent.parent.color=1,a=a.parent.parent):(a===a.parent.left&&(a=a.parent,I(r,a)),a.parent.color=0,a.parent.parent.color=1,b(r,a.parent.parent))}r.root.color=0}t.fixInsert=m;function S(r,a,e,s){for(;a!==r.root&&a!==t.SENTINEL;)a.parent.left===a&&(a.parent.size_left+=e,a.parent.lf_left+=s),a=a.parent}t.updateTreeMetadata=S;function c(r,a){let e=0,s=0;if(a!==r.root){for(;a!==r.root&&a===a.parent.right;)a=a.parent;if(a!==r.root)for(a=a.parent,e=R(a.left)-a.size_left,s=j(a.left)-a.lf_left,a.size_left+=e,a.lf_left+=s;a!==r.root&&(e!==0||s!==0);)a.parent.left===a&&(a.parent.size_left+=e,a.parent.lf_left+=s),a=a.parent}}t.recomputeTreeMetadata=c}),define(ne[17],ie([0,1,4]),function(te,t,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMimeType=t.getExtensionForMimeType=t.getMediaMime=t.getMediaOrTextMime=t.Mimes=void 0,t.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const z={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},W={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function y(I){const v=(0,M.extname)(I),m=z[v.toLowerCase()];return m!==void 0?m:R(I)}t.getMediaOrTextMime=y;function R(I){const v=(0,M.extname)(I);return W[v.toLowerCase()]}t.getMediaMime=R;function j(I){for(const v in W)if(W[v]===I)return v}t.getExtensionForMimeType=j;const N=/^(.+)\/(.+?)(;.+)?$/;function b(I,v){const m=N.exec(I);return m?`${m[1].toLowerCase()}/${m[2].toLowerCase()}${m[3]??""}`:v?void 0:I}t.normalizeMimeType=b}),define(ne[7],ie([0,1,4,2,3,30]),function(te,t,M,z,W,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function R(h){return h===47||h===92}t.isPathSeparator=R;function j(h){return h.replace(/[\\/]/g,M.posix.sep)}t.toSlashes=j;function N(h){return h.indexOf("/")===-1&&(h=j(h)),/^[a-zA-Z]:(\/|$)/.test(h)&&(h="/"+h),h}t.toPosixPath=N;function b(h,C=M.posix.sep){if(!h)return"";const _=h.length,d=h.charCodeAt(0);if(R(d)){if(R(h.charCodeAt(1))&&!R(h.charCodeAt(2))){let $=3;const Y=$;for(;$<_&&!R(h.charCodeAt($));$++);if(Y!==$&&!R(h.charCodeAt($+1))){for($+=1;$<_;$++)if(R(h.charCodeAt($)))return h.slice(0,$+1).replace(/[\\/]/g,C)}}return C}else if(e(d)&&h.charCodeAt(1)===58)return R(h.charCodeAt(2))?h.slice(0,2)+C:h.slice(0,2);let k=h.indexOf("://");if(k!==-1){for(k+=3;k<_;k++)if(R(h.charCodeAt(k)))return h.slice(0,k+1)}return""}t.getRoot=b;function I(h){if(!z.isWindows||!h||h.length<5)return!1;let C=h.charCodeAt(0);if(C!==92||(C=h.charCodeAt(1),C!==92))return!1;let _=2;const d=_;for(;_<h.length&&(C=h.charCodeAt(_),C!==92);_++);return!(d===_||(C=h.charCodeAt(_+1),isNaN(C)||C===92))}t.isUNC=I;const v=/[\\/:\*\?"<>\|]/g,m=/[\\/]/g,S=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function c(h,C=z.isWindows){const _=C?v:m;return!(!h||h.length===0||/^\s+$/.test(h)||(_.lastIndex=0,_.test(h))||C&&S.test(h)||h==="."||h===".."||C&&h[h.length-1]==="."||C&&h.length!==h.trim().length||h.length>255)}t.isValidBasename=c;function r(h,C,_){const d=h===C;return!_||d?d:!h||!C?!1:(0,W.equalsIgnoreCase)(h,C)}t.isEqual=r;function a(h,C,_,d=M.sep){if(h===C)return!0;if(!h||!C||C.length>h.length)return!1;if(_){if(!(0,W.startsWithIgnoreCase)(h,C))return!1;if(C.length===h.length)return!0;let $=C.length;return C.charAt(C.length-1)===d&&$--,h.charAt($)===d}return C.charAt(C.length-1)!==d&&(C+=d),h.indexOf(C)===0}t.isEqualOrParent=a;function e(h){return h>=65&&h<=90||h>=97&&h<=122}t.isWindowsDriveLetter=e;function s(h,C){return z.isWindows&&h.endsWith(":")&&(h+=M.sep),(0,M.isAbsolute)(h)||(h=(0,M.join)(C,h)),h=(0,M.normalize)(h),z.isWindows?(h=(0,W.rtrim)(h,M.sep),h.endsWith(":")&&(h+=M.sep)):(h=(0,W.rtrim)(h,M.sep),h||(h=M.sep)),h}t.sanitizeFilePath=s;function i(h){const C=(0,M.normalize)(h);return z.isWindows?h.length>3?!1:o(C)&&(h.length===2||C.charCodeAt(2)===92):C===M.posix.sep}t.isRootOrDriveLetter=i;function o(h,C=z.isWindows){return C?e(h.charCodeAt(0))&&h.charCodeAt(1)===58:!1}t.hasDriveLetter=o;function l(h){return o(h)?h[0]:void 0}t.getDriveLetter=l;function g(h,C,_){return C.length>h.length?-1:h===C?0:(_&&(h=h.toLowerCase(),C=C.toLowerCase()),h.indexOf(C))}t.indexOfPath=g;function w(h){const C=h.split(":");let _,d,k;for(const $ of C){const Y=Number($);(0,y.isNumber)(Y)?d===void 0?d=Y:k===void 0&&(k=Y):_=_?[_,$].join(":"):$}if(!_)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:_,line:d!==void 0?d:void 0,column:k!==void 0?k:d!==void 0?1:void 0}}t.parseLineAndColumnAware=w;const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function U(h,C,_=8){let d="";for(let $=0;$<_;$++)d+=E.charAt(Math.floor(Math.random()*E.length));let k;return C?k=`${C}-${d}`:k=d,h?(0,M.join)(h,k):k}t.randomPath=U}),define(ne[8],ie([0,1,2,9]),function(te,t,M,z){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COI=t.FileAccess=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var W;(function(N){N.inMemory="inmemory",N.vscode="vscode",N.internal="private",N.walkThrough="walkThrough",N.walkThroughSnippet="walkThroughSnippet",N.http="http",N.https="https",N.file="file",N.mailto="mailto",N.untitled="untitled",N.data="data",N.command="command",N.vscodeRemote="vscode-remote",N.vscodeRemoteResource="vscode-remote-resource",N.vscodeUserData="vscode-userdata",N.vscodeCustomEditor="vscode-custom-editor",N.vscodeNotebook="vscode-notebook",N.vscodeNotebookCell="vscode-notebook-cell",N.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",N.vscodeNotebookCellOutput="vscode-notebook-cell-output",N.vscodeInteractive="vscode-interactive",N.vscodeInteractiveInput="vscode-interactive-input",N.vscodeSettings="vscode-settings",N.vscodeWorkspaceTrust="vscode-workspace-trust",N.vscodeTerminal="vscode-terminal",N.webviewPanel="webview-panel",N.vscodeWebview="vscode-webview",N.extension="extension",N.vscodeFileResource="vscode-file",N.tmp="tmp",N.vsls="vsls",N.vscodeSourceControl="vscode-scm"})(W=t.Schemas||(t.Schemas={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class y{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${W.vscodeRemoteResource}`}setPreferredWebSchema(b){this._preferredWebSchema=b}setDelegate(b){this._delegate=b}setServerRootPath(b){this._remoteResourcesPath=`${b}/${W.vscodeRemoteResource}`}set(b,I,v){this._hosts[b]=I,this._ports[b]=v}setConnectionToken(b,I){this._connectionTokens[b]=I}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(b){if(this._delegate)return this._delegate(b);const I=b.authority;let v=this._hosts[I];v&&v.indexOf(":")!==-1&&v.indexOf("[")===-1&&(v=`[${v}]`);const m=this._ports[I],S=this._connectionTokens[I];let c=`path=${encodeURIComponent(b.path)}`;return typeof S=="string"&&(c+=`&${t.connectionTokenQueryName}=${encodeURIComponent(S)}`),z.URI.from({scheme:M.isWeb?this._preferredWebSchema:W.vscodeRemoteResource,authority:`${v}:${m}`,path:this._remoteResourcesPath,query:c})}}t.RemoteAuthorities=new y;class R{asBrowserUri(b,I){const v=this.toUri(b,I);return v.scheme===W.vscodeRemote?t.RemoteAuthorities.rewrite(v):v.scheme===W.file&&(M.isNative||M.isWebWorker&&M.globals.origin===`${W.vscodeFileResource}://${R.FALLBACK_AUTHORITY}`)?v.with({scheme:W.vscodeFileResource,authority:v.authority||R.FALLBACK_AUTHORITY,query:null,fragment:null}):v}asFileUri(b,I){const v=this.toUri(b,I);return v.scheme===W.vscodeFileResource?v.with({scheme:W.file,authority:v.authority!==R.FALLBACK_AUTHORITY?v.authority:null,query:null,fragment:null}):v}toUri(b,I){return z.URI.isUri(b)?b:z.URI.parse(I.toUrl(b))}}R.FALLBACK_AUTHORITY="vscode-app",t.FileAccess=new R;var j;(function(N){const b=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);N.CoopAndCoep=Object.freeze(b.get("3"));const I="vscode-coi";function v(S){let c;typeof S=="string"?c=new URL(S).searchParams:S instanceof URL?c=S.searchParams:z.URI.isUri(S)&&(c=new URL(S.toString(!0)).searchParams);const r=c?.get(I);if(!!r)return b.get(r)}N.getHeadersFromQuery=v;function m(S,c,r){if(!globalThis.crossOriginIsolated)return;const a=c&&r?"3":r?"2":"1";S instanceof URLSearchParams?S.set(I,a):S[I]=a}N.addSearchParam=m})(j=t.COI||(t.COI={}))}),define(ne[18],ie([0,1,7,8,4,2,3,9]),function(te,t,M,z,W,y,R,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function N(S){return(0,j.uriToFsPath)(S,!0)}t.originalFSPath=N;class b{constructor(c){this._ignorePathCasing=c}compare(c,r,a=!1){return c===r?0:(0,R.compare)(this.getComparisonKey(c,a),this.getComparisonKey(r,a))}isEqual(c,r,a=!1){return c===r?!0:!c||!r?!1:this.getComparisonKey(c,a)===this.getComparisonKey(r,a)}getComparisonKey(c,r=!1){return c.with({path:this._ignorePathCasing(c)?c.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(c){return this._ignorePathCasing(c)}isEqualOrParent(c,r,a=!1){if(c.scheme===r.scheme){if(c.scheme===z.Schemas.file)return M.isEqualOrParent(N(c),N(r),this._ignorePathCasing(c))&&c.query===r.query&&(a||c.fragment===r.fragment);if((0,t.isEqualAuthority)(c.authority,r.authority))return M.isEqualOrParent(c.path,r.path,this._ignorePathCasing(c),"/")&&c.query===r.query&&(a||c.fragment===r.fragment)}return!1}joinPath(c,...r){return j.URI.joinPath(c,...r)}basenameOrAuthority(c){return(0,t.basename)(c)||c.authority}basename(c){return W.posix.basename(c.path)}extname(c){return W.posix.extname(c.path)}dirname(c){if(c.path.length===0)return c;let r;return c.scheme===z.Schemas.file?r=j.URI.file(W.dirname(N(c))).path:(r=W.posix.dirname(c.path),c.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${c.toString})) resulted in a relative path`),r="/")),c.with({path:r})}normalizePath(c){if(!c.path.length)return c;let r;return c.scheme===z.Schemas.file?r=j.URI.file(W.normalize(N(c))).path:r=W.posix.normalize(c.path),c.with({path:r})}relativePath(c,r){if(c.scheme!==r.scheme||!(0,t.isEqualAuthority)(c.authority,r.authority))return;if(c.scheme===z.Schemas.file){const s=W.relative(N(c),N(r));return y.isWindows?M.toSlashes(s):s}let a=c.path||"/";const e=r.path||"/";if(this._ignorePathCasing(c)){let s=0;for(const i=Math.min(a.length,e.length);s<i&&!(a.charCodeAt(s)!==e.charCodeAt(s)&&a.charAt(s).toLowerCase()!==e.charAt(s).toLowerCase());s++);a=e.substr(0,s)+a.substr(s)}return W.posix.relative(a,e)}resolvePath(c,r){if(c.scheme===z.Schemas.file){const a=j.URI.file(W.resolve(N(c),r));return c.with({authority:a.authority,path:a.path})}return r=M.toPosixPath(r),c.with({path:W.posix.resolve(c.path,r)})}isAbsolutePath(c){return!!c.path&&c.path[0]==="/"}isEqualAuthority(c,r){return c===r||c!==void 0&&r!==void 0&&(0,R.equalsIgnoreCase)(c,r)}hasTrailingPathSeparator(c,r=W.sep){if(c.scheme===z.Schemas.file){const a=N(c);return a.length>M.getRoot(a).length&&a[a.length-1]===r}else{const a=c.path;return a.length>1&&a.charCodeAt(a.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(c.fsPath)}}removeTrailingPathSeparator(c,r=W.sep){return(0,t.hasTrailingPathSeparator)(c,r)?c.with({path:c.path.substr(0,c.path.length-1)}):c}addTrailingPathSeparator(c,r=W.sep){let a=!1;if(c.scheme===z.Schemas.file){const e=N(c);a=e!==void 0&&e.length===M.getRoot(e).length&&e[e.length-1]===r}else{r="/";const e=c.path;a=e.length===1&&e.charCodeAt(e.length-1)===47}return!a&&!(0,t.hasTrailingPathSeparator)(c,r)?c.with({path:c.path+"/"}):c}}t.ExtUri=b,t.extUri=new b(()=>!1),t.extUriBiasedIgnorePathCase=new b(S=>S.scheme===z.Schemas.file?!y.isLinux:!0),t.extUriIgnorePathCase=new b(S=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function I(S,c){const r=[];for(let a=0;a<S.length;a++){const e=c(S[a]);S.some((s,i)=>i===a?!1:(0,t.isEqualOrParent)(e,c(s)))||r.push(S[a])}return r}t.distinctParents=I;var v;(function(S){S.META_DATA_LABEL="label",S.META_DATA_DESCRIPTION="description",S.META_DATA_SIZE="size",S.META_DATA_MIME="mime";function c(r){const a=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(i=>{const[o,l]=i.split(":");o&&l&&a.set(o,l)});const s=r.path.substring(0,r.path.indexOf(";"));return s&&a.set(S.META_DATA_MIME,s),a}S.parseMetaData=c})(v=t.DataUri||(t.DataUri={}));function m(S,c,r){if(c){let a=S.path;return a&&a[0]!==W.posix.sep&&(a=W.posix.sep+a),S.with({scheme:r,authority:c,path:a})}return S.with({scheme:r})}t.toLocalResource=m}),define(ne[19],ie([0,1,31,14,20,6,18,2]),function(te,t,M,z,W,y,R,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.MicrotaskDelay=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function N(D){return!!D&&typeof D.then=="function"}t.isThenable=N;function b(D){const u=new M.CancellationTokenSource,L=D(u.token),P=new Promise((F,G)=>{const J=u.token.onCancellationRequested(()=>{J.dispose(),u.dispose(),G(new z.CancellationError)});Promise.resolve(L).then(ee=>{J.dispose(),u.dispose(),F(ee)},ee=>{J.dispose(),u.dispose(),G(ee)})});return new class{cancel(){u.cancel()}then(F,G){return P.then(F,G)}catch(F){return this.then(void 0,F)}finally(F){return P.finally(F)}}}t.createCancelablePromise=b;function I(D,u,L){return new Promise((P,F)=>{const G=u.onCancellationRequested(()=>{G.dispose(),P(L)});D.then(P,F).finally(()=>G.dispose())})}t.raceCancellation=I;function v(D,u){return new Promise((L,P)=>{const F=u.onCancellationRequested(()=>{F.dispose(),P(new z.CancellationError)});D.then(L,P).finally(()=>F.dispose())})}t.raceCancellationError=v;async function m(D){let u=-1;const L=D.map((F,G)=>F.then(J=>(u=G,J))),P=await Promise.race(L);return D.forEach((F,G)=>{G!==u&&F.cancel()}),P}t.raceCancellablePromises=m;function S(D,u,L){let P;const F=setTimeout(()=>{P?.(void 0),L?.()},u);return Promise.race([D.finally(()=>clearTimeout(F)),new Promise(G=>P=G)])}t.raceTimeout=S;function c(D){return new Promise((u,L)=>{const P=D();N(P)?P.then(u,L):u(P)})}t.asPromise=c;class r{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(u){if(this.activePromise){if(this.queuedPromiseFactory=u,!this.queuedPromise){const L=()=>{this.queuedPromise=null;const P=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,P};this.queuedPromise=new Promise(P=>{this.activePromise.then(L,L).then(P)})}return new Promise((L,P)=>{this.queuedPromise.then(L,P)})}return this.activePromise=u(),new Promise((L,P)=>{this.activePromise.then(F=>{this.activePromise=null,L(F)},F=>{this.activePromise=null,P(F)})})}}t.Throttler=r;class a{constructor(){this.current=Promise.resolve(null)}queue(u){return this.current=this.current.then(()=>u(),()=>u())}}t.Sequencer=a;class e{constructor(){this.promiseMap=new Map}queue(u,L){const F=(this.promiseMap.get(u)??Promise.resolve()).catch(()=>{}).then(L).finally(()=>{this.promiseMap.get(u)===F&&this.promiseMap.delete(u)});return this.promiseMap.set(u,F),F}}t.SequencerByKey=e;const s=(D,u)=>{let L=!0;const P=setTimeout(()=>{L=!1,u()},D);return{isTriggered:()=>L,dispose:()=>{clearTimeout(P),L=!1}}},i=D=>{let u=!0;return queueMicrotask(()=>{u&&(u=!1,D())}),{isTriggered:()=>u,dispose:()=>{u=!1}}};t.MicrotaskDelay=Symbol("MicrotaskDelay");class o{constructor(u){this.defaultDelay=u,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(u,L=this.defaultDelay){this.task=u,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((F,G)=>{this.doResolve=F,this.doReject=G}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const F=this.task;return this.task=null,F()}}));const P=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=L===t.MicrotaskDelay?i(P):s(L,P),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new z.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}t.Delayer=o;class l{constructor(u){this.delayer=new o(u),this.throttler=new r}trigger(u,L){return this.delayer.trigger(()=>this.throttler.queue(u),L)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=l;class g{constructor(){this._isOpen=!1,this._promise=new Promise((u,L)=>{this._completePromise=u})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=g;class w extends g{constructor(u){super(),this._timeout=setTimeout(()=>this.open(),u)}open(){clearTimeout(this._timeout),super.open()}}t.AutoOpenBarrier=w;function E(D,u){return u?new Promise((L,P)=>{const F=setTimeout(()=>{G.dispose(),L()},D),G=u.onCancellationRequested(()=>{clearTimeout(F),G.dispose(),P(new z.CancellationError)})}):b(L=>E(D,L))}t.timeout=E;function U(D,u=0){const L=setTimeout(D,u);return(0,y.toDisposable)(()=>clearTimeout(L))}t.disposableTimeout=U;function h(D){const u=[];let L=0;const P=D.length;function F(){return L<P?D[L++]():null}function G(J){J!=null&&u.push(J);const ee=F();return ee?ee.then(G):Promise.resolve(u)}return Promise.resolve(null).then(G)}t.sequence=h;function C(D,u=P=>!!P,L=null){let P=0;const F=D.length,G=()=>{if(P>=F)return Promise.resolve(L);const J=D[P++];return Promise.resolve(J()).then(re=>u(re)?Promise.resolve(re):G())};return G()}t.first=C;function _(D,u=P=>!!P,L=null){if(D.length===0)return Promise.resolve(L);let P=D.length;const F=()=>{P=-1;for(const G of D)G.cancel?.()};return new Promise((G,J)=>{for(const ee of D)ee.then(re=>{--P>=0&&u(re)?(F(),G(re)):P===0&&G(L)}).catch(re=>{--P>=0&&(F(),J(re))})})}t.firstParallel=_;class d{constructor(u){this._size=0,this.maxDegreeOfParalellism=u,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new W.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(u){return this._size++,new Promise((L,P)=>{this.outstandingPromises.push({factory:u,c:L,e:P}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const u=this.outstandingPromises.shift();this.runningPromises++;const L=u.factory();L.then(u.c,u.e),L.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}t.Limiter=d;class k extends d{constructor(){super(1)}}t.Queue=k;class ${constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const u=new O;return this.drainers.add(u),u.p}isDrained(){for(const[,u]of this.queues)if(u.size>0)return!1;return!0}queueFor(u,L=R.extUri){const P=L.getComparisonKey(u);let F=this.queues.get(P);return F||(F=new k,W.Event.once(F.onDrained)(()=>{F?.dispose(),this.queues.delete(P),this.onDidQueueDrain()}),this.queues.set(P,F)),F}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const u of this.drainers)u.complete();this.drainers.clear()}dispose(){for(const[,u]of this.queues)u.dispose();this.queues.clear(),this.releaseDrainers()}}t.ResourceQueue=$;class Y{constructor(u,L){this._token=-1,typeof u=="function"&&typeof L=="number"&&this.setIfNotSet(u,L)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(u,L){this.cancel(),this._token=setTimeout(()=>{this._token=-1,u()},L)}setIfNotSet(u,L){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,u()},L))}}t.TimeoutTimer=Y;class X{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(u,L){this.cancel(),this._token=setInterval(()=>{u()},L)}}t.IntervalTimer=X;class Z{constructor(u,L){this.timeoutToken=-1,this.runner=u,this.timeout=L,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(u=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,u)}get delay(){return this.timeout}set delay(u){this.timeout=u}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}t.RunOnceScheduler=Z;class A{constructor(u,L){L%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${L}ms is not a multiple of 1000ms.`),this.runner=u,this.timeout=L,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(u=this.timeout){u%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${u}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(u/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}t.ProcessTimeRunOnceScheduler=A;class n extends Z{constructor(u,L){super(u,L),this.units=[]}work(u){this.units.push(u),this.isScheduled()||this.schedule()}doRun(){const u=this.units;this.units=[],this.runner?.(u)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=n;class p extends y.Disposable{constructor(u,L){super(),this.options=u,this.handler=L,this.pendingWork=[],this.throttler=this._register(new y.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(u){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+u.length>this.options.maxBufferedWork)return!1}else if(this.pending+u.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...u),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new Z(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}t.ThrottledWorker=p,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=D=>{(0,j.setTimeout0)(()=>{if(u)return;const L=Date.now()+15;D(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,L-Date.now())}}))});let u=!1;return{dispose(){u||(u=!0)}}}:t.runWhenIdle=(D,u)=>{const L=requestIdleCallback(D,typeof u=="number"?{timeout:u}:void 0);let P=!1;return{dispose(){P||(P=!0,cancelIdleCallback(L))}}}}();class T{constructor(u){this._didRun=!1,this._executor=()=>{try{this._value=u()}catch(L){this._error=L}finally{this._didRun=!0}},this._handle=(0,t.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}t.IdleValue=T;async function f(D,u,L){let P;for(let F=0;F<L;F++)try{return await D()}catch(G){P=G,await E(u)}throw P}t.retry=f;class H{hasPending(u){return this._pending?typeof u=="number"?this._pending.taskId===u:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(u,L,P){return this._pending={taskId:u,cancel:()=>P?.(),promise:L},L.then(()=>this.donePending(u),()=>this.donePending(u)),L}donePending(u){this._pending&&u===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const u=this._next;this._next=void 0,u.run().then(u.promiseResolve,u.promiseReject)}}setNext(u){if(this._next)this._next.run=u;else{let L,P;const F=new Promise((G,J)=>{L=G,P=J});this._next={run:u,promise:F,promiseResolve:L,promiseReject:P}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}t.TaskSequentializer=H;class K{constructor(u,L=()=>Date.now()){this.interval=u,this.nowFn=L,this.lastIncrementTime=0,this.value=0}increment(){const u=this.nowFn();return u-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=u,this.value=0),this.value++,this.value}}t.IntervalCounter=K;class O{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((u,L)=>{this.completeCallback=u,this.errorCallback=L})}complete(u){return new Promise(L=>{this.completeCallback(u),this.resolved=!0,L()})}error(u){return new Promise(L=>{this.errorCallback(u),this.rejected=!0,L()})}cancel(){new Promise(u=>{this.errorCallback(new z.CancellationError),this.rejected=!0,u()})}}t.DeferredPromise=O;var q;(function(D){async function u(P){let F;const G=await Promise.all(P.map(J=>J.then(ee=>ee,ee=>{F||(F=ee)})));if(typeof F<"u")throw F;return G}D.settled=u;function L(P){return new Promise(async(F,G)=>{try{await P(F,G)}catch(J){G(J)}})}D.withAsyncBody=L})(q=t.Promises||(t.Promises={}));var B;(function(D){D[D.Initial=0]="Initial",D[D.DoneOK=1]="DoneOK",D[D.DoneError=2]="DoneError"})(B||(B={}));class V{static fromArray(u){return new V(L=>{L.emitMany(u)})}static fromPromise(u){return new V(async L=>{L.emitMany(await u)})}static fromPromises(u){return new V(async L=>{await Promise.all(u.map(async P=>L.emitOne(await P)))})}static merge(u){return new V(async L=>{await Promise.all(u.map(async P=>{for await(const F of P)L.emitOne(F)}))})}constructor(u){this._state=0,this._results=[],this._error=null,this._onStateChanged=new W.Emitter,queueMicrotask(async()=>{const L={emitOne:P=>this.emitOne(P),emitMany:P=>this.emitMany(P),reject:P=>this.reject(P)};try{await Promise.resolve(u(L)),this.resolve()}catch(P){this.reject(P)}finally{L.emitOne=void 0,L.emitMany=void 0,L.reject=void 0}})}[Symbol.asyncIterator](){let u=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(u<this._results.length)return{done:!1,value:this._results[u++]};if(this._state===1)return{done:!0,value:void 0};await W.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(u,L){return new V(async P=>{for await(const F of u)P.emitOne(L(F))})}map(u){return V.map(this,u)}static filter(u,L){return new V(async P=>{for await(const F of u)L(F)&&P.emitOne(F)})}filter(u){return V.filter(this,u)}static coalesce(u){return V.filter(u,L=>!!L)}coalesce(){return V.coalesce(this)}static async toPromise(u){const L=[];for await(const P of u)L.push(P);return L}toPromise(){return V.toPromise(this)}emitOne(u){this._state===0&&(this._results.push(u),this._onStateChanged.fire())}emitMany(u){this._state===0&&(this._results=this._results.concat(u),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(u){this._state===0&&(this._state=2,this._error=u,this._onStateChanged.fire())}}t.AsyncIterableObject=V,V.EMPTY=V.fromArray([]);class Q extends V{constructor(u,L){super(L),this._source=u}cancel(){this._source.cancel()}}t.CancelableAsyncIterableObject=Q;function x(D){const u=new M.CancellationTokenSource,L=D(u.token);return new Q(u,async P=>{const F=u.token.onCancellationRequested(()=>{F.dispose(),u.dispose(),P.reject(new z.CancellationError)});try{for await(const G of L){if(u.token.isCancellationRequested)return;P.emitOne(G)}F.dispose(),u.dispose()}catch(G){F.dispose(),u.dispose(),P.reject(G)}})}t.createCancelableAsyncIterable=x}),define(ne[21],ie([0,1,32,19,7,12,4,2,3]),function(te,t,M,z,W,y,R,j,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function b(){return Object.create(null)}t.getEmptyExpression=b,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const I="[/\\\\]",v="[^/\\\\]",m=/\//g;function S(O,q){switch(O){case 0:return"";case 1:return`${v}*?`;default:return`(?:${I}|${v}+${I}${q?`|${I}${v}+`:""})*?`}}function c(O,q){if(!O)return[];const B=[];let V=!1,Q=!1,x="";for(const D of O){switch(D){case q:if(!V&&!Q){B.push(x),x="";continue}break;case"{":V=!0;break;case"}":V=!1;break;case"[":Q=!0;break;case"]":Q=!1;break}x+=D}return x&&B.push(x),B}t.splitGlobAware=c;function r(O){if(!O)return"";let q="";const B=c(O,t.GLOB_SPLIT);if(B.every(V=>V===t.GLOBSTAR))q=".*";else{let V=!1;B.forEach((Q,x)=>{if(Q===t.GLOBSTAR){if(V)return;q+=S(2,x===B.length-1)}else{let D=!1,u="",L=!1,P="";for(const F of Q){if(F!=="}"&&D){u+=F;continue}if(L&&(F!=="]"||!P)){let G;F==="-"?G=F:(F==="^"||F==="!")&&!P?G="^":F===t.GLOB_SPLIT?G="":G=(0,N.escapeRegExpCharacters)(F),P+=G;continue}switch(F){case"{":D=!0;continue;case"[":L=!0;continue;case"}":{q+=`(?:${c(u,",").map(ee=>r(ee)).join("|")})`,D=!1,u="";break}case"]":{q+="["+P+"]",L=!1,P="";break}case"?":q+=v;continue;case"*":q+=S(1);continue;default:q+=(0,N.escapeRegExpCharacters)(F)}}x<B.length-1&&(B[x+1]!==t.GLOBSTAR||x+2<B.length)&&(q+=I)}V=Q===t.GLOBSTAR})}return q}const a=/^\*\*\/\*\.[\w\.-]+$/,e=/^\*\*\/([\w\.-]+)\/?$/,s=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,i=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,o=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,g=new y.LRUCache(1e4),w=function(){return!1},E=function(){return null};function U(O,q){if(!O)return E;let B;typeof O!="string"?B=O.pattern:B=O,B=B.trim();const V=`${B}_${!!q.trimForExclusions}`;let Q=g.get(V);if(Q)return h(Q,O);let x;return a.test(B)?Q=_(B.substr(4),B):(x=e.exec(C(B,q)))?Q=d(x[1],B):(q.trimForExclusions?i:s).test(B)?Q=k(B,q):(x=o.exec(C(B,q)))?Q=$(x[1].substr(1),B,!0):(x=l.exec(C(B,q)))?Q=$(x[1],B,!1):Q=Y(B),g.set(V,Q),h(Q,O)}function h(O,q){if(typeof q=="string")return O;const B=function(V,Q){return(0,W.isEqualOrParent)(V,q.base,!j.isLinux)?O(V.substr(q.base.length+1),Q):null};return B.allBasenames=O.allBasenames,B.allPaths=O.allPaths,B.basenames=O.basenames,B.patterns=O.patterns,B}function C(O,q){return q.trimForExclusions&&O.endsWith("/**")?O.substr(0,O.length-2):O}function _(O,q){return function(B,V){return typeof B=="string"&&B.endsWith(O)?q:null}}function d(O,q){const B=`/${O}`,V=`\\${O}`,Q=function(D,u){return typeof D!="string"?null:u?u===O?q:null:D===O||D.endsWith(B)||D.endsWith(V)?q:null},x=[O];return Q.basenames=x,Q.patterns=[q],Q.allBasenames=x,Q}function k(O,q){const B=H(O.slice(1,-1).split(",").map(u=>U(u,q)).filter(u=>u!==E),O),V=B.length;if(!V)return E;if(V===1)return B[0];const Q=function(u,L){for(let P=0,F=B.length;P<F;P++)if(B[P](u,L))return O;return null},x=B.find(u=>!!u.allBasenames);x&&(Q.allBasenames=x.allBasenames);const D=B.reduce((u,L)=>L.allPaths?u.concat(L.allPaths):u,[]);return D.length&&(Q.allPaths=D),Q}function $(O,q,B){const V=R.sep===R.posix.sep,Q=V?O:O.replace(m,R.sep),x=R.sep+Q,D=R.posix.sep+O;let u;return B?u=function(L,P){return typeof L=="string"&&(L===Q||L.endsWith(x)||!V&&(L===O||L.endsWith(D)))?q:null}:u=function(L,P){return typeof L=="string"&&(L===Q||!V&&L===O)?q:null},u.allPaths=[(B?"*/":"./")+O],u}function Y(O){try{const q=new RegExp(`^${r(O)}$`);return function(B){return q.lastIndex=0,typeof B=="string"&&q.test(B)?O:null}}catch{return E}}function X(O,q,B){return!O||typeof q!="string"?!1:Z(O)(q,void 0,B)}t.match=X;function Z(O,q={}){if(!O)return w;if(typeof O=="string"||A(O)){const B=U(O,q);if(B===E)return w;const V=function(Q,x){return!!B(Q,x)};return B.allBasenames&&(V.allBasenames=B.allBasenames),B.allPaths&&(V.allPaths=B.allPaths),V}return T(O,q)}t.parse=Z;function A(O){const q=O;return q?typeof q.base=="string"&&typeof q.pattern=="string":!1}t.isRelativePattern=A;function n(O){return O.allBasenames||[]}t.getBasenameTerms=n;function p(O){return O.allPaths||[]}t.getPathTerms=p;function T(O,q){const B=H(Object.getOwnPropertyNames(O).map(u=>f(u,O[u],q)).filter(u=>u!==E)),V=B.length;if(!V)return E;if(!B.some(u=>!!u.requiresSiblings)){if(V===1)return B[0];const u=function(F,G){let J;for(let ee=0,re=B.length;ee<re;ee++){const se=B[ee](F,G);if(typeof se=="string")return se;(0,z.isThenable)(se)&&(J||(J=[]),J.push(se))}return J?(async()=>{for(const ee of J){const re=await ee;if(typeof re=="string")return re}return null})():null},L=B.find(F=>!!F.allBasenames);L&&(u.allBasenames=L.allBasenames);const P=B.reduce((F,G)=>G.allPaths?F.concat(G.allPaths):F,[]);return P.length&&(u.allPaths=P),u}const Q=function(u,L,P){let F,G;for(let J=0,ee=B.length;J<ee;J++){const re=B[J];re.requiresSiblings&&P&&(L||(L=(0,R.basename)(u)),F||(F=L.substr(0,L.length-(0,R.extname)(u).length)));const se=re(u,L,F,P);if(typeof se=="string")return se;(0,z.isThenable)(se)&&(G||(G=[]),G.push(se))}return G?(async()=>{for(const J of G){const ee=await J;if(typeof ee=="string")return ee}return null})():null},x=B.find(u=>!!u.allBasenames);x&&(Q.allBasenames=x.allBasenames);const D=B.reduce((u,L)=>L.allPaths?u.concat(L.allPaths):u,[]);return D.length&&(Q.allPaths=D),Q}function f(O,q,B){if(q===!1)return E;const V=U(O,B);if(V===E)return E;if(typeof q=="boolean")return V;if(q){const Q=q.when;if(typeof Q=="string"){const x=(D,u,L,P)=>{if(!P||!V(D,u))return null;const F=Q.replace("$(basename)",L),G=P(F);return(0,z.isThenable)(G)?G.then(J=>J?O:null):G?O:null};return x.requiresSiblings=!0,x}}return V}function H(O,q){const B=O.filter(u=>!!u.basenames);if(B.length<2)return O;const V=B.reduce((u,L)=>{const P=L.basenames;return P?u.concat(P):u},[]);let Q;if(q){Q=[];for(let u=0,L=V.length;u<L;u++)Q.push(q)}else Q=B.reduce((u,L)=>{const P=L.patterns;return P?u.concat(P):u},[]);const x=function(u,L){if(typeof u!="string")return null;if(!L){let F;for(F=u.length;F>0;F--){const G=u.charCodeAt(F-1);if(G===47||G===92)break}L=u.substr(F)}const P=V.indexOf(L);return P!==-1?Q[P]:null};x.basenames=V,x.patterns=Q,x.allBasenames=V;const D=O.filter(u=>!u.basenames);return D.push(x),D}function K(O,q){return(0,M.equals)(O,q,(B,V)=>typeof B=="string"&&typeof V=="string"?B===V:typeof B!="string"&&typeof V!="string"?B.base===V.base&&B.pattern===V.pattern:!1)}t.patternsEquals=K}),define(ne[22],ie([0,1,3,2,5]),function(te,t,M,z,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringBuilder=t.decodeUTF16LE=t.getPlatformTextDecoder=void 0;let y;function R(){return y||(y=new TextDecoder("UTF-16LE")),y}let j;function N(){return j||(j=new TextDecoder("UTF-16BE")),j}let b;function I(){return b||(b=z.isLittleEndian()?R():N()),b}t.getPlatformTextDecoder=I;function v(c,r,a){const e=new Uint16Array(c.buffer,r,a);return a>0&&(e[0]===65279||e[0]===65534)?m(c,r,a):R().decode(e)}t.decodeUTF16LE=v;function m(c,r,a){const e=[];let s=0;for(let i=0;i<a;i++){const o=W.readUInt16LE(c,r);r+=2,e[s++]=String.fromCharCode(o)}return e.join("")}class S{constructor(r){this._capacity=r|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const r=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return I().decode(r)}_flushBuffer(){const r=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[r]:this._completedStrings[this._completedStrings.length]=r}appendCharCode(r){const a=this._capacity-this._bufferLength;a<=1&&(a===0||M.isHighSurrogate(r))&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendASCIICharCode(r){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=r}appendString(r){const a=r.length;if(this._bufferLength+a>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=r;return}for(let e=0;e<a;e++)this._buffer[this._bufferLength++]=r.charCodeAt(e)}}t.StringBuilder=S}),define(ne[23],ie([0,1,5,22]),function(te,t,M,z){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressConsecutiveTextChanges=t.TextChange=void 0;function W(N){return N.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class y{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(b,I,v,m){this.oldPosition=b,this.oldText=I,this.newPosition=v,this.newText=m}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${W(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${W(this.oldText)}")`:`(replace@${this.oldPosition} "${W(this.oldText)}" with "${W(this.newText)}")`}static _writeStringSize(b){return 4+2*b.length}static _writeString(b,I,v){const m=I.length;M.writeUInt32BE(b,m,v),v+=4;for(let S=0;S<m;S++)M.writeUInt16LE(b,I.charCodeAt(S),v),v+=2;return v}static _readString(b,I){const v=M.readUInt32BE(b,I);return I+=4,(0,z.decodeUTF16LE)(b,I,v)}writeSize(){return 4+4+y._writeStringSize(this.oldText)+y._writeStringSize(this.newText)}write(b,I){return M.writeUInt32BE(b,this.oldPosition,I),I+=4,M.writeUInt32BE(b,this.newPosition,I),I+=4,I=y._writeString(b,this.oldText,I),I=y._writeString(b,this.newText,I),I}static read(b,I,v){const m=M.readUInt32BE(b,I);I+=4;const S=M.readUInt32BE(b,I);I+=4;const c=y._readString(b,I);I+=y._writeStringSize(c);const r=y._readString(b,I);return I+=y._writeStringSize(r),v.push(new y(m,c,S,r)),I}}t.TextChange=y;function R(N,b){return N===null||N.length===0?b:new j(N,b).compress()}t.compressConsecutiveTextChanges=R;class j{constructor(b,I){this._prevEdits=b,this._currEdits=I,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let b=0,I=0,v=this._getPrev(b),m=this._getCurr(I);for(;b<this._prevLen||I<this._currLen;){if(v===null){this._acceptCurr(m),m=this._getCurr(++I);continue}if(m===null){this._acceptPrev(v),v=this._getPrev(++b);continue}if(m.oldEnd<=v.newPosition){this._acceptCurr(m),m=this._getCurr(++I);continue}if(v.newEnd<=m.oldPosition){this._acceptPrev(v),v=this._getPrev(++b);continue}if(m.oldPosition<v.newPosition){const[e,s]=j._splitCurr(m,v.newPosition-m.oldPosition);this._acceptCurr(e),m=s;continue}if(v.newPosition<m.oldPosition){const[e,s]=j._splitPrev(v,m.oldPosition-v.newPosition);this._acceptPrev(e),v=s;continue}let r,a;if(m.oldEnd===v.newEnd)r=v,a=m,v=this._getPrev(++b),m=this._getCurr(++I);else if(m.oldEnd<v.newEnd){const[e,s]=j._splitPrev(v,m.oldLength);r=e,a=m,v=s,m=this._getCurr(++I)}else{const[e,s]=j._splitCurr(m,v.newLength);r=v,a=e,v=this._getPrev(++b),m=s}this._result[this._resultLen++]=new y(r.oldPosition,r.oldText,a.newPosition,a.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=a.newLength-a.oldLength}const S=j._merge(this._result);return j._removeNoOps(S)}_acceptCurr(b){this._result[this._resultLen++]=j._rebaseCurr(this._prevDeltaOffset,b),this._currDeltaOffset+=b.newLength-b.oldLength}_getCurr(b){return b<this._currLen?this._currEdits[b]:null}_acceptPrev(b){this._result[this._resultLen++]=j._rebasePrev(this._currDeltaOffset,b),this._prevDeltaOffset+=b.newLength-b.oldLength}_getPrev(b){return b<this._prevLen?this._prevEdits[b]:null}static _rebaseCurr(b,I){return new y(I.oldPosition-b,I.oldText,I.newPosition,I.newText)}static _rebasePrev(b,I){return new y(I.oldPosition,I.oldText,I.newPosition+b,I.newText)}static _splitPrev(b,I){const v=b.newText.substr(0,I),m=b.newText.substr(I);return[new y(b.oldPosition,b.oldText,b.newPosition,v),new y(b.oldEnd,"",b.newPosition+I,m)]}static _splitCurr(b,I){const v=b.oldText.substr(0,I),m=b.oldText.substr(I);return[new y(b.oldPosition,v,b.newPosition,b.newText),new y(b.oldPosition+I,m,b.newEnd,"")]}static _merge(b){if(b.length===0)return b;const I=[];let v=0,m=b[0];for(let S=1;S<b.length;S++){const c=b[S];m.oldEnd===c.oldPosition?m=new y(m.oldPosition,m.oldText+c.oldText,m.newPosition,m.newText+c.newText):(I[v++]=m,m=c)}return I[v++]=m,I}static _removeNoOps(b){if(b.length===0)return b;const I=[];let v=0;for(let m=0;m<b.length;m++){const S=b[m];S.oldText!==S.newText&&(I[v++]=S)}return I}}}),define(ne[10],ie([0,1,33,11,24,16,34]),function(te,t,M,z,W,y,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeBase=t.StringBuffer=t.Piece=t.createLineStarts=t.createLineStartsFast=t.LineStarts=t.createUintArray=t.AverageBufferSize=void 0,t.AverageBufferSize=65535;function j(a){let e;return a[a.length-1]<65536?e=new Uint16Array(a.length):e=new Uint32Array(a.length),e.set(a,0),e}t.createUintArray=j;class N{constructor(e,s,i,o,l){this.lineStarts=e,this.cr=s,this.lf=i,this.crlf=o,this.isBasicASCII=l}}t.LineStarts=N;function b(a,e=!0){const s=[0];let i=1;for(let o=0,l=a.length;o<l;o++){const g=a.charCodeAt(o);g===13?o+1<l&&a.charCodeAt(o+1)===10?(s[i++]=o+2,o++):s[i++]=o+1:g===10&&(s[i++]=o+1)}return e?j(s):s}t.createLineStartsFast=b;function I(a,e){a.length=0,a[0]=0;let s=1,i=0,o=0,l=0,g=!0;for(let E=0,U=e.length;E<U;E++){const h=e.charCodeAt(E);h===13?E+1<U&&e.charCodeAt(E+1)===10?(l++,a[s++]=E+2,E++):(i++,a[s++]=E+1):h===10?(o++,a[s++]=E+1):g&&h!==9&&(h<32||h>126)&&(g=!1)}const w=new N(j(a),i,o,l,g);return a.length=0,w}t.createLineStarts=I;class v{constructor(e,s,i,o,l){this.bufferIndex=e,this.start=s,this.end=i,this.lineFeedCnt=o,this.length=l}}t.Piece=v;class m{constructor(e,s){this.buffer=e,this.lineStarts=s}}t.StringBuffer=m;class S{constructor(e,s){this._pieces=[],this._tree=e,this._BOM=s,this._index=0,e.root!==y.SENTINEL&&e.iterate(e.root,i=>(i!==y.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class c{constructor(e){this._limit=e,this._cache=[]}get(e){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let s=!1;const i=this._cache;for(let o=0;o<i.length;o++){const l=i[o];if(l.node.parent===null||l.nodeStartOffset>=e){i[o]=null,s=!0;continue}}if(s){const o=[];for(const l of i)l!==null&&o.push(l);this._cache=o}}}class r{constructor(e,s,i){this.create(e,s,i)}create(e,s,i){this._buffers=[new m("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=y.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=s,this._EOLLength=s.length,this._EOLNormalized=i;let o=null;for(let l=0,g=e.length;l<g;l++)if(e[l].buffer.length>0){e[l].lineStarts||(e[l].lineStarts=b(e[l].buffer));const w=new v(l+1,{line:0,column:0},{line:e[l].lineStarts.length-1,column:e[l].buffer.length-e[l].lineStarts[e[l].lineStarts.length-1]},e[l].lineStarts.length-1,e[l].buffer.length);this._buffers.push(e[l]),o=this.rbInsertRight(o,w)}this._searchCache=new c(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const s=t.AverageBufferSize,i=s-Math.floor(s/3),o=i*2;let l="",g=0;const w=[];if(this.iterate(this.root,E=>{const U=this.getNodeContent(E),h=U.length;if(g<=i||g+h<o)return l+=U,g+=h,!0;const C=l.replace(/\r\n|\r|\n/g,e);return w.push(new m(C,b(C))),l=U,g=h,!0}),g>0){const E=l.replace(/\r\n|\r|\n/g,e);w.push(new m(E,b(E)))}this.create(w,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new S(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;const s=0;return this.iterate(this.root,o=>{if(o===y.SENTINEL)return!0;const l=this.getNodeContent(o),g=l.length,w=e.nodeAt(s),E=e.nodeAt(s+g),U=e.getValueInRange2(w,E);return l===U})}getOffsetAt(e,s){let i=0,o=this.root;for(;o!==y.SENTINEL;)if(o.left!==y.SENTINEL&&o.lf_left+1>=e)o=o.left;else{if(o.lf_left+o.piece.lineFeedCnt+1>=e)return i+=o.size_left,i+=this.getAccumulatedValue(o,e-o.lf_left-2)+s-1;e-=o.lf_left+o.piece.lineFeedCnt,i+=o.size_left+o.piece.length,o=o.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let s=this.root,i=0;const o=e;for(;s!==y.SENTINEL;)if(s.size_left!==0&&s.size_left>=e)s=s.left;else if(s.size_left+s.piece.length>=e){const l=this.getIndexOf(s,e-s.size_left);if(i+=s.lf_left+l.index,l.index===0){const g=this.getOffsetAt(i+1,1),w=o-g;return new M.Position(i+1,w+1)}return new M.Position(i+1,l.remainder+1)}else if(e-=s.size_left+s.piece.length,i+=s.lf_left+s.piece.lineFeedCnt,s.right===y.SENTINEL){const l=this.getOffsetAt(i+1,1),g=o-e-l;return new M.Position(i+1,g+1)}else s=s.right;return new M.Position(1,1)}getValueInRange(e,s){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),o=this.nodeAt2(e.endLineNumber,e.endColumn),l=this.getValueInRange2(i,o);return s?s!==this._EOL||!this._EOLNormalized?l.replace(/\r\n|\r|\n/g,s):s===this.getEOL()&&this._EOLNormalized?l:l.replace(/\r\n|\r|\n/g,s):l}getValueInRange2(e,s){if(e.node===s.node){const w=e.node,E=this._buffers[w.piece.bufferIndex].buffer,U=this.offsetInBuffer(w.piece.bufferIndex,w.piece.start);return E.substring(U+e.remainder,U+s.remainder)}let i=e.node;const o=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let g=o.substring(l+e.remainder,l+i.piece.length);for(i=i.next();i!==y.SENTINEL;){const w=this._buffers[i.piece.bufferIndex].buffer,E=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===s.node){g+=w.substring(E,E+s.remainder);break}else g+=w.substr(E,i.piece.length);i=i.next()}return g}getLinesContent(){const e=[];let s=0,i="",o=!1;return this.iterate(this.root,l=>{if(l===y.SENTINEL)return!0;const g=l.piece;let w=g.length;if(w===0)return!0;const E=this._buffers[g.bufferIndex].buffer,U=this._buffers[g.bufferIndex].lineStarts,h=g.start.line,C=g.end.line;let _=U[h]+g.start.column;if(o&&(E.charCodeAt(_)===10&&(_++,w--),e[s++]=i,i="",o=!1,w===0))return!0;if(h===C)return!this._EOLNormalized&&E.charCodeAt(_+w-1)===13?(o=!0,i+=E.substr(_,w-1)):i+=E.substr(_,w),!0;i+=this._EOLNormalized?E.substring(_,Math.max(_,U[h+1]-this._EOLLength)):E.substring(_,U[h+1]).replace(/(\r\n|\r|\n)$/,""),e[s++]=i;for(let d=h+1;d<C;d++)i=this._EOLNormalized?E.substring(U[d],U[d+1]-this._EOLLength):E.substring(U[d],U[d+1]).replace(/(\r\n|\r|\n)$/,""),e[s++]=i;return!this._EOLNormalized&&E.charCodeAt(U[C]+g.end.column-1)===13?(o=!0,g.end.column===0?s--:i=E.substr(U[C],g.end.column-1)):i=E.substr(U[C],g.end.column),!0}),o&&(e[s++]=i,i=""),e[s++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const s=e.node.next();if(!s)return 0;const i=this._buffers[s.piece.bufferIndex],o=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return i.buffer.charCodeAt(o)}else{const s=this._buffers[e.node.piece.bufferIndex],o=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return s.buffer.charCodeAt(o)}}getLineCharCode(e,s){const i=this.nodeAt2(e,s+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const s=this.getOffsetAt(e,1);return this.getLength()-s}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const s=this.nodeAt(e);return this._getCharCode(s)}findMatchesInNode(e,s,i,o,l,g,w,E,U,h,C){const _=this._buffers[e.piece.bufferIndex],d=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),k=this.offsetInBuffer(e.piece.bufferIndex,l),$=this.offsetInBuffer(e.piece.bufferIndex,g);let Y;const X={line:0,column:0};let Z,A;s._wordSeparators?(Z=_.buffer.substring(k,$),A=n=>n+k,s.reset(0)):(Z=_.buffer,A=n=>n,s.reset(k));do if(Y=s.next(Z),Y){if(A(Y.index)>=$)return h;this.positionInBuffer(e,A(Y.index)-d,X);const n=this.getLineFeedCnt(e.piece.bufferIndex,l,X),p=X.line===l.line?X.column-l.column+o:X.column+1,T=p+Y[0].length;if(C[h++]=(0,R.createFindMatch)(new z.Range(i+n,p,i+n,T),Y,E),A(Y.index)+Y[0].length>=$||h>=U)return h}while(Y);return h}findMatchesLineByLine(e,s,i,o){const l=[];let g=0;const w=new R.Searcher(s.wordSeparators,s.regex);let E=this.nodeAt2(e.startLineNumber,e.startColumn);if(E===null)return[];const U=this.nodeAt2(e.endLineNumber,e.endColumn);if(U===null)return[];let h=this.positionInBuffer(E.node,E.remainder);const C=this.positionInBuffer(U.node,U.remainder);if(E.node===U.node)return this.findMatchesInNode(E.node,w,e.startLineNumber,e.startColumn,h,C,s,i,o,g,l),l;let _=e.startLineNumber,d=E.node;for(;d!==U.node;){const $=this.getLineFeedCnt(d.piece.bufferIndex,h,d.piece.end);if($>=1){const X=this._buffers[d.piece.bufferIndex].lineStarts,Z=this.offsetInBuffer(d.piece.bufferIndex,d.piece.start),A=X[h.line+$],n=_===e.startLineNumber?e.startColumn:1;if(g=this.findMatchesInNode(d,w,_,n,h,this.positionInBuffer(d,A-Z),s,i,o,g,l),g>=o)return l;_+=$}const Y=_===e.startLineNumber?e.startColumn-1:0;if(_===e.endLineNumber){const X=this.getLineContent(_).substring(Y,e.endColumn-1);return g=this._findMatchesInLine(s,w,X,e.endLineNumber,Y,g,l,i,o),l}if(g=this._findMatchesInLine(s,w,this.getLineContent(_).substr(Y),_,Y,g,l,i,o),g>=o)return l;_++,E=this.nodeAt2(_,1),d=E.node,h=this.positionInBuffer(E.node,E.remainder)}if(_===e.endLineNumber){const $=_===e.startLineNumber?e.startColumn-1:0,Y=this.getLineContent(_).substring($,e.endColumn-1);return g=this._findMatchesInLine(s,w,Y,e.endLineNumber,$,g,l,i,o),l}const k=_===e.startLineNumber?e.startColumn:1;return g=this.findMatchesInNode(U.node,w,_,k,h,C,s,i,o,g,l),l}_findMatchesInLine(e,s,i,o,l,g,w,E,U){const h=e.wordSeparators;if(!E&&e.simpleSearch){const _=e.simpleSearch,d=_.length,k=i.length;let $=-d;for(;($=i.indexOf(_,$+d))!==-1;)if((!h||(0,R.isValidMatch)(h,i,k,$,d))&&(w[g++]=new W.FindMatch(new z.Range(o,$+1+l,o,$+1+d+l),null),g>=U))return g;return g}let C;s.reset(0);do if(C=s.next(i),C&&(w[g++]=(0,R.createFindMatch)(new z.Range(o,C.index+1+l,o,C.index+1+C[0].length+l),C,E),g>=U))return g;while(C);return g}insert(e,s,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==y.SENTINEL){const{node:o,remainder:l,nodeStartOffset:g}=this.nodeAt(e),w=o.piece,E=w.bufferIndex,U=this.positionInBuffer(o,l);if(o.piece.bufferIndex===0&&w.end.line===this._lastChangeBufferPos.line&&w.end.column===this._lastChangeBufferPos.column&&g+w.length===e&&s.length<t.AverageBufferSize){this.appendToNode(o,s),this.computeBufferMetadata();return}if(g===e)this.insertContentToNodeLeft(s,o),this._searchCache.validate(e);else if(g+o.piece.length>e){const h=[];let C=new v(w.bufferIndex,U,w.end,this.getLineFeedCnt(w.bufferIndex,U,w.end),this.offsetInBuffer(E,w.end)-this.offsetInBuffer(E,U));if(this.shouldCheckCRLF()&&this.endWithCR(s)&&this.nodeCharCodeAt(o,l)===10){const $={line:C.start.line+1,column:0};C=new v(C.bufferIndex,$,C.end,this.getLineFeedCnt(C.bufferIndex,$,C.end),C.length-1),s+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(s))if(this.nodeCharCodeAt(o,l-1)===13){const $=this.positionInBuffer(o,l-1);this.deleteNodeTail(o,$),s="\r"+s,o.piece.length===0&&h.push(o)}else this.deleteNodeTail(o,U);else this.deleteNodeTail(o,U);const _=this.createNewPieces(s);C.length>0&&this.rbInsertRight(o,C);let d=o;for(let k=0;k<_.length;k++)d=this.rbInsertRight(d,_[k]);this.deleteNodes(h)}else this.insertContentToNodeRight(s,o)}else{const o=this.createNewPieces(s);let l=this.rbInsertLeft(null,o[0]);for(let g=1;g<o.length;g++)l=this.rbInsertRight(l,o[g])}this.computeBufferMetadata()}delete(e,s){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",s<=0||this.root===y.SENTINEL)return;const i=this.nodeAt(e),o=this.nodeAt(e+s),l=i.node,g=o.node;if(l===g){const _=this.positionInBuffer(l,i.remainder),d=this.positionInBuffer(l,o.remainder);if(i.nodeStartOffset===e){if(s===l.piece.length){const k=l.next();(0,y.rbDelete)(this,l),this.validateCRLFWithPrevNode(k),this.computeBufferMetadata();return}this.deleteNodeHead(l,d),this._searchCache.validate(e),this.validateCRLFWithPrevNode(l),this.computeBufferMetadata();return}if(i.nodeStartOffset+l.piece.length===e+s){this.deleteNodeTail(l,_),this.validateCRLFWithNextNode(l),this.computeBufferMetadata();return}this.shrinkNode(l,_,d),this.computeBufferMetadata();return}const w=[],E=this.positionInBuffer(l,i.remainder);this.deleteNodeTail(l,E),this._searchCache.validate(e),l.piece.length===0&&w.push(l);const U=this.positionInBuffer(g,o.remainder);this.deleteNodeHead(g,U),g.piece.length===0&&w.push(g);const h=l.next();for(let _=h;_!==y.SENTINEL&&_!==g;_=_.next())w.push(_);const C=l.piece.length===0?l.prev():l;this.deleteNodes(w),this.validateCRLFWithNextNode(C),this.computeBufferMetadata()}insertContentToNodeLeft(e,s){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(s)){const g=s.piece,w={line:g.start.line+1,column:0},E=new v(g.bufferIndex,w,g.end,this.getLineFeedCnt(g.bufferIndex,w,g.end),g.length-1);s.piece=E,e+=`
`,(0,y.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s)}const o=this.createNewPieces(e);let l=this.rbInsertLeft(s,o[o.length-1]);for(let g=o.length-2;g>=0;g--)l=this.rbInsertLeft(l,o[g]);this.validateCRLFWithPrevNode(l),this.deleteNodes(i)}insertContentToNodeRight(e,s){this.adjustCarriageReturnFromNext(e,s)&&(e+=`
`);const i=this.createNewPieces(e),o=this.rbInsertRight(s,i[0]);let l=o;for(let g=1;g<i.length;g++)l=this.rbInsertRight(l,i[g]);this.validateCRLFWithPrevNode(o)}positionInBuffer(e,s,i){const o=e.piece,l=e.piece.bufferIndex,g=this._buffers[l].lineStarts,E=g[o.start.line]+o.start.column+s;let U=o.start.line,h=o.end.line,C=0,_=0,d=0;for(;U<=h&&(C=U+(h-U)/2|0,d=g[C],C!==h);)if(_=g[C+1],E<d)h=C-1;else if(E>=_)U=C+1;else break;return i?(i.line=C,i.column=E-d,null):{line:C,column:E-d}}getLineFeedCnt(e,s,i){if(i.column===0)return i.line-s.line;const o=this._buffers[e].lineStarts;if(i.line===o.length-1)return i.line-s.line;const l=o[i.line+1],g=o[i.line]+i.column;if(l>g+1)return i.line-s.line;const w=g-1;return this._buffers[e].buffer.charCodeAt(w)===13?i.line-s.line+1:i.line-s.line}offsetInBuffer(e,s){return this._buffers[e].lineStarts[s.line]+s.column}deleteNodes(e){for(let s=0;s<e.length;s++)(0,y.rbDelete)(this,e[s])}createNewPieces(e){if(e.length>t.AverageBufferSize){const h=[];for(;e.length>t.AverageBufferSize;){const _=e.charCodeAt(t.AverageBufferSize-1);let d;_===13||_>=55296&&_<=56319?(d=e.substring(0,t.AverageBufferSize-1),e=e.substring(t.AverageBufferSize-1)):(d=e.substring(0,t.AverageBufferSize),e=e.substring(t.AverageBufferSize));const k=b(d);h.push(new v(this._buffers.length,{line:0,column:0},{line:k.length-1,column:d.length-k[k.length-1]},k.length-1,d.length)),this._buffers.push(new m(d,k))}const C=b(e);return h.push(new v(this._buffers.length,{line:0,column:0},{line:C.length-1,column:e.length-C[C.length-1]},C.length-1,e.length)),this._buffers.push(new m(e,C)),h}let s=this._buffers[0].buffer.length;const i=b(e,!1);let o=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},o=this._lastChangeBufferPos;for(let h=0;h<i.length;h++)i[h]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,s+=1}else{if(s!==0)for(let h=0;h<i.length;h++)i[h]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const l=this._buffers[0].buffer.length,g=this._buffers[0].lineStarts.length-1,w=l-this._buffers[0].lineStarts[g],E={line:g,column:w},U=new v(0,o,E,this.getLineFeedCnt(0,o,E),l-s);return this._lastChangeBufferPos=E,[U]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,s=0){let i=this.root,o="";const l=this._searchCache.get2(e);if(l){i=l.node;const g=this.getAccumulatedValue(i,e-l.nodeStartLineNumber-1),w=this._buffers[i.piece.bufferIndex].buffer,E=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(l.nodeStartLineNumber+i.piece.lineFeedCnt===e)o=w.substring(E+g,E+i.piece.length);else{const U=this.getAccumulatedValue(i,e-l.nodeStartLineNumber);return w.substring(E+g,E+U-s)}}else{let g=0;const w=e;for(;i!==y.SENTINEL;)if(i.left!==y.SENTINEL&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const E=this.getAccumulatedValue(i,e-i.lf_left-2),U=this.getAccumulatedValue(i,e-i.lf_left-1),h=this._buffers[i.piece.bufferIndex].buffer,C=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return g+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:g,nodeStartLineNumber:w-(e-1-i.lf_left)}),h.substring(C+E,C+U-s)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const E=this.getAccumulatedValue(i,e-i.lf_left-2),U=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);o=U.substring(h+E,h+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,g+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==y.SENTINEL;){const g=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const w=this.getAccumulatedValue(i,0),E=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=g.substring(E,E+w-s),o}else{const w=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);o+=g.substr(w,i.piece.length)}i=i.next()}return o}computeBufferMetadata(){let e=this.root,s=1,i=0;for(;e!==y.SENTINEL;)s+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=s,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,s){const i=e.piece,o=this.positionInBuffer(e,s),l=o.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===s){const g=this.getLineFeedCnt(e.piece.bufferIndex,i.start,o);if(g!==l)return{index:g,remainder:0}}return{index:l,remainder:o.column}}getAccumulatedValue(e,s){if(s<0)return 0;const i=e.piece,o=this._buffers[i.bufferIndex].lineStarts,l=i.start.line+s+1;return l>i.end.line?o[i.end.line]+i.end.column-o[i.start.line]-i.start.column:o[l]-o[i.start.line]-i.start.column}deleteNodeTail(e,s){const i=e.piece,o=i.lineFeedCnt,l=this.offsetInBuffer(i.bufferIndex,i.end),g=s,w=this.offsetInBuffer(i.bufferIndex,g),E=this.getLineFeedCnt(i.bufferIndex,i.start,g),U=E-o,h=w-l,C=i.length+h;e.piece=new v(i.bufferIndex,i.start,g,E,C),(0,y.updateTreeMetadata)(this,e,h,U)}deleteNodeHead(e,s){const i=e.piece,o=i.lineFeedCnt,l=this.offsetInBuffer(i.bufferIndex,i.start),g=s,w=this.getLineFeedCnt(i.bufferIndex,g,i.end),E=this.offsetInBuffer(i.bufferIndex,g),U=w-o,h=l-E,C=i.length+h;e.piece=new v(i.bufferIndex,g,i.end,w,C),(0,y.updateTreeMetadata)(this,e,h,U)}shrinkNode(e,s,i){const o=e.piece,l=o.start,g=o.end,w=o.length,E=o.lineFeedCnt,U=s,h=this.getLineFeedCnt(o.bufferIndex,o.start,U),C=this.offsetInBuffer(o.bufferIndex,s)-this.offsetInBuffer(o.bufferIndex,l);e.piece=new v(o.bufferIndex,o.start,U,h,C),(0,y.updateTreeMetadata)(this,e,C-w,h-E);const _=new v(o.bufferIndex,i,g,this.getLineFeedCnt(o.bufferIndex,i,g),this.offsetInBuffer(o.bufferIndex,g)-this.offsetInBuffer(o.bufferIndex,i)),d=this.rbInsertRight(e,_);this.validateCRLFWithPrevNode(d)}appendToNode(e,s){this.adjustCarriageReturnFromNext(s,e)&&(s+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(s)&&this.endWithCR(e),o=this._buffers[0].buffer.length;this._buffers[0].buffer+=s;const l=b(s,!1);for(let d=0;d<l.length;d++)l[d]+=o;if(i){const d=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:o-d}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(l.slice(1));const g=this._buffers[0].lineStarts.length-1,w=this._buffers[0].buffer.length-this._buffers[0].lineStarts[g],E={line:g,column:w},U=e.piece.length+s.length,h=e.piece.lineFeedCnt,C=this.getLineFeedCnt(0,e.piece.start,E),_=C-h;e.piece=new v(e.piece.bufferIndex,e.piece.start,E,C,U),this._lastChangeBufferPos=E,(0,y.updateTreeMetadata)(this,e,s.length,_)}nodeAt(e){let s=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let o=0;for(;s!==y.SENTINEL;)if(s.size_left>e)s=s.left;else if(s.size_left+s.piece.length>=e){o+=s.size_left;const l={node:s,remainder:e-s.size_left,nodeStartOffset:o};return this._searchCache.set(l),l}else e-=s.size_left+s.piece.length,o+=s.size_left+s.piece.length,s=s.right;return null}nodeAt2(e,s){let i=this.root,o=0;for(;i!==y.SENTINEL;)if(i.left!==y.SENTINEL&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),g=this.getAccumulatedValue(i,e-i.lf_left-1);return o+=i.size_left,{node:i,remainder:Math.min(l+s-1,g),nodeStartOffset:o}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2);if(l+s-1<=i.piece.length)return{node:i,remainder:l+s-1,nodeStartOffset:o};s-=i.piece.length-l;break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==y.SENTINEL;){if(i.piece.lineFeedCnt>0){const l=this.getAccumulatedValue(i,0),g=this.offsetOfNode(i);return{node:i,remainder:Math.min(s-1,l),nodeStartOffset:g}}else if(i.piece.length>=s-1){const l=this.offsetOfNode(i);return{node:i,remainder:s-1,nodeStartOffset:l}}else s-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,s){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],o=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+s;return i.buffer.charCodeAt(o)}offsetOfNode(e){if(!e)return 0;let s=e.size_left;for(;e!==this.root;)e.parent.right===e&&(s+=e.parent.size_left+e.parent.piece.length),e=e.parent;return s}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===y.SENTINEL||e.piece.lineFeedCnt===0)return!1;const s=e.piece,i=this._buffers[s.bufferIndex].lineStarts,o=s.start.line,l=i[o]+s.start.column;return o===i.length-1||i[o+1]>l+1?!1:this._buffers[s.bufferIndex].buffer.charCodeAt(l)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===y.SENTINEL||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const s=e.prev();this.endWithCR(s)&&this.fixCRLF(s,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const s=e.next();this.startWithLF(s)&&this.fixCRLF(e,s)}}fixCRLF(e,s){const i=[],o=this._buffers[e.piece.bufferIndex].lineStarts;let l;e.piece.end.column===0?l={line:e.piece.end.line-1,column:o[e.piece.end.line]-o[e.piece.end.line-1]-1}:l={line:e.piece.end.line,column:e.piece.end.column-1};const g=e.piece.length-1,w=e.piece.lineFeedCnt-1;e.piece=new v(e.piece.bufferIndex,e.piece.start,l,w,g),(0,y.updateTreeMetadata)(this,e,-1,-1),e.piece.length===0&&i.push(e);const E={line:s.piece.start.line+1,column:0},U=s.piece.length-1,h=this.getLineFeedCnt(s.piece.bufferIndex,E,s.piece.end);s.piece=new v(s.piece.bufferIndex,E,s.piece.end,h,U),(0,y.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s);const C=this.createNewPieces(`\r
`);this.rbInsertRight(e,C[0]);for(let _=0;_<i.length;_++)(0,y.rbDelete)(this,i[_])}adjustCarriageReturnFromNext(e,s){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=s.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)(0,y.rbDelete)(this,i);else{const o=i.piece,l={line:o.start.line+1,column:0},g=o.length-1,w=this.getLineFeedCnt(o.bufferIndex,l,o.end);i.piece=new v(o.bufferIndex,l,o.end,w,g),(0,y.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(e,s){if(e===y.SENTINEL)return s(y.SENTINEL);const i=this.iterate(e.left,s);return i&&s(e)&&this.iterate(e.right,s)}getNodeContent(e){if(e===y.SENTINEL)return"";const s=this._buffers[e.piece.bufferIndex],i=e.piece,o=this.offsetInBuffer(i.bufferIndex,i.start),l=this.offsetInBuffer(i.bufferIndex,i.end);return s.buffer.substring(o,l)}getPieceContent(e){const s=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),o=this.offsetInBuffer(e.bufferIndex,e.end);return s.buffer.substring(i,o)}rbInsertRight(e,s){const i=new y.TreeNode(s,1);if(i.left=y.SENTINEL,i.right=y.SENTINEL,i.parent=y.SENTINEL,i.size_left=0,i.lf_left=0,this.root===y.SENTINEL)this.root=i,i.color=0;else if(e.right===y.SENTINEL)e.right=i,i.parent=e;else{const l=(0,y.leftest)(e.right);l.left=i,i.parent=l}return(0,y.fixInsert)(this,i),i}rbInsertLeft(e,s){const i=new y.TreeNode(s,1);if(i.left=y.SENTINEL,i.right=y.SENTINEL,i.parent=y.SENTINEL,i.size_left=0,i.lf_left=0,this.root===y.SENTINEL)this.root=i,i.color=0;else if(e.left===y.SENTINEL)e.left=i,i.parent=e;else{const o=(0,y.righttest)(e.left);o.right=i,i.parent=o}return(0,y.fixInsert)(this,i),i}getContentOfSubTree(e){let s="";return this.iterate(e,i=>(s+=this.getNodeContent(i),!0)),s}}t.PieceTreeBase=r}),define(ne[25],ie([0,1,20,3,11,24,10,15,23,6]),function(te,t,M,z,W,y,R,j,N,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBuffer=void 0;class I extends b.Disposable{constructor(m,S,c,r,a,e,s){super(),this._onDidChangeContent=this._register(new M.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=S,this._mightContainNonBasicASCII=!e,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=a,this._pieceTree=new R.PieceTreeBase(m,c,s)}equals(m){return!(m instanceof I)||this._BOM!==m._BOM||this.getEOL()!==m.getEOL()?!1:this._pieceTree.equal(m._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(m){return this._pieceTree.createSnapshot(m?this._BOM:"")}getOffsetAt(m,S){return this._pieceTree.getOffsetAt(m,S)}getPositionAt(m){return this._pieceTree.getPositionAt(m)}getRangeAt(m,S){const c=m+S,r=this.getPositionAt(m),a=this.getPositionAt(c);return new W.Range(r.lineNumber,r.column,a.lineNumber,a.column)}getValueInRange(m,S=0){if(m.isEmpty())return"";const c=this._getEndOfLine(S);return this._pieceTree.getValueInRange(m,c)}getValueLengthInRange(m,S=0){if(m.isEmpty())return 0;if(m.startLineNumber===m.endLineNumber)return m.endColumn-m.startColumn;const c=this.getOffsetAt(m.startLineNumber,m.startColumn),r=this.getOffsetAt(m.endLineNumber,m.endColumn);let a=0;const e=this._getEndOfLine(S),s=this.getEOL();if(e.length!==s.length){const i=e.length-s.length,o=m.endLineNumber-m.startLineNumber;a=i*o}return r-c+a}getCharacterCountInRange(m,S=0){if(this._mightContainNonBasicASCII){let c=0;const r=m.startLineNumber,a=m.endLineNumber;for(let e=r;e<=a;e++){const s=this.getLineContent(e),i=e===r?m.startColumn-1:0,o=e===a?m.endColumn-1:s.length;for(let l=i;l<o;l++)z.isHighSurrogate(s.charCodeAt(l))?(c=c+1,l=l+1):c=c+1}return c+=this._getEndOfLine(S).length*(a-r),c}return this.getValueLengthInRange(m,S)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(m){return this._pieceTree.getLineContent(m)}getLineCharCode(m,S){return this._pieceTree.getLineCharCode(m,S)}getCharCode(m){return this._pieceTree.getCharCode(m)}getLineLength(m){return this._pieceTree.getLineLength(m)}getLineMinColumn(m){return 1}getLineMaxColumn(m){return this.getLineLength(m)+1}getLineFirstNonWhitespaceColumn(m){const S=z.firstNonWhitespaceIndex(this.getLineContent(m));return S===-1?0:S+1}getLineLastNonWhitespaceColumn(m){const S=z.lastNonWhitespaceIndex(this.getLineContent(m));return S===-1?0:S+2}_getEndOfLine(m){switch(m){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(m){this._pieceTree.setEOL(m)}applyEdits(m,S,c){let r=this._mightContainRTL,a=this._mightContainUnusualLineTerminators,e=this._mightContainNonBasicASCII,s=!0,i=[];for(let h=0;h<m.length;h++){const C=m[h];s&&C._isTracked&&(s=!1);const _=C.range;if(C.text){let X=!0;e||(X=!z.isBasicASCII(C.text),e=X),!r&&X&&(r=z.containsRTL(C.text)),!a&&X&&(a=z.containsUnusualLineTerminators(C.text))}let d="",k=0,$=0,Y=0;if(C.text){let X;[k,$,Y,X]=(0,j.countEOL)(C.text);const Z=this.getEOL();X===0||X===(Z===`\r
`?2:1)?d=C.text:d=C.text.replace(/\r\n|\r|\n/g,Z)}i[h]={sortIndex:h,identifier:C.identifier||null,range:_,rangeOffset:this.getOffsetAt(_.startLineNumber,_.startColumn),rangeLength:this.getValueLengthInRange(_),text:d,eolCount:k,firstLineLength:$,lastLineLength:Y,forceMoveMarkers:Boolean(C.forceMoveMarkers),isAutoWhitespaceEdit:C.isAutoWhitespaceEdit||!1}}i.sort(I._sortOpsAscending);let o=!1;for(let h=0,C=i.length-1;h<C;h++){const _=i[h].range.getEndPosition(),d=i[h+1].range.getStartPosition();if(d.isBeforeOrEqual(_)){if(d.isBefore(_))throw new Error("Overlapping ranges are not allowed!");o=!0}}s&&(i=this._reduceOperations(i));const l=c||S?I._getInverseEditRanges(i):[],g=[];if(S)for(let h=0;h<i.length;h++){const C=i[h],_=l[h];if(C.isAutoWhitespaceEdit&&C.range.isEmpty())for(let d=_.startLineNumber;d<=_.endLineNumber;d++){let k="";d===_.startLineNumber&&(k=this.getLineContent(C.range.startLineNumber),z.firstNonWhitespaceIndex(k)!==-1)||g.push({lineNumber:d,oldContent:k})}}let w=null;if(c){let h=0;w=[];for(let C=0;C<i.length;C++){const _=i[C],d=l[C],k=this.getValueInRange(_.range),$=_.rangeOffset+h;h+=_.text.length-k.length,w[C]={sortIndex:_.sortIndex,identifier:_.identifier,range:d,text:k,textChange:new N.TextChange(_.rangeOffset,k,$,_.text)}}o||w.sort((C,_)=>C.sortIndex-_.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=a,this._mightContainNonBasicASCII=e;const E=this._doApplyEdits(i);let U=null;if(S&&g.length>0){g.sort((h,C)=>C.lineNumber-h.lineNumber),U=[];for(let h=0,C=g.length;h<C;h++){const _=g[h].lineNumber;if(h>0&&g[h-1].lineNumber===_)continue;const d=g[h].oldContent,k=this.getLineContent(_);k.length===0||k===d||z.firstNonWhitespaceIndex(k)!==-1||U.push(_)}}return this._onDidChangeContent.fire(),new y.ApplyEditsResult(w,E,U)}_reduceOperations(m){return m.length<1e3?m:[this._toSingleEditOperation(m)]}_toSingleEditOperation(m){let S=!1;const c=m[0].range,r=m[m.length-1].range,a=new W.Range(c.startLineNumber,c.startColumn,r.endLineNumber,r.endColumn);let e=c.startLineNumber,s=c.startColumn;const i=[];for(let E=0,U=m.length;E<U;E++){const h=m[E],C=h.range;S=S||h.forceMoveMarkers,i.push(this.getValueInRange(new W.Range(e,s,C.startLineNumber,C.startColumn))),h.text.length>0&&i.push(h.text),e=C.endLineNumber,s=C.endColumn}const o=i.join(""),[l,g,w]=(0,j.countEOL)(o);return{sortIndex:0,identifier:m[0].identifier,range:a,rangeOffset:this.getOffsetAt(a.startLineNumber,a.startColumn),rangeLength:this.getValueLengthInRange(a,0),text:o,eolCount:l,firstLineLength:g,lastLineLength:w,forceMoveMarkers:S,isAutoWhitespaceEdit:!1}}_doApplyEdits(m){m.sort(I._sortOpsDescending);const S=[];for(let c=0;c<m.length;c++){const r=m[c],a=r.range.startLineNumber,e=r.range.startColumn,s=r.range.endLineNumber,i=r.range.endColumn;if(a===s&&e===i&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const o=new W.Range(a,e,s,i);S.push({range:o,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return S}findMatchesLineByLine(m,S,c,r){return this._pieceTree.findMatchesLineByLine(m,S,c,r)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(m,S){const c=m.startLineNumber,r=m.startColumn,[a,e,s]=(0,j.countEOL)(S);let i;if(S.length>0){const o=a+1;o===1?i=new W.Range(c,r,c,r+e):i=new W.Range(c,r,c+o-1,s+1)}else i=new W.Range(c,r,c,r);return i}static _getInverseEditRanges(m){const S=[];let c=0,r=0,a=null;for(let e=0,s=m.length;e<s;e++){const i=m[e];let o,l;a?a.range.endLineNumber===i.range.startLineNumber?(o=c,l=r+(i.range.startColumn-a.range.endColumn)):(o=c+(i.range.startLineNumber-a.range.endLineNumber),l=i.range.startColumn):(o=i.range.startLineNumber,l=i.range.startColumn);let g;if(i.text.length>0){const w=i.eolCount+1;w===1?g=new W.Range(o,l,o,l+i.firstLineLength):g=new W.Range(o,l,o+w-1,i.lastLineLength+1)}else g=new W.Range(o,l,o,l);c=g.endLineNumber,r=g.endColumn,S.push(g),a=i}return S}static _sortOpsAscending(m,S){const c=W.Range.compareRangesUsingEnds(m.range,S.range);return c===0?m.sortIndex-S.sortIndex:c}static _sortOpsDescending(m,S){const c=W.Range.compareRangesUsingEnds(m.range,S.range);return c===0?S.sortIndex-m.sortIndex:-c}}t.PieceTreeTextBuffer=I}),define(ne[26],ie([0,1,3,10,25]),function(te,t,M,z,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBufferBuilder=t.PieceTreeTextBufferFactory=void 0;class y{constructor(N,b,I,v,m,S,c,r,a){this._chunks=N,this._bom=b,this._cr=I,this._lf=v,this._crlf=m,this._containsRTL=S,this._containsUnusualLineTerminators=c,this._isBasicASCII=r,this._normalizeEOL=a}_getEOL(N){const b=this._cr+this._lf+this._crlf,I=this._cr+this._crlf;return b===0?N===1?`
`:`\r
`:I>b/2?`\r
`:`
`}create(N){const b=this._getEOL(N),I=this._chunks;if(this._normalizeEOL&&(b===`\r
`&&(this._cr>0||this._lf>0)||b===`
`&&(this._cr>0||this._crlf>0)))for(let m=0,S=I.length;m<S;m++){const c=I[m].buffer.replace(/\r\n|\r|\n/g,b),r=(0,z.createLineStartsFast)(c);I[m]=new z.StringBuffer(c,r)}const v=new W.PieceTreeTextBuffer(I,this._bom,b,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:v,disposable:v}}getFirstLineText(N){return this._chunks[0].buffer.substr(0,N).split(/\r\n|\r|\n/)[0]}}t.PieceTreeTextBufferFactory=y;class R{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(N){if(N.length===0)return;this.chunks.length===0&&M.startsWithUTF8BOM(N)&&(this.BOM=M.UTF8_BOM_CHARACTER,N=N.substr(1));const b=N.charCodeAt(N.length-1);b===13||b>=55296&&b<=56319?(this._acceptChunk1(N.substr(0,N.length-1),!1),this._hasPreviousChar=!0,this._previousChar=b):(this._acceptChunk1(N,!1),this._hasPreviousChar=!1,this._previousChar=b)}_acceptChunk1(N,b){!b&&N.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+N):this._acceptChunk2(N))}_acceptChunk2(N){const b=(0,z.createLineStarts)(this._tmpLineStarts,N);this.chunks.push(new z.StringBuffer(N,b.lineStarts)),this.cr+=b.cr,this.lf+=b.lf,this.crlf+=b.crlf,this.isBasicASCII&&(this.isBasicASCII=b.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=M.containsRTL(N)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=M.containsUnusualLineTerminators(N))}finish(N=!0){return this._finish(),new y(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,N)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const N=this.chunks[this.chunks.length-1];N.buffer+=String.fromCharCode(this._previousChar);const b=(0,z.createLineStartsFast)(N.buffer);N.lineStarts=b,this._previousChar===13&&this.cr++}}}t.PieceTreeTextBufferBuilder=R}),define(ne[27],ie([0,1]),function(te,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var M;(function(R){R.serviceIds=new Map,R.DI_TARGET="$di$target",R.DI_DEPENDENCIES="$di$dependencies";function j(N){return N[R.DI_DEPENDENCIES]||[]}R.getServiceDependencies=j})(M=t._util||(t._util={})),t.IInstantiationService=W("instantiationService");function z(R,j,N){j[M.DI_TARGET]===j?j[M.DI_DEPENDENCIES].push({id:R,index:N}):(j[M.DI_DEPENDENCIES]=[{id:R,index:N}],j[M.DI_TARGET]=j)}function W(R){if(M.serviceIds.has(R))return M.serviceIds.get(R);const j=function(N,b,I){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");z(j,N,I)};return j.toString=()=>R,M.serviceIds.set(R,j),j}t.createDecorator=W;function y(R){return R}t.refineServiceDecorator=y}),define(ne[28],ie([0,1,2,3,27]),function(te,t,M,z,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implies=t.SET_CONTEXT_COMMAND_ID=t.IContextKeyService=t.RawContextKey=t.ContextKeyNotRegexExpr=t.ContextKeyRegexExpr=t.ContextKeySmallerEqualsExpr=t.ContextKeySmallerExpr=t.ContextKeyGreaterEqualsExpr=t.ContextKeyGreaterExpr=t.ContextKeyNotExpr=t.ContextKeyNotEqualsExpr=t.ContextKeyNotInExpr=t.ContextKeyInExpr=t.ContextKeyEqualsExpr=t.ContextKeyDefinedExpr=t.ContextKeyTrueExpr=t.ContextKeyFalseExpr=t.expressionsAreEqualWithConstantSubstitution=t.ContextKeyExpr=t.ContextKeyExprType=void 0;const y=new Map;y.set("false",!1),y.set("true",!0),y.set("isMac",M.isMacintosh),y.set("isLinux",M.isLinux),y.set("isWindows",M.isWindows),y.set("isWeb",M.isWeb),y.set("isMacNative",M.isMacintosh&&!M.isWeb),y.set("isEdge",M.isEdge),y.set("isFirefox",M.isFirefox),y.set("isChrome",M.isChrome),y.set("isSafari",M.isSafari);const R=Object.prototype.hasOwnProperty;var j;(function(A){A[A.False=0]="False",A[A.True=1]="True",A[A.Defined=2]="Defined",A[A.Not=3]="Not",A[A.Equals=4]="Equals",A[A.NotEquals=5]="NotEquals",A[A.And=6]="And",A[A.Regex=7]="Regex",A[A.NotRegex=8]="NotRegex",A[A.Or=9]="Or",A[A.In=10]="In",A[A.NotIn=11]="NotIn",A[A.Greater=12]="Greater",A[A.GreaterEquals=13]="GreaterEquals",A[A.Smaller=14]="Smaller",A[A.SmallerEquals=15]="SmallerEquals"})(j=t.ContextKeyExprType||(t.ContextKeyExprType={}));class N{static false(){return v.INSTANCE}static true(){return m.INSTANCE}static has(n){return S.create(n)}static equals(n,p){return c.create(n,p)}static notEquals(n,p){return e.create(n,p)}static regex(n,p){return E.create(n,p)}static in(n,p){return r.create(n,p)}static notIn(n,p){return a.create(n,p)}static not(n){return s.create(n)}static and(...n){return C.create(n,null,!0)}static or(...n){return _.create(n,null,!0)}static greater(n,p){return o.create(n,p)}static greaterEquals(n,p){return l.create(n,p)}static smaller(n,p){return g.create(n,p)}static smallerEquals(n,p){return w.create(n,p)}static deserialize(n,p=!1){if(!!n)return this._deserializeOrExpression(n,p)}static _deserializeOrExpression(n,p){const T=n.split("||");return _.create(T.map(f=>this._deserializeAndExpression(f,p)),null,!0)}static _deserializeAndExpression(n,p){const T=n.split("&&");return C.create(T.map(f=>this._deserializeOne(f,p)),null,!0)}static _deserializeOne(n,p){if(n=n.trim(),n.indexOf("!=")>=0){const T=n.split("!=");return e.create(T[0].trim(),this._deserializeValue(T[1],p))}if(n.indexOf("==")>=0){const T=n.split("==");return c.create(T[0].trim(),this._deserializeValue(T[1],p))}if(n.indexOf("=~")>=0){const T=n.split("=~");return E.create(T[0].trim(),this._deserializeRegexValue(T[1],p))}if(n.indexOf(" not in ")>=0){const T=n.split(" not in ");return a.create(T[0].trim(),this._deserializeValue(T[1],p))}if(n.indexOf(" in ")>=0){const T=n.split(" in ");return r.create(T[0].trim(),this._deserializeValue(T[1],p))}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const T=n.split(">=");return l.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const T=n.split(">");return o.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const T=n.split("<=");return w.create(T[0].trim(),T[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const T=n.split("<");return g.create(T[0].trim(),T[1].trim())}return/^\!\s*/.test(n)?s.create(n.substr(1).trim()):S.create(n)}static _deserializeValue(n,p){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;const T=/^'([^']*)'$/.exec(n);return T?T[1].trim():n}static _deserializeRegexValue(n,p){if((0,z.isFalsyOrWhitespace)(n)){if(p)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const T=n.indexOf("/"),f=n.lastIndexOf("/");if(T===f||T<0){if(p)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}const H=n.slice(T+1,f),K=n[f+1]==="i"?"i":"";try{return new RegExp(H,K)}catch(O){if(p)throw new Error(`bad regexp-value '${n}', parse error: ${O}`);return console.warn(`bad regexp-value '${n}', parse error: ${O}`),null}}}t.ContextKeyExpr=N;function b(A,n){const p=A?A.substituteConstants():void 0,T=n?n.substituteConstants():void 0;return!p&&!T?!0:!p||!T?!1:p.equals(T)}t.expressionsAreEqualWithConstantSubstitution=b;function I(A,n){return A.cmp(n)}class v{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return m.INSTANCE}}t.ContextKeyFalseExpr=v,v.INSTANCE=new v;class m{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return v.INSTANCE}}t.ContextKeyTrueExpr=m,m.INSTANCE=new m;class S{static create(n,p=null){const T=y.get(n);return typeof T=="boolean"?T?m.INSTANCE:v.INSTANCE:new S(n,p)}constructor(n,p){this.key=n,this.negated=p,this.type=2}cmp(n){return n.type!==this.type?this.type-n.type:k(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=y.get(this.key);return typeof n=="boolean"?n?m.INSTANCE:v.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}t.ContextKeyDefinedExpr=S;class c{static create(n,p,T=null){if(typeof p=="boolean")return p?S.create(n,T):s.create(n,T);const f=y.get(n);return typeof f=="boolean"?p===(f?"true":"false")?m.INSTANCE:v.INSTANCE:new c(n,p,T)}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=4}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=y.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?m.INSTANCE:v.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=e.create(this.key,this.value,this)),this.negated}}t.ContextKeyEqualsExpr=c;class r{static create(n,p){return new r(n,p)}constructor(n,p){this.key=n,this.valueKey=p,this.type=10,this.negated=null}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.valueKey),T=n.getValue(this.key);return Array.isArray(p)?p.includes(T):typeof T=="string"&&typeof p=="object"&&p!==null?R.call(p,T):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=a.create(this.key,this.valueKey)),this.negated}}t.ContextKeyInExpr=r;class a{static create(n,p){return new a(n,p)}constructor(n,p){this.key=n,this.valueKey=p,this.type=11,this._negated=r.create(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:this._negated.cmp(n._negated)}equals(n){return n.type===this.type?this._negated.equals(n._negated):!1}substituteConstants(){return this}evaluate(n){return!this._negated.evaluate(n)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(n){return n.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}t.ContextKeyNotInExpr=a;class e{static create(n,p,T=null){if(typeof p=="boolean")return p?s.create(n,T):S.create(n,T);const f=y.get(n);return typeof f=="boolean"?p===(f?"true":"false")?v.INSTANCE:m.INSTANCE:new e(n,p,T)}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=5}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=y.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?v.INSTANCE:m.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=c.create(this.key,this.value,this)),this.negated}}t.ContextKeyNotEqualsExpr=e;class s{static create(n,p=null){const T=y.get(n);return typeof T=="boolean"?T?v.INSTANCE:m.INSTANCE:new s(n,p)}constructor(n,p){this.key=n,this.negated=p,this.type=3}cmp(n){return n.type!==this.type?this.type-n.type:k(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=y.get(this.key);return typeof n=="boolean"?n?v.INSTANCE:m.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=S.create(this.key,this)),this.negated}}t.ContextKeyNotExpr=s;function i(A,n){if(typeof A=="string"){const p=parseFloat(A);isNaN(p)||(A=p)}return typeof A=="string"||typeof A=="number"?n(A):v.INSTANCE}class o{static create(n,p,T=null){return i(p,f=>new o(n,f,T))}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=12}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=w.create(this.key,this.value,this)),this.negated}}t.ContextKeyGreaterExpr=o;class l{static create(n,p,T=null){return i(p,f=>new l(n,f,T))}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=13}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=g.create(this.key,this.value,this)),this.negated}}t.ContextKeyGreaterEqualsExpr=l;class g{static create(n,p,T=null){return i(p,f=>new g(n,f,T))}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=14}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=l.create(this.key,this.value,this)),this.negated}}t.ContextKeySmallerExpr=g;class w{static create(n,p,T=null){return i(p,f=>new w(n,f,T))}constructor(n,p,T){this.key=n,this.value=p,this.negated=T,this.type=15}cmp(n){return n.type!==this.type?this.type-n.type:$(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=o.create(this.key,this.value,this)),this.negated}}t.ContextKeySmallerEqualsExpr=w;class E{static create(n,p){return new E(n,p)}constructor(n,p){this.key=n,this.regexp=p,this.type=7,this.negated=null}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const p=this.regexp?this.regexp.source:"",T=n.regexp?n.regexp.source:"";return p<T?-1:p>T?1:0}equals(n){if(n.type===this.type){const p=this.regexp?this.regexp.source:"",T=n.regexp?n.regexp.source:"";return this.key===n.key&&p===T}return!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.key);return this.regexp?this.regexp.test(p):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=U.create(this)),this.negated}}t.ContextKeyRegexExpr=E;class U{static create(n){return new U(n)}constructor(n){this._actual=n,this.type=8}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new U(this._actual.map(n))}negate(){return this._actual}}t.ContextKeyNotRegexExpr=U;function h(A){let n=null;for(let p=0,T=A.length;p<T;p++){const f=A[p].substituteConstants();if(A[p]!==f&&n===null){n=[];for(let H=0;H<p;H++)n[H]=A[H]}n!==null&&(n[p]=f)}return n===null?A:n}class C{static create(n,p,T){return C._normalizeArr(n,p,T)}constructor(n,p){this.expr=n,this.negated=p,this.type=6}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,T=this.expr.length;p<T;p++){const f=I(this.expr[p],n.expr[p]);if(f!==0)return f}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,T=this.expr.length;p<T;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=h(this.expr);return n===this.expr?this:C.create(n,this.negated,!1)}evaluate(n){for(let p=0,T=this.expr.length;p<T;p++)if(!this.expr[p].evaluate(n))return!1;return!0}static _normalizeArr(n,p,T){const f=[];let H=!1;for(const K of n)if(!!K){if(K.type===1){H=!0;continue}if(K.type===0)return v.INSTANCE;if(K.type===6){f.push(...K.expr);continue}f.push(K)}if(f.length===0&&H)return m.INSTANCE;if(f.length!==0){if(f.length===1)return f[0];f.sort(I);for(let K=1;K<f.length;K++)f[K-1].equals(f[K])&&(f.splice(K,1),K--);if(f.length===1)return f[0];for(;f.length>1;){const K=f[f.length-1];if(K.type!==9)break;f.pop();const O=f.pop(),q=f.length===0,B=_.create(K.expr.map(V=>C.create([V,O],null,T)),null,q);B&&(f.push(B),f.sort(I))}if(f.length===1)return f[0];if(T){for(let K=0;K<f.length;K++)for(let O=K+1;O<f.length;O++)if(f[K].negate().equals(f[O]))return v.INSTANCE;if(f.length===1)return f[0]}return new C(f,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new C(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());this.negated=_.create(n,this,!0)}return this.negated}}class _{static create(n,p,T){return _._normalizeArr(n,p,T)}constructor(n,p){this.expr=n,this.negated=p,this.type=9}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,T=this.expr.length;p<T;p++){const f=I(this.expr[p],n.expr[p]);if(f!==0)return f}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,T=this.expr.length;p<T;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=h(this.expr);return n===this.expr?this:_.create(n,this.negated,!1)}evaluate(n){for(let p=0,T=this.expr.length;p<T;p++)if(this.expr[p].evaluate(n))return!0;return!1}static _normalizeArr(n,p,T){let f=[],H=!1;if(n){for(let K=0,O=n.length;K<O;K++){const q=n[K];if(!!q){if(q.type===0){H=!0;continue}if(q.type===1)return m.INSTANCE;if(q.type===9){f=f.concat(q.expr);continue}f.push(q)}}if(f.length===0&&H)return v.INSTANCE;f.sort(I)}if(f.length!==0){if(f.length===1)return f[0];for(let K=1;K<f.length;K++)f[K-1].equals(f[K])&&(f.splice(K,1),K--);if(f.length===1)return f[0];if(T){for(let K=0;K<f.length;K++)for(let O=K+1;O<f.length;O++)if(f[K].negate().equals(f[O]))return m.INSTANCE;if(f.length===1)return f[0]}return new _(f,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new _(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());for(;n.length>1;){const p=n.shift(),T=n.shift(),f=[];for(const H of Z(p))for(const K of Z(T))f.push(C.create([H,K],null,!1));n.unshift(_.create(f,null,!1))}this.negated=_.create(n,this,!0)}return this.negated}}class d extends S{static all(){return d._info.values()}constructor(n,p,T){super(n,null),this._defaultValue=p,typeof T=="object"?d._info.push({...T,key:n}):T!==!0&&d._info.push({key:n,description:T,type:p!=null?typeof p:void 0})}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return c.create(this.key,n)}notEqualsTo(n){return e.create(this.key,n)}}t.RawContextKey=d,d._info=[],t.IContextKeyService=(0,W.createDecorator)("contextKeyService"),t.SET_CONTEXT_COMMAND_ID="setContext";function k(A,n){return A<n?-1:A>n?1:0}function $(A,n,p,T){return A<p?-1:A>p?1:n<T?-1:n>T?1:0}function Y(A,n){if(A.type===0||n.type===1)return!0;if(A.type===9)return n.type===9?X(A.expr,n.expr):!1;if(n.type===9){for(const p of n.expr)if(Y(A,p))return!0;return!1}if(A.type===6){if(n.type===6)return X(n.expr,A.expr);for(const p of A.expr)if(Y(p,n))return!0;return!1}return A.equals(n)}t.implies=Y;function X(A,n){let p=0,T=0;for(;p<A.length&&T<n.length;){const f=A[p].cmp(n[T]);if(f<0)return!1;f===0&&p++,T++}return p===A.length}function Z(A){return A.type===9?A.expr:[A]}}),define(ne[29],ie([0,1,5,21,35,17,8,4,2,28]),function(te,t,M,z,W,y,R,j,N,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressOutputItemStreams=t.isTextStreamMime=t.NotebookWorkingCopyTypeIdentifier=t.CellStatusbarAlignment=t.NotebookSetting=t.notebookDocumentFilterMatch=t.isDocumentExcludePattern=t.NotebookEditorPriority=t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=t.diff=t.MimeTypeDisplayOrder=t.CellUri=t.CellEditType=t.SelectionStateType=t.NotebookCellsChangeType=t.RendererMessagingSpec=t.NotebookRendererMatch=t.NotebookCellExecutionState=t.NotebookRunState=t.RENDERER_NOT_AVAILABLE=t.RENDERER_EQUIVALENT_EXTENSIONS=t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=t.NOTEBOOK_DISPLAY_ORDER=t.CellKind=t.INTERACTIVE_WINDOW_EDITOR_ID=t.NOTEBOOK_DIFF_EDITOR_ID=t.NOTEBOOK_EDITOR_ID=void 0,t.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",t.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",t.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var I;(function(f){f[f.Markup=1]="Markup",f[f.Code=2]="Code"})(I=t.CellKind||(t.CellKind={})),t.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",y.Mimes.latex,y.Mimes.markdown,"image/png","image/jpeg",y.Mimes.text],t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[y.Mimes.latex,y.Mimes.markdown,"application/json",y.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],t.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),t.RENDERER_NOT_AVAILABLE="_notAvailable";var v;(function(f){f[f.Running=1]="Running",f[f.Idle=2]="Idle"})(v=t.NotebookRunState||(t.NotebookRunState={}));var m;(function(f){f[f.Unconfirmed=1]="Unconfirmed",f[f.Pending=2]="Pending",f[f.Executing=3]="Executing"})(m=t.NotebookCellExecutionState||(t.NotebookCellExecutionState={}));var S;(function(f){f[f.WithHardKernelDependency=0]="WithHardKernelDependency",f[f.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",f[f.Pure=2]="Pure",f[f.Never=3]="Never"})(S=t.NotebookRendererMatch||(t.NotebookRendererMatch={}));var c;(function(f){f.Always="always",f.Never="never",f.Optional="optional"})(c=t.RendererMessagingSpec||(t.RendererMessagingSpec={}));var r;(function(f){f[f.ModelChange=1]="ModelChange",f[f.Move=2]="Move",f[f.ChangeCellLanguage=5]="ChangeCellLanguage",f[f.Initialize=6]="Initialize",f[f.ChangeCellMetadata=7]="ChangeCellMetadata",f[f.Output=8]="Output",f[f.OutputItem=9]="OutputItem",f[f.ChangeCellContent=10]="ChangeCellContent",f[f.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",f[f.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",f[f.ChangeCellMime=13]="ChangeCellMime",f[f.Unknown=100]="Unknown"})(r=t.NotebookCellsChangeType||(t.NotebookCellsChangeType={}));var a;(function(f){f[f.Handle=0]="Handle",f[f.Index=1]="Index"})(a=t.SelectionStateType||(t.SelectionStateType={}));var e;(function(f){f[f.Replace=1]="Replace",f[f.Output=2]="Output",f[f.Metadata=3]="Metadata",f[f.CellLanguage=4]="CellLanguage",f[f.DocumentMetadata=5]="DocumentMetadata",f[f.Move=6]="Move",f[f.OutputItems=7]="OutputItems",f[f.PartialMetadata=8]="PartialMetadata",f[f.PartialInternalMetadata=9]="PartialInternalMetadata"})(e=t.CellEditType||(t.CellEditType={}));var s;(function(f){f.scheme=R.Schemas.vscodeNotebookCell;const H=["W","X","Y","Z","a","b","c","d","e","f"],K=new RegExp(`^[${H.join("")}]+`),O=7;function q(u,L){const P=L.toString(O),G=`${P.length<H.length?H[P.length-1]:"z"}${P}s${(0,M.encodeBase64)(M.VSBuffer.fromString(u.scheme),!0,!0)}`;return u.with({scheme:f.scheme,fragment:G})}f.generate=q;function B(u){if(u.scheme!==f.scheme)return;const L=u.fragment.indexOf("s");if(L<0)return;const P=parseInt(u.fragment.substring(0,L).replace(K,""),O),F=(0,M.decodeBase64)(u.fragment.substring(L+1)).toString();if(!isNaN(P))return{handle:P,notebook:u.with({scheme:F,fragment:null})}}f.parse=B;function V(u,L){return u.with({scheme:R.Schemas.vscodeNotebookCellOutput,fragment:`op${L??""},${u.scheme!==R.Schemas.file?u.scheme:""}`})}f.generateCellOutputUri=V;function Q(u){if(u.scheme!==R.Schemas.vscodeNotebookCellOutput)return;const L=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(u.fragment);if(!L)return;const P=L[1]&&L[1]!==""?L[1]:void 0,F=L[2];return{outputId:P,notebook:u.with({scheme:F||R.Schemas.file,fragment:null})}}f.parseCellOutputUri=Q;function x(u,L,P){return f.generate(u,L).with({scheme:P})}f.generateCellPropertyUri=x;function D(u,L){if(u.scheme===L)return f.parse(u.with({scheme:f.scheme}))}f.parseCellPropertyUri=D})(s=t.CellUri||(t.CellUri={}));const i=f=>N.isWindows?f.replace(/\//g,"\\"):f;class o{constructor(H=[],K=t.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=K,this.order=[...new Set(H)].map(O=>({pattern:O,matches:z.parse(i(O))}))}sort(H){const K=new Map(W.Iterable.map(H,q=>[q,i(q)]));let O=[];for(const{matches:q}of this.order)for(const[B,V]of K)if(q(V)){O.push(B),K.delete(B);break}return K.size&&(O=O.concat([...K.keys()].sort((q,B)=>this.defaultOrder.indexOf(q)-this.defaultOrder.indexOf(B)))),O}prioritize(H,K){const O=this.findIndex(H);if(O===-1){this.order.unshift({pattern:H,matches:z.parse(i(H))});return}const q=new Set(K.map(V=>this.findIndex(V,O)));q.delete(-1);const B=Array.from(q).sort();this.order.splice(O+1,0,...B.map(V=>this.order[V]));for(let V=B.length-1;V>=0;V--)this.order.splice(B[V],1)}toArray(){return this.order.map(H=>H.pattern)}findIndex(H,K=this.order.length){const O=i(H);for(let q=0;q<K;q++)if(this.order[q].matches(O))return q;return-1}}t.MimeTypeDisplayOrder=o;function l(f,H,K,O=(q,B)=>q===B){const q=[];function B(x,D,u){if(D===0&&u.length===0)return;const L=q[q.length-1];L&&L.start+L.deleteCount===x?(L.deleteCount+=D,L.toInsert.push(...u)):q.push({start:x,deleteCount:D,toInsert:u})}let V=0,Q=0;for(;;){if(V===f.length){B(V,0,H.slice(Q));break}if(Q===H.length){B(V,f.length-V,[]);break}const x=f[V],D=H[Q];if(O(x,D)){V+=1,Q+=1;continue}K(D)?(B(V,1,[]),V+=1):(B(V,0,[D]),Q+=1)}return q}t.diff=l,t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new b.RawContextKey("notebookEditorCursorAtBoundary","none");var g;(function(f){f.default="default",f.option="option"})(g=t.NotebookEditorPriority||(t.NotebookEditorPriority={}));function w(f){const H=f;return!!((typeof H.include=="string"||z.isRelativePattern(H.include))&&(typeof H.exclude=="string"||z.isRelativePattern(H.exclude)))}t.isDocumentExcludePattern=w;function E(f,H,K){if(Array.isArray(f.viewType)&&f.viewType.indexOf(H)>=0||f.viewType===H)return!0;if(f.filenamePattern){const O=w(f.filenamePattern)?f.filenamePattern.include:f.filenamePattern,q=w(f.filenamePattern)?f.filenamePattern.exclude:void 0;if(z.match(O,(0,j.basename)(K.fsPath).toLowerCase()))return!(q&&z.match(q,(0,j.basename)(K.fsPath).toLowerCase()))}return!1}t.notebookDocumentFilterMatch=E,t.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily"};var U;(function(f){f[f.Left=1]="Left",f[f.Right=2]="Right"})(U=t.CellStatusbarAlignment||(t.CellStatusbarAlignment={}));class h{static create(H){return`${h._prefix}${H}`}static parse(H){if(H.startsWith(h._prefix))return H.substring(h._prefix.length)}}t.NotebookWorkingCopyTypeIdentifier=h,h._prefix="notebook/";function C(f){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(f)}t.isTextStreamMime=C;const _=new TextDecoder;function d(f){const H=[];let K=!1;for(const O of f)(H.length===0||K)&&(H.push(O),K=!0);return X(H),T(M.VSBuffer.concat(H.map(O=>M.VSBuffer.wrap(O))))}t.compressOutputItemStreams=d;const k=`${String.fromCharCode(27)}[A`,$=k.split("").map(f=>f.charCodeAt(0)),Y=10;function X(f){f.forEach((H,K)=>{if(K===0||H.length<k.length)return;const O=f[K-1],q=H.subarray(0,k.length);if(q[0]===$[0]&&q[1]===$[1]&&q[2]===$[2]){const B=O.lastIndexOf(Y);if(B===-1)return;f[K-1]=O.subarray(0,B),f[K]=H.subarray(k.length)}})}function Z(f){let H=f;do f=H,H=f.replace(/[^\n]\x08/gm,"");while(H.length<f.length);return f}function A(f){for(f=f.replace(/\r+\n/gm,`
`);f.search(/\r[^$]/g)>-1;){const H=f.match(/^(.*)\r+/m)[1];let K=f.match(/\r+(.*)$/m)[1];K=K+H.slice(K.length,H.length),f=f.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,K)}return f}const n="\b".charCodeAt(0),p="\r".charCodeAt(0);function T(f){return!f.buffer.includes(n)&&!f.buffer.includes(p)?f:M.VSBuffer.fromString(A(Z(_.decode(f.buffer))))}}),define(ne[36],ie([0,1,37,38,9,26,29,11]),function(te,t,M,z,W,y,R,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.NotebookEditorSimpleWorker=t.CellSequence=void 0;function N(c){let r=(0,z.numberHash)(104579,0);for(let a=0;a<c.buffer.length;a++)r=(0,z.doHash)(c.buffer[a],r);return r}class b{get textBuffer(){if(this._textBuffer)return this._textBuffer;const r=new y.PieceTreeTextBufferBuilder;r.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const a=r.finish(!0);return this._textBuffer=a.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,z.hash)(this.getValue())),this._primaryKey}constructor(r,a,e,s,i,o,l){this.handle=r,this._source=a,this.language=e,this.cellKind=s,this.outputs=i,this.metadata=o,this.internalMetadata=l,this._primaryKey=null,this._hash=null}getFullModelRange(){const r=this.textBuffer.getLineCount();return new j.Range(1,1,r,this.textBuffer.getLineLength(r)+1)}getValue(){const r=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(r,1):this.textBuffer.getValueInRange(r,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,z.hash)([(0,z.hash)(this.language),(0,z.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(r=>({outputs:r.outputs.map(a=>({mime:a.mime,data:N(a.data)})),metadata:r.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,z.hash)([(0,z.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class I{constructor(r,a,e){this.uri=r,this.cells=a,this.metadata=e}acceptModelChanged(r){r.rawEvents.forEach(a=>{if(a.kind===R.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(a.changes);else if(a.kind===R.NotebookCellsChangeType.Move){const e=this.cells.splice(a.index,1);this.cells.splice(a.newIdx,0,...e)}else if(a.kind===R.NotebookCellsChangeType.Output){const e=this.cells[a.index];e.outputs=a.outputs}else if(a.kind===R.NotebookCellsChangeType.ChangeCellLanguage){const e=this.cells[a.index];e.language=a.language}else if(a.kind===R.NotebookCellsChangeType.ChangeCellMetadata){const e=this.cells[a.index];e.metadata=a.metadata}else if(a.kind===R.NotebookCellsChangeType.ChangeCellInternalMetadata){const e=this.cells[a.index];e.internalMetadata=a.internalMetadata}})}_spliceNotebookCells(r){r.reverse().forEach(a=>{const s=a[2].map(i=>new b(i.handle,i.source,i.language,i.cellKind,i.outputs,i.metadata));this.cells.splice(a[0],a[1],...s)})}}class v{constructor(r){this.textModel=r}getElements(){const r=new Int32Array(this.textModel.cells.length);for(let a=0;a<this.textModel.cells.length;a++)r[a]=this.textModel.cells[a].getComparisonValue();return r}getCellHash(r){const a=Array.isArray(r.source)?r.source.join(`
`):r.source;return(0,z.hash)([(0,z.hash)(a),r.metadata])}}t.CellSequence=v;class m{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(r,a){this._models[r]=new I(W.URI.parse(r),a.cells.map(e=>new b(e.handle,e.source,e.language,e.cellKind,e.outputs,e.metadata)),a.metadata)}acceptModelChanged(r,a){this._models[r]?.acceptModelChanged(a)}acceptRemovedModel(r){!this._models[r]||delete this._models[r]}computeDiff(r,a){const e=this._getModel(r),s=this._getModel(a);return{cellsDiff:new M.LcsDiff(new v(e),new v(s)).ComputeDiff(!1)}}_getModel(r){return this._models[r]}}t.NotebookEditorSimpleWorker=m;function S(c){return new m}t.create=S})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/14f2d26367b7e8f03ff2352516ba27d6302dd7b1/core/vs\workbench\contrib\notebook\common\services\notebookSimpleWorker.js.map
