/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(J){for(var e=[],I=0,A=J.length;I<A;I++)e[I]=ne[J[I]];return e};define(ne[10],se([0,1]),function(J,e){"use strict";var I,A,S;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function T(i,n,o){let c=i.get(n);return c===void 0&&(c=o,i.set(n,c)),c}e.getOrSet=T;function y(i){const n=[];return i.forEach((o,c)=>{n.push(`${c} => ${o}`)}),`Map(${i.size}) {${n.join(", ")}}`}e.mapToString=y;function E(i){const n=[];return i.forEach(o=>{n.push(o)}),`Set(${i.size}) {${n.join(", ")}}`}e.setToString=E;class M{constructor(n,o){this.uri=n,this.value=o}}class m{constructor(n,o){this[I]="ResourceMap",n instanceof m?(this.map=new Map(n.map),this.toKey=o??m.defaultToKey):(this.map=new Map,this.toKey=n??m.defaultToKey)}set(n,o){return this.map.set(this.toKey(n),new M(n,o)),this}get(n){return this.map.get(this.toKey(n))?.value}has(n){return this.map.has(this.toKey(n))}get size(){return this.map.size}clear(){this.map.clear()}delete(n){return this.map.delete(this.toKey(n))}forEach(n,o){typeof o<"u"&&(n=n.bind(o));for(const[c,P]of this.map)n(P.value,P.uri,this)}*values(){for(const n of this.map.values())yield n.value}*keys(){for(const n of this.map.values())yield n.uri}*entries(){for(const n of this.map.values())yield[n.uri,n.value]}*[(I=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.map)yield[n.uri,n.value]}}m.defaultToKey=i=>i.toString(),e.ResourceMap=m;class g{constructor(n,o){this[A]="ResourceSet",!n||typeof n=="function"?this._map=new m(n):(this._map=new m(o),n.forEach(this.add,this))}get size(){return this._map.size}add(n){return this._map.set(n,n),this}clear(){this._map.clear()}delete(n){return this._map.delete(n)}forEach(n,o){this._map.forEach((c,P)=>n.call(o,P,P,this))}has(n){return this._map.has(n)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=g;var U;(function(i){i[i.None=0]="None",i[i.AsOld=1]="AsOld",i[i.AsNew=2]="AsNew"})(U=e.Touch||(e.Touch={}));class N{constructor(){this[S]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(n){return this._map.has(n)}get(n,o=0){const c=this._map.get(n);if(!!c)return o!==0&&this.touch(c,o),c.value}set(n,o,c=0){let P=this._map.get(n);if(P)P.value=o,c!==0&&this.touch(P,c);else{switch(P={key:n,value:o,next:void 0,previous:void 0},c){case 0:this.addItemLast(P);break;case 1:this.addItemFirst(P);break;case 2:this.addItemLast(P);break;default:this.addItemLast(P);break}this._map.set(n,P),this._size++}return this}delete(n){return!!this.remove(n)}remove(n){const o=this._map.get(n);if(!!o)return this._map.delete(n),this.removeItem(o),this._size--,o.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const n=this._head;return this._map.delete(n.key),this.removeItem(n),this._size--,n.value}forEach(n,o){const c=this._state;let P=this._head;for(;P;){if(o?n.bind(o)(P.value,P.key,this):n(P.value,P.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");P=P.next}}keys(){const n=this,o=this._state;let c=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==o)throw new Error("LinkedMap got modified during iteration.");if(c){const _={value:c.key,done:!1};return c=c.next,_}else return{value:void 0,done:!0}}};return P}values(){const n=this,o=this._state;let c=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==o)throw new Error("LinkedMap got modified during iteration.");if(c){const _={value:c.value,done:!1};return c=c.next,_}else return{value:void 0,done:!0}}};return P}entries(){const n=this,o=this._state;let c=this._head;const P={[Symbol.iterator](){return P},next(){if(n._state!==o)throw new Error("LinkedMap got modified during iteration.");if(c){const _={value:[c.key,c.value],done:!1};return c=c.next,_}else return{value:void 0,done:!0}}};return P}[(S=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(n){if(n>=this.size)return;if(n===0){this.clear();return}let o=this._head,c=this.size;for(;o&&c>n;)this._map.delete(o.key),o=o.next,c--;this._head=o,this._size=c,o&&(o.previous=void 0),this._state++}addItemFirst(n){if(!this._head&&!this._tail)this._tail=n;else if(this._head)n.next=this._head,this._head.previous=n;else throw new Error("Invalid list");this._head=n,this._state++}addItemLast(n){if(!this._head&&!this._tail)this._head=n;else if(this._tail)n.previous=this._tail,this._tail.next=n;else throw new Error("Invalid list");this._tail=n,this._state++}removeItem(n){if(n===this._head&&n===this._tail)this._head=void 0,this._tail=void 0;else if(n===this._head){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this._head=n.next}else if(n===this._tail){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this._tail=n.previous}else{const o=n.next,c=n.previous;if(!o||!c)throw new Error("Invalid list");o.previous=c,c.next=o}n.next=void 0,n.previous=void 0,this._state++}touch(n,o){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(o!==1&&o!==2)){if(o===1){if(n===this._head)return;const c=n.next,P=n.previous;n===this._tail?(P.next=void 0,this._tail=P):(c.previous=P,P.next=c),n.previous=void 0,n.next=this._head,this._head.previous=n,this._head=n,this._state++}else if(o===2){if(n===this._tail)return;const c=n.next,P=n.previous;n===this._head?(c.previous=void 0,this._head=c):(c.previous=P,P.next=c),n.next=void 0,n.previous=this._tail,this._tail.next=n,this._tail=n,this._state++}}}toJSON(){const n=[];return this.forEach((o,c)=>{n.push([c,o])}),n}fromJSON(n){this.clear();for(const[o,c]of n)this.set(o,c)}}e.LinkedMap=N;class O extends N{constructor(n,o=1){super(),this._limit=n,this._ratio=Math.min(Math.max(0,o),1)}get limit(){return this._limit}set limit(n){this._limit=n,this.checkTrim()}get ratio(){return this._ratio}set ratio(n){this._ratio=Math.min(Math.max(0,n),1),this.checkTrim()}get(n,o=2){return super.get(n,o)}peek(n){return super.get(n,0)}set(n,o){return super.set(n,o,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=O}),define(ne[11],se([0,1]),function(J,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ne[5],se([0,1,3,2,4,17]),function(J,e,I,A,S,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function y(a){return a===47||a===92}e.isPathSeparator=y;function E(a){return a.replace(/[\\/]/g,I.posix.sep)}e.toSlashes=E;function M(a){return a.indexOf("/")===-1&&(a=E(a)),/^[a-zA-Z]:(\/|$)/.test(a)&&(a="/"+a),a}e.toPosixPath=M;function m(a,v=I.posix.sep){if(!a)return"";const k=a.length,D=a.charCodeAt(0);if(y(D)){if(y(a.charCodeAt(1))&&!y(a.charCodeAt(2))){let F=3;const Y=F;for(;F<k&&!y(a.charCodeAt(F));F++);if(Y!==F&&!y(a.charCodeAt(F+1))){for(F+=1;F<k;F++)if(y(a.charCodeAt(F)))return a.slice(0,F+1).replace(/[\\/]/g,v)}}return v}else if(c(D)&&a.charCodeAt(1)===58)return y(a.charCodeAt(2))?a.slice(0,2)+v:a.slice(0,2);let B=a.indexOf("://");if(B!==-1){for(B+=3;B<k;B++)if(y(a.charCodeAt(B)))return a.slice(0,B+1)}return""}e.getRoot=m;function g(a){if(!A.isWindows||!a||a.length<5)return!1;let v=a.charCodeAt(0);if(v!==92||(v=a.charCodeAt(1),v!==92))return!1;let k=2;const D=k;for(;k<a.length&&(v=a.charCodeAt(k),v!==92);k++);return!(D===k||(v=a.charCodeAt(k+1),isNaN(v)||v===92))}e.isUNC=g;const U=/[\\/:\*\?"<>\|]/g,N=/[\\/]/g,O=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function i(a,v=A.isWindows){const k=v?U:N;return!(!a||a.length===0||/^\s+$/.test(a)||(k.lastIndex=0,k.test(a))||v&&O.test(a)||a==="."||a===".."||v&&a[a.length-1]==="."||v&&a.length!==a.trim().length||a.length>255)}e.isValidBasename=i;function n(a,v,k){const D=a===v;return!k||D?D:!a||!v?!1:(0,S.equalsIgnoreCase)(a,v)}e.isEqual=n;function o(a,v,k,D=I.sep){if(a===v)return!0;if(!a||!v||v.length>a.length)return!1;if(k){if(!(0,S.startsWithIgnoreCase)(a,v))return!1;if(v.length===a.length)return!0;let F=v.length;return v.charAt(v.length-1)===D&&F--,a.charAt(F)===D}return v.charAt(v.length-1)!==D&&(v+=D),a.indexOf(v)===0}e.isEqualOrParent=o;function c(a){return a>=65&&a<=90||a>=97&&a<=122}e.isWindowsDriveLetter=c;function P(a,v){return A.isWindows&&a.endsWith(":")&&(a+=I.sep),(0,I.isAbsolute)(a)||(a=(0,I.join)(v,a)),a=(0,I.normalize)(a),A.isWindows?(a=(0,S.rtrim)(a,I.sep),a.endsWith(":")&&(a+=I.sep)):(a=(0,S.rtrim)(a,I.sep),a||(a=I.sep)),a}e.sanitizeFilePath=P;function _(a){const v=(0,I.normalize)(a);return A.isWindows?a.length>3?!1:j(v)&&(a.length===2||v.charCodeAt(2)===92):v===I.posix.sep}e.isRootOrDriveLetter=_;function j(a,v=A.isWindows){return v?c(a.charCodeAt(0))&&a.charCodeAt(1)===58:!1}e.hasDriveLetter=j;function X(a){return j(a)?a[0]:void 0}e.getDriveLetter=X;function p(a,v,k){return v.length>a.length?-1:a===v?0:(k&&(a=a.toLowerCase(),v=v.toLowerCase()),a.indexOf(v))}e.indexOfPath=p;function q(a){const v=a.split(":");let k,D,B;for(const F of v){const Y=Number(F);(0,T.isNumber)(Y)?D===void 0?D=Y:B===void 0&&(B=Y):k=k?[k,F].join(":"):F}if(!k)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:k,line:D!==void 0?D:void 0,column:B!==void 0?B:D!==void 0?1:void 0}}e.parseLineAndColumnAware=q;const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Q(a,v,k=8){let D="";for(let F=0;F<k;F++)D+=L.charAt(Math.floor(Math.random()*L.length));let B;return v?B=`${v}-${D}`:B=D,a?(0,I.join)(a,B):B}e.randomPath=Q}),define(ne[12],se([0,1,13,2,6]),function(J,e,I,A,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var T;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(T=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class y{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${T.vscodeRemoteResource}`}setPreferredWebSchema(g){this._preferredWebSchema=g}setDelegate(g){this._delegate=g}setServerRootPath(g){this._remoteResourcesPath=`${g}/${T.vscodeRemoteResource}`}set(g,U,N){this._hosts[g]=U,this._ports[g]=N}setConnectionToken(g,U){this._connectionTokens[g]=U}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(g){if(this._delegate)try{return this._delegate(g)}catch(o){return I.onUnexpectedError(o),g}const U=g.authority;let N=this._hosts[U];N&&N.indexOf(":")!==-1&&N.indexOf("[")===-1&&(N=`[${N}]`);const O=this._ports[U],i=this._connectionTokens[U];let n=`path=${encodeURIComponent(g.path)}`;return typeof i=="string"&&(n+=`&${e.connectionTokenQueryName}=${encodeURIComponent(i)}`),S.URI.from({scheme:A.isWeb?this._preferredWebSchema:T.vscodeRemoteResource,authority:`${N}:${O}`,path:this._remoteResourcesPath,query:n})}}e.RemoteAuthorities=new y,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class E{asBrowserUri(g){const U=this.toUri(g,J);return this.uriToBrowserUri(U)}uriToBrowserUri(g){return g.scheme===T.vscodeRemote?e.RemoteAuthorities.rewrite(g):g.scheme===T.file&&(A.isNative||A.isWebWorker&&A.globals.origin===`${T.vscodeFileResource}://${E.FALLBACK_AUTHORITY}`)?g.with({scheme:T.vscodeFileResource,authority:g.authority||E.FALLBACK_AUTHORITY,query:null,fragment:null}):g}asFileUri(g){const U=this.toUri(g,J);return this.uriToFileUri(U)}uriToFileUri(g){return g.scheme===T.vscodeFileResource?g.with({scheme:T.file,authority:g.authority!==E.FALLBACK_AUTHORITY?g.authority:null,query:null,fragment:null}):g}toUri(g,U){return S.URI.isUri(g)?g:S.URI.parse(U.toUrl(g))}}E.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new E;var M;(function(m){const g=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(g.get("3"));const U="vscode-coi";function N(i){let n;typeof i=="string"?n=new URL(i).searchParams:i instanceof URL?n=i.searchParams:S.URI.isUri(i)&&(n=new URL(i.toString(!0)).searchParams);const o=n?.get(U);if(!!o)return g.get(o)}m.getHeadersFromQuery=N;function O(i,n,o){if(!globalThis.crossOriginIsolated)return;const c=n&&o?"3":o?"2":"1";i instanceof URLSearchParams?i.set(U,c):i[U]=c}m.addSearchParam=O})(M=e.COI||(e.COI={}))}),define(ne[7],se([0,1,5,12,3,2,4,6]),function(J,e,I,A,S,T,y,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function M(O){return(0,E.uriToFsPath)(O,!0)}e.originalFSPath=M;class m{constructor(i){this._ignorePathCasing=i}compare(i,n,o=!1){return i===n?0:(0,y.compare)(this.getComparisonKey(i,o),this.getComparisonKey(n,o))}isEqual(i,n,o=!1){return i===n?!0:!i||!n?!1:this.getComparisonKey(i,o)===this.getComparisonKey(n,o)}getComparisonKey(i,n=!1){return i.with({path:this._ignorePathCasing(i)?i.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()}ignorePathCasing(i){return this._ignorePathCasing(i)}isEqualOrParent(i,n,o=!1){if(i.scheme===n.scheme){if(i.scheme===A.Schemas.file)return I.isEqualOrParent(M(i),M(n),this._ignorePathCasing(i))&&i.query===n.query&&(o||i.fragment===n.fragment);if((0,e.isEqualAuthority)(i.authority,n.authority))return I.isEqualOrParent(i.path,n.path,this._ignorePathCasing(i),"/")&&i.query===n.query&&(o||i.fragment===n.fragment)}return!1}joinPath(i,...n){return E.URI.joinPath(i,...n)}basenameOrAuthority(i){return(0,e.basename)(i)||i.authority}basename(i){return S.posix.basename(i.path)}extname(i){return S.posix.extname(i.path)}dirname(i){if(i.path.length===0)return i;let n;return i.scheme===A.Schemas.file?n=E.URI.file(S.dirname(M(i))).path:(n=S.posix.dirname(i.path),i.authority&&n.length&&n.charCodeAt(0)!==47&&(console.error(`dirname("${i.toString})) resulted in a relative path`),n="/")),i.with({path:n})}normalizePath(i){if(!i.path.length)return i;let n;return i.scheme===A.Schemas.file?n=E.URI.file(S.normalize(M(i))).path:n=S.posix.normalize(i.path),i.with({path:n})}relativePath(i,n){if(i.scheme!==n.scheme||!(0,e.isEqualAuthority)(i.authority,n.authority))return;if(i.scheme===A.Schemas.file){const P=S.relative(M(i),M(n));return T.isWindows?I.toSlashes(P):P}let o=i.path||"/";const c=n.path||"/";if(this._ignorePathCasing(i)){let P=0;for(const _=Math.min(o.length,c.length);P<_&&!(o.charCodeAt(P)!==c.charCodeAt(P)&&o.charAt(P).toLowerCase()!==c.charAt(P).toLowerCase());P++);o=c.substr(0,P)+o.substr(P)}return S.posix.relative(o,c)}resolvePath(i,n){if(i.scheme===A.Schemas.file){const o=E.URI.file(S.resolve(M(i),n));return i.with({authority:o.authority,path:o.path})}return n=I.toPosixPath(n),i.with({path:S.posix.resolve(i.path,n)})}isAbsolutePath(i){return!!i.path&&i.path[0]==="/"}isEqualAuthority(i,n){return i===n||i!==void 0&&n!==void 0&&(0,y.equalsIgnoreCase)(i,n)}hasTrailingPathSeparator(i,n=S.sep){if(i.scheme===A.Schemas.file){const o=M(i);return o.length>I.getRoot(o).length&&o[o.length-1]===n}else{const o=i.path;return o.length>1&&o.charCodeAt(o.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(i.fsPath)}}removeTrailingPathSeparator(i,n=S.sep){return(0,e.hasTrailingPathSeparator)(i,n)?i.with({path:i.path.substr(0,i.path.length-1)}):i}addTrailingPathSeparator(i,n=S.sep){let o=!1;if(i.scheme===A.Schemas.file){const c=M(i);o=c!==void 0&&c.length===I.getRoot(c).length&&c[c.length-1]===n}else{n="/";const c=i.path;o=c.length===1&&c.charCodeAt(c.length-1)===47}return!o&&!(0,e.hasTrailingPathSeparator)(i,n)?i.with({path:i.path+"/"}):i}}e.ExtUri=m,e.extUri=new m(()=>!1),e.extUriBiasedIgnorePathCase=new m(O=>O.scheme===A.Schemas.file?!T.isLinux:!0),e.extUriIgnorePathCase=new m(O=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function g(O,i){const n=[];for(let o=0;o<O.length;o++){const c=i(O[o]);O.some((P,_)=>_===o?!1:(0,e.isEqualOrParent)(c,i(P)))||n.push(O[o])}return n}e.distinctParents=g;var U;(function(O){O.META_DATA_LABEL="label",O.META_DATA_DESCRIPTION="description",O.META_DATA_SIZE="size",O.META_DATA_MIME="mime";function i(n){const o=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach(_=>{const[j,X]=_.split(":");j&&X&&o.set(j,X)});const P=n.path.substring(0,n.path.indexOf(";"));return P&&o.set(O.META_DATA_MIME,P),o}O.parseMetaData=i})(U=e.DataUri||(e.DataUri={}));function N(O,i,n){if(i){let o=O.path;return o&&o[0]!==S.posix.sep&&(o=S.posix.sep+o),O.with({scheme:n,authority:i,path:o})}return O.with({scheme:n})}e.toLocalResource=N}),define(ne[8],se([0,1,14,13,18,19,7,2,11]),function(J,e,I,A,S,T,y,E,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function m(r){return!!r&&typeof r.then=="function"}e.isThenable=m;function g(r){const t=new I.CancellationTokenSource,s=r(t.token),l=new Promise((u,b)=>{const z=t.token.onCancellationRequested(()=>{z.dispose(),t.dispose(),b(new A.CancellationError)});Promise.resolve(s).then(K=>{z.dispose(),t.dispose(),u(K)},K=>{z.dispose(),t.dispose(),b(K)})});return new class{cancel(){t.cancel()}then(u,b){return l.then(u,b)}catch(u){return this.then(void 0,u)}finally(u){return l.finally(u)}}}e.createCancelablePromise=g;function U(r,t,s){return new Promise((l,u)=>{const b=t.onCancellationRequested(()=>{b.dispose(),l(s)});r.then(l,u).finally(()=>b.dispose())})}e.raceCancellation=U;function N(r,t){return new Promise((s,l)=>{const u=t.onCancellationRequested(()=>{u.dispose(),l(new A.CancellationError)});r.then(s,l).finally(()=>u.dispose())})}e.raceCancellationError=N;async function O(r){let t=-1;const s=r.map((u,b)=>u.then(z=>(t=b,z))),l=await Promise.race(s);return r.forEach((u,b)=>{b!==t&&u.cancel()}),l}e.raceCancellablePromises=O;function i(r,t,s){let l;const u=setTimeout(()=>{l?.(void 0),s?.()},t);return Promise.race([r.finally(()=>clearTimeout(u)),new Promise(b=>l=b)])}e.raceTimeout=i;function n(r){return new Promise((t,s)=>{const l=r();m(l)?l.then(t,s):t(l)})}e.asPromise=n;class o{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(t){if(this.activePromise){if(this.queuedPromiseFactory=t,!this.queuedPromise){const s=()=>{this.queuedPromise=null;const l=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,l};this.queuedPromise=new Promise(l=>{this.activePromise.then(s,s).then(l)})}return new Promise((s,l)=>{this.queuedPromise.then(s,l)})}return this.activePromise=t(),new Promise((s,l)=>{this.activePromise.then(u=>{this.activePromise=null,s(u)},u=>{this.activePromise=null,l(u)})})}}e.Throttler=o;class c{constructor(){this.current=Promise.resolve(null)}queue(t){return this.current=this.current.then(()=>t(),()=>t())}}e.Sequencer=c;class P{constructor(){this.promiseMap=new Map}queue(t,s){const u=(this.promiseMap.get(t)??Promise.resolve()).catch(()=>{}).then(s).finally(()=>{this.promiseMap.get(t)===u&&this.promiseMap.delete(t)});return this.promiseMap.set(t,u),u}}e.SequencerByKey=P;const _=(r,t)=>{let s=!0;const l=setTimeout(()=>{s=!1,t()},r);return{isTriggered:()=>s,dispose:()=>{clearTimeout(l),s=!1}}},j=r=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,r())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class X{constructor(t){this.defaultDelay=t,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(t,s=this.defaultDelay){this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((u,b)=>{this.doResolve=u,this.doReject=b}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const u=this.task;return this.task=null,u()}}));const l=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=s===M.MicrotaskDelay?j(l):_(s,l),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new A.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=X;class p{constructor(t){this.delayer=new X(t),this.throttler=new o}trigger(t,s){return this.delayer.trigger(()=>this.throttler.queue(t),s)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=p;class q{constructor(){this._isOpen=!1,this._promise=new Promise((t,s)=>{this._completePromise=t})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=q;class L extends q{constructor(t){super(),this._timeout=setTimeout(()=>this.open(),t)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=L;function Q(r,t){return t?new Promise((s,l)=>{const u=setTimeout(()=>{b.dispose(),s()},r),b=t.onCancellationRequested(()=>{clearTimeout(u),b.dispose(),l(new A.CancellationError)})}):g(s=>Q(r,s))}e.timeout=Q;function a(r,t=0){const s=setTimeout(r,t);return(0,T.toDisposable)(()=>clearTimeout(s))}e.disposableTimeout=a;function v(r){const t=[];let s=0;const l=r.length;function u(){return s<l?r[s++]():null}function b(z){z!=null&&t.push(z);const K=u();return K?K.then(b):Promise.resolve(t)}return Promise.resolve(null).then(b)}e.sequence=v;function k(r,t=l=>!!l,s=null){let l=0;const u=r.length,b=()=>{if(l>=u)return Promise.resolve(s);const z=r[l++];return Promise.resolve(z()).then(V=>t(V)?Promise.resolve(V):b())};return b()}e.first=k;function D(r,t=l=>!!l,s=null){if(r.length===0)return Promise.resolve(s);let l=r.length;const u=()=>{l=-1;for(const b of r)b.cancel?.()};return new Promise((b,z)=>{for(const K of r)K.then(V=>{--l>=0&&t(V)?(u(),b(V)):l===0&&b(s)}).catch(V=>{--l>=0&&(u(),z(V))})})}e.firstParallel=D;class B{constructor(t){this._size=0,this.maxDegreeOfParalellism=t,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new S.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(t){return this._size++,new Promise((s,l)=>{this.outstandingPromises.push({factory:t,c:s,e:l}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const t=this.outstandingPromises.shift();this.runningPromises++;const s=t.factory();s.then(t.c,t.e),s.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=B;class F extends B{constructor(){super(1)}}e.Queue=F;class Y{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const t=new d;return this.drainers.add(t),t.p}isDrained(){for(const[,t]of this.queues)if(t.size>0)return!1;return!0}queueFor(t,s=y.extUri){const l=s.getComparisonKey(t);let u=this.queues.get(l);return u||(u=new F,S.Event.once(u.onDrained)(()=>{u?.dispose(),this.queues.delete(l),this.onDidQueueDrain()}),this.queues.set(l,u)),u}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const t of this.drainers)t.complete();this.drainers.clear()}dispose(){for(const[,t]of this.queues)t.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=Y;class ie{constructor(t,s){this._token=-1,typeof t=="function"&&typeof s=="number"&&this.setIfNotSet(t,s)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,s){this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},s)}setIfNotSet(t,s){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},s))}}e.TimeoutTimer=ie;class te{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(t,s){this.cancel(),this._token=setInterval(()=>{t()},s)}}e.IntervalTimer=te;class Z{constructor(t,s){this.timeoutToken=-1,this.runner=t,this.timeout=s,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(t=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)}get delay(){return this.timeout}set delay(t){this.timeout=t}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=Z;class x{constructor(t,s){s%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${s}ms is not a multiple of 1000ms.`),this.runner=t,this.timeout=s,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(t=this.timeout){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(t/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=x;class re extends Z{constructor(t,s){super(t,s),this.units=[]}work(t){this.units.push(t),this.isScheduled()||this.schedule()}doRun(){const t=this.units;this.units=[],this.runner?.(t)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=re;class W extends T.Disposable{constructor(t,s){super(),this.options=t,this.handler=s,this.pendingWork=[],this.throttler=this._register(new T.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(t){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+t.length>this.options.maxBufferedWork)return!1}else if(this.pending+t.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}for(const s of t)this.pendingWork.push(s);return this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new Z(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=W,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=r=>{(0,E.setTimeout0)(()=>{if(t)return;const s=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(r,t)=>{const s=requestIdleCallback(r,typeof t=="number"?{timeout:t}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(s))}}}}();class G{constructor(t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(s){this._error=s}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=G;async function H(r,t,s){let l;for(let u=0;u<s;u++)try{return await r()}catch(b){l=b,await Q(t)}throw l}e.retry=H;class ee{hasPending(t){return this._pending?typeof t=="number"?this._pending.taskId===t:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(t,s,l){return this._pending={taskId:t,cancel:()=>l?.(),promise:s},s.then(()=>this.donePending(t),()=>this.donePending(t)),s}donePending(t){this._pending&&t===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const t=this._next;this._next=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this._next)this._next.run=t;else{let s,l;const u=new Promise((b,z)=>{s=b,l=z});this._next={run:t,promise:u,promiseResolve:s,promiseReject:l}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=ee;class f{constructor(t,s=()=>Date.now()){this.interval=t,this.nowFn=s,this.lastIncrementTime=0,this.value=0}increment(){const t=this.nowFn();return t-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=t,this.value=0),this.value++,this.value}}e.IntervalCounter=f;class d{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((t,s)=>{this.completeCallback=t,this.errorCallback=s})}complete(t){return new Promise(s=>{this.completeCallback(t),this.resolved=!0,s()})}error(t){return new Promise(s=>{this.errorCallback(t),this.rejected=!0,s()})}cancel(){new Promise(t=>{this.errorCallback(new A.CancellationError),this.rejected=!0,t()})}}e.DeferredPromise=d;var h;(function(r){async function t(l){let u;const b=await Promise.all(l.map(z=>z.then(K=>K,K=>{u||(u=K)})));if(typeof u<"u")throw u;return b}r.settled=t;function s(l){return new Promise(async(u,b)=>{try{await l(u,b)}catch(z){b(z)}})}r.withAsyncBody=s})(h=e.Promises||(e.Promises={}));var R;(function(r){r[r.Initial=0]="Initial",r[r.DoneOK=1]="DoneOK",r[r.DoneError=2]="DoneError"})(R||(R={}));class w{static fromArray(t){return new w(s=>{s.emitMany(t)})}static fromPromise(t){return new w(async s=>{s.emitMany(await t)})}static fromPromises(t){return new w(async s=>{await Promise.all(t.map(async l=>s.emitOne(await l)))})}static merge(t){return new w(async s=>{await Promise.all(t.map(async l=>{for await(const u of l)s.emitOne(u)}))})}constructor(t){this._state=0,this._results=[],this._error=null,this._onStateChanged=new S.Emitter,queueMicrotask(async()=>{const s={emitOne:l=>this.emitOne(l),emitMany:l=>this.emitMany(l),reject:l=>this.reject(l)};try{await Promise.resolve(t(s)),this.resolve()}catch(l){this.reject(l)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await S.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(t,s){return new w(async l=>{for await(const u of t)l.emitOne(s(u))})}map(t){return w.map(this,t)}static filter(t,s){return new w(async l=>{for await(const u of t)s(u)&&l.emitOne(u)})}filter(t){return w.filter(this,t)}static coalesce(t){return w.filter(t,s=>!!s)}coalesce(){return w.coalesce(this)}static async toPromise(t){const s=[];for await(const l of t)s.push(l);return s}toPromise(){return w.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}}w.EMPTY=w.fromArray([]),e.AsyncIterableObject=w;class C extends w{constructor(t,s){super(s),this._source=t}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=C;function $(r){const t=new I.CancellationTokenSource,s=r(t.token);return new C(t,async l=>{const u=t.token.onCancellationRequested(()=>{u.dispose(),t.dispose(),l.reject(new A.CancellationError)});try{for await(const b of s){if(t.token.isCancellationRequested)return;l.emitOne(b)}u.dispose(),t.dispose()}catch(b){u.dispose(),t.dispose(),l.reject(b)}})}e.createCancelableAsyncIterable=$}),define(ne[9],se([0,1,20,8,5,10,3,2,4]),function(J,e,I,A,S,T,y,E,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function m(){return Object.create(null)}e.getEmptyExpression=m,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const g="[/\\\\]",U="[^/\\\\]",N=/\//g;function O(f,d){switch(f){case 0:return"";case 1:return`${U}*?`;default:return`(?:${g}|${U}+${g}${d?`|${g}${U}+`:""})*?`}}function i(f,d){if(!f)return[];const h=[];let R=!1,w=!1,C="";for(const $ of f){switch($){case d:if(!R&&!w){h.push(C),C="";continue}break;case"{":R=!0;break;case"}":R=!1;break;case"[":w=!0;break;case"]":w=!1;break}C+=$}return C&&h.push(C),h}e.splitGlobAware=i;function n(f){if(!f)return"";let d="";const h=i(f,e.GLOB_SPLIT);if(h.every(R=>R===e.GLOBSTAR))d=".*";else{let R=!1;h.forEach((w,C)=>{if(w===e.GLOBSTAR){if(R)return;d+=O(2,C===h.length-1)}else{let $=!1,r="",t=!1,s="";for(const l of w){if(l!=="}"&&$){r+=l;continue}if(t&&(l!=="]"||!s)){let u;l==="-"?u=l:(l==="^"||l==="!")&&!s?u="^":l===e.GLOB_SPLIT?u="":u=(0,M.escapeRegExpCharacters)(l),s+=u;continue}switch(l){case"{":$=!0;continue;case"[":t=!0;continue;case"}":{d+=`(?:${i(r,",").map(z=>n(z)).join("|")})`,$=!1,r="";break}case"]":{d+="["+s+"]",t=!1,s="";break}case"?":d+=U;continue;case"*":d+=O(1);continue;default:d+=(0,M.escapeRegExpCharacters)(l)}}C<h.length-1&&(h[C+1]!==e.GLOBSTAR||C+2<h.length)&&(d+=g)}R=w===e.GLOBSTAR})}return d}const o=/^\*\*\/\*\.[\w\.-]+$/,c=/^\*\*\/([\w\.-]+)\/?$/,P=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,_=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,j=/^\*\*((\/[\w\.-]+)+)\/?$/,X=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,p=new T.LRUCache(1e4),q=function(){return!1},L=function(){return null};function Q(f,d){if(!f)return L;let h;typeof f!="string"?h=f.pattern:h=f,h=h.trim();const R=`${h}_${!!d.trimForExclusions}`;let w=p.get(R);if(w)return a(w,f);let C;return o.test(h)?w=k(h.substr(4),h):(C=c.exec(v(h,d)))?w=D(C[1],h):(d.trimForExclusions?_:P).test(h)?w=B(h,d):(C=j.exec(v(h,d)))?w=F(C[1].substr(1),h,!0):(C=X.exec(v(h,d)))?w=F(C[1],h,!1):w=Y(h),p.set(R,w),a(w,f)}function a(f,d){if(typeof d=="string")return f;const h=function(R,w){return(0,S.isEqualOrParent)(R,d.base,!E.isLinux)?f((0,M.ltrim)(R.substr(d.base.length),y.sep),w):null};return h.allBasenames=f.allBasenames,h.allPaths=f.allPaths,h.basenames=f.basenames,h.patterns=f.patterns,h}function v(f,d){return d.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function k(f,d){return function(h,R){return typeof h=="string"&&h.endsWith(f)?d:null}}function D(f,d){const h=`/${f}`,R=`\\${f}`,w=function($,r){return typeof $!="string"?null:r?r===f?d:null:$===f||$.endsWith(h)||$.endsWith(R)?d:null},C=[f];return w.basenames=C,w.patterns=[d],w.allBasenames=C,w}function B(f,d){const h=H(f.slice(1,-1).split(",").map(r=>Q(r,d)).filter(r=>r!==L),f),R=h.length;if(!R)return L;if(R===1)return h[0];const w=function(r,t){for(let s=0,l=h.length;s<l;s++)if(h[s](r,t))return f;return null},C=h.find(r=>!!r.allBasenames);C&&(w.allBasenames=C.allBasenames);const $=h.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return $.length&&(w.allPaths=$),w}function F(f,d,h){const R=y.sep===y.posix.sep,w=R?f:f.replace(N,y.sep),C=y.sep+w,$=y.posix.sep+f;let r;return h?r=function(t,s){return typeof t=="string"&&(t===w||t.endsWith(C)||!R&&(t===f||t.endsWith($)))?d:null}:r=function(t,s){return typeof t=="string"&&(t===w||!R&&t===f)?d:null},r.allPaths=[(h?"*/":"./")+f],r}function Y(f){try{const d=new RegExp(`^${n(f)}$`);return function(h){return d.lastIndex=0,typeof h=="string"&&d.test(h)?f:null}}catch{return L}}function ie(f,d,h){return!f||typeof d!="string"?!1:te(f)(d,void 0,h)}e.match=ie;function te(f,d={}){if(!f)return q;if(typeof f=="string"||Z(f)){const h=Q(f,d);if(h===L)return q;const R=function(w,C){return!!h(w,C)};return h.allBasenames&&(R.allBasenames=h.allBasenames),h.allPaths&&(R.allPaths=h.allPaths),R}return W(f,d)}e.parse=te;function Z(f){const d=f;return d?typeof d.base=="string"&&typeof d.pattern=="string":!1}e.isRelativePattern=Z;function x(f){return f.allBasenames||[]}e.getBasenameTerms=x;function re(f){return f.allPaths||[]}e.getPathTerms=re;function W(f,d){const h=H(Object.getOwnPropertyNames(f).map(r=>G(r,f[r],d)).filter(r=>r!==L)),R=h.length;if(!R)return L;if(!h.some(r=>!!r.requiresSiblings)){if(R===1)return h[0];const r=function(l,u){let b;for(let z=0,K=h.length;z<K;z++){const V=h[z](l,u);if(typeof V=="string")return V;(0,A.isThenable)(V)&&(b||(b=[]),b.push(V))}return b?(async()=>{for(const z of b){const K=await z;if(typeof K=="string")return K}return null})():null},t=h.find(l=>!!l.allBasenames);t&&(r.allBasenames=t.allBasenames);const s=h.reduce((l,u)=>u.allPaths?l.concat(u.allPaths):l,[]);return s.length&&(r.allPaths=s),r}const w=function(r,t,s){let l,u;for(let b=0,z=h.length;b<z;b++){const K=h[b];K.requiresSiblings&&s&&(t||(t=(0,y.basename)(r)),l||(l=t.substr(0,t.length-(0,y.extname)(r).length)));const V=K(r,t,l,s);if(typeof V=="string")return V;(0,A.isThenable)(V)&&(u||(u=[]),u.push(V))}return u?(async()=>{for(const b of u){const z=await b;if(typeof z=="string")return z}return null})():null},C=h.find(r=>!!r.allBasenames);C&&(w.allBasenames=C.allBasenames);const $=h.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return $.length&&(w.allPaths=$),w}function G(f,d,h){if(d===!1)return L;const R=Q(f,h);if(R===L)return L;if(typeof d=="boolean")return R;if(d){const w=d.when;if(typeof w=="string"){const C=($,r,t,s)=>{if(!s||!R($,r))return null;const l=w.replace("$(basename)",()=>t),u=s(l);return(0,A.isThenable)(u)?u.then(b=>b?f:null):u?f:null};return C.requiresSiblings=!0,C}}return R}function H(f,d){const h=f.filter(r=>!!r.basenames);if(h.length<2)return f;const R=h.reduce((r,t)=>{const s=t.basenames;return s?r.concat(s):r},[]);let w;if(d){w=[];for(let r=0,t=R.length;r<t;r++)w.push(d)}else w=h.reduce((r,t)=>{const s=t.patterns;return s?r.concat(s):r},[]);const C=function(r,t){if(typeof r!="string")return null;if(!t){let l;for(l=r.length;l>0;l--){const u=r.charCodeAt(l-1);if(u===47||u===92)break}t=r.substr(l)}const s=R.indexOf(t);return s!==-1?w[s]:null};C.basenames=R,C.patterns=w,C.allBasenames=R;const $=f.filter(r=>!r.basenames);return $.push(C),$}function ee(f,d){return(0,I.equals)(f,d,(h,R)=>typeof h=="string"&&typeof R=="string"?h===R:typeof h!="string"&&typeof R!="string"?h.base===R.base&&h.pattern===R.pattern:!1)}e.patternsEquals=ee}),define(ne[15],se([0,1,21]),function(J,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const A=(S,T,y)=>{let E;if(S[0]===255&&S[1]===254)E=new TextDecoder("utf-16le").decode(S);else if(S[0]===254&&S[1]===255)E=new TextDecoder("utf-16be").decode(S);else if(E=new TextDecoder("utf8").decode(S),E.slice(0,1e3).includes("\uFFFD")&&S.includes(0))return[];const M=[],m=[];let g=null,U=y.remainingResultQuota;for(;U>=0&&(g=T.exec(E));)m.push({matchStartIndex:g.index,matchedText:g[0]}),U--;if(m.length){const N=new Set,O=new Set,i=[],n=j=>E.slice(i[j].start,i[j].end);let o=0,c=null;const P=/\r?\n/g;for(;c=P.exec(E);)i.push({start:o,end:c.index}),o=c.index+c[0].length;o<E.length&&i.push({start:o,end:E.length});let _=0;for(const{matchStartIndex:j,matchedText:X}of m){if(U<0)break;for(;Boolean(i[_+1])&&j>i[_].end;)_++;let p=_;for(;Boolean(i[p+1])&&j+X.length>i[p].end;)p++;if(y.beforeContext)for(let k=Math.max(0,_-y.beforeContext);k<_;k++)N.add(k);let q="",L=0;for(let k=_;k<=p;k++){let D=n(k);y.previewOptions?.charsPerLine&&D.length>y.previewOptions.charsPerLine&&(L=Math.max(j-i[_].start-20,0),D=D.substr(L,y.previewOptions.charsPerLine)),q+=`${D}
`,O.add(k)}const Q=new I.Range(_,j-i[_].start,p,j+X.length-i[p].start),a=new I.Range(0,j-i[_].start-L,p-_,j+X.length-i[p].start-(p===_?L:0)),v={ranges:Q,preview:{text:q,matches:a}};if(M.push(v),y.afterContext)for(let k=p+1;k<=Math.min(p+y.afterContext,i.length-1);k++)N.add(k)}for(const j of N)O.has(j)||M.push({text:n(j),lineNumber:j+1})}return M};e.getFileResults=A}),define(ne[16],se([0,1,9]),function(J,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class A{constructor(T,y,E){if(this.location=y,this.parent=E,y[y.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");y[y.length-1]!=="/"&&(y+="/"),this.isPathIgnored=this.parseIgnoreFile(T,this.location,this.parent)}updateContents(T){this.isPathIgnored=this.parseIgnoreFile(T,this.location,this.parent)}isPathIncludedInTraversal(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);return!this.isPathIgnored(T,y)}isArbitraryPathIgnored(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);const E=T.split("/").filter(g=>g);let M=!1,m="";for(let g=0;g<E.length;g++){const U=g===E.length-1,N=E[g];if(m=m+"/"+N,!this.isPathIncludedInTraversal(m,U?y:!0)){M=!0;break}}return M}gitignoreLinesToExpression(T,y,E){const M=T.map(g=>this.gitignoreLineToGlob(g,y)),m=Object.create(null);for(const g of M)m[g]=!0;return I.parse(m,{trimForExclusions:E})}parseIgnoreFile(T,y,E){const M=T.split(`
`).map(_=>_.trim()).filter(_=>_&&_[0]!=="#"),m=M.filter(_=>!_.endsWith("/")),g=m.filter(_=>!_.includes("!")),U=this.gitignoreLinesToExpression(g,y,!0),N=m.filter(_=>_.includes("!")).map(_=>_.replace(/!/g,"")),O=this.gitignoreLinesToExpression(N,y,!1),i=M.filter(_=>!_.includes("!")),n=this.gitignoreLinesToExpression(i,y,!0),o=M.filter(_=>_.includes("!")).map(_=>_.replace(/!/g,"")),c=this.gitignoreLinesToExpression(o,y,!1);return(_,j)=>_.startsWith(y)?j&&n(_)&&!c(_)||U(_)&&!O(_)?!0:E?E.isPathIgnored(_,j):!1:!1}gitignoreLineToGlob(T,y){const E=T.indexOf("/");return E===-1||E===T.length-1?T="**/"+T:(E===0?y.slice(-1)==="/"&&(T=T.slice(1)):y.slice(-1)!=="/"&&(T="/"+T),T=y+T),T}}e.IgnoreFile=A}),define(ne[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(J,e,I,A,S,T,y,E,M,m,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const U=!1,N=+new Date,O={},i=async(p,q)=>{if(!U)return q();const L=Date.now(),Q=(O[p]??0)+1;console.info(p,Q,"starting",Math.round((L-N)*10)/1e4),O[p]=Q;const a=await q(),v=Date.now();return console.info(p,Q,"took",v-L),a};function n(p){return new o(p)}e.create=n;class o{constructor(q){this.host=q,this.cancellationTokens=new Map}cancelQuery(q){this.cancellationTokens.get(q)?.cancel()}registerCancellationToken(q){const L=new T.CancellationTokenSource;return this.cancellationTokens.set(q,L),L}async listDirectory(q,L,Q,a,v){const k=P(Q),D=new g.ExtUri(()=>a),B=this.registerCancellationToken(v),F=[];let Y=!1,ie=0;const te=L.maxResults||512,Z=L.filePattern?x=>L.filePattern.split("").every(re=>x.includes(re)):x=>!0;return await i("listDirectory",()=>this.walkFolderQuery(q,_(L),k,D,x=>{if(!!Z(x.name))return ie++,te&&ie>te&&(Y=!0,B.cancel()),F.push(x.path)},B.token)),{results:F,limitHit:Y}}async searchDirectory(q,L,Q,a,v){const k=P(Q),D=new g.ExtUri(()=>a);return i("searchInFiles",async()=>{const B=this.registerCancellationToken(v),F=[],Y=c(L.contentPattern),ie=[];let te=0,Z=0;const x=!1,re=async W=>{if(B.token.isCancellationRequested)return;te++;const G=await W.resolve();if(B.token.isCancellationRequested)return;const H=new Uint8Array(G),ee=(0,y.getFileResults)(H,Y,{afterContext:L.afterContext??0,beforeContext:L.beforeContext??0,previewOptions:L.previewOptions,remainingResultQuota:L.maxResults?L.maxResults-Z:1e4});if(ee.length){Z+=ee.length,L.maxResults&&Z>L.maxResults&&B.cancel();const f={resource:A.URI.joinPath(k.folder,W.path),results:ee};this.host.sendTextSearchMatch(f,v),F.push(f)}};return await i("walkFolderToResolve",()=>this.walkFolderQuery(q,_(L),k,D,async W=>ie.push(re(W)),B.token)),await i("resolveOngoingProcesses",()=>Promise.all(ie)),U&&console.log("Searched in",te,"files"),{results:F,limitHit:x}})}async walkFolderQuery(q,L,Q,a,v,k){const D=I.parse(Q.excludePattern??{},{trimForExclusions:!0}),B=(W,G,H)=>(W=W.slice(1),!!(D(W,G,H)||j(L,W))),F=(W,G,H)=>(W=W.slice(1),!(D(W,G,H)||!X(L,W,a))),Y=(W,G)=>({type:"file",name:W.name,path:G,resolve:()=>W.getFile().then(ee=>ee.arrayBuffer())}),ie=W=>W.kind==="directory",te=W=>W.kind==="file",Z=async(W,G,H)=>{if(!Q.disregardIgnoreFiles){const f=await Promise.all([W.getFileHandle(".gitignore").catch(d=>{}),W.getFileHandle(".ignore").catch(d=>{})]);await Promise.all(f.map(async d=>{if(!d)return;const h=new TextDecoder("utf8").decode(new Uint8Array(await(await d.getFile()).arrayBuffer()));H=new E.IgnoreFile(h,G,H)}))}const ee=m.Promises.withAsyncBody(async f=>{const d=[],h=[],R=[],w=new Set;for await(const C of W.entries())R.push(C),w.add(C[0]);for(const[C,$]of R){if(k.isCancellationRequested)break;const r=G+C;if(H&&!H.isPathIncludedInTraversal(r,$.kind==="directory"))continue;const t=s=>w.has(s);ie($)&&!B(r,C,t)?h.push(Z($,r+"/",H)):te($)&&F(r,C,t)&&d.push(Y($,r))}f([...await Promise.all(h),...d])});return{type:"dir",name:W.name,entries:ee}},x=async(W,G)=>{k.isCancellationRequested||await Promise.all((await W.entries).sort((H,ee)=>-(H.type==="dir"?0:1)+(ee.type==="dir"?0:1)).map(async H=>H.type==="dir"?x(H,G):G(H)))},re=await i("process",()=>Z(q,"/"));await i("resolve",()=>x(re,v))}}e.LocalFileSearchSimpleWorker=o;function c(p){return(0,M.createRegExp)(p.pattern,!!p.isRegExp,{wholeWord:p.isWordMatch,global:!0,matchCase:p.isCaseSensitive,multiline:!0,unicode:!0})}function P(p){return{...p,folder:A.URI.revive(p.folder)}}function _(p){return{...p,extraFileResources:p.extraFileResources?.map(q=>A.URI.revive(q)),folderQueries:p.folderQueries.map(q=>P(q))}}function j(p,q){return!!(p.excludePattern&&I.match(p.excludePattern,q))}function X(p,q,L){return p.excludePattern&&I.match(p.excludePattern,q)?!1:p.includePattern||p.usingSearchPaths?p.includePattern&&I.match(p.includePattern,q)?!0:p.usingSearchPaths?!!p.folderQueries&&p.folderQueries.some(Q=>{const a=Q.folder,v=A.URI.file(q);if(L.isEqualOrParent(v,a)){const k=S.relative(a.path,v.path);return!Q.includePattern||!!I.match(Q.includePattern,k)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/22a808587994126e19125c6a1a03c00b990223f4/core/vs\workbench\services\search\worker\localFileSearch.js.map
